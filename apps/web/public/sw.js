"use strict";(()=>{var Ii=Object.create;var yn=Object.defineProperty;var Ki=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var Mi=Object.getPrototypeOf,Ui=Object.prototype.hasOwnProperty;var Bi=(f,i,u)=>i in f?yn(f,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):f[i]=u;var Fi=(f,i)=>()=>(f&&(i=f(f=0)),i);var $i=(f,i)=>()=>(i||f((i={exports:{}}).exports,i),i.exports);var Vi=(f,i,u,p)=>{if(i&&typeof i=="object"||typeof i=="function")for(let y of Li(i))!Ui.call(f,y)&&y!==u&&yn(f,y,{get:()=>i[y],enumerable:!(p=Ki(i,y))||p.enumerable});return f};var qi=(f,i,u)=>(u=f!=null?Ii(Mi(f)):{},Vi(i||!f||!f.__esModule?yn(u,"default",{value:f,enumerable:!0}):u,f));var Ke=(f,i,u)=>Bi(f,typeof i!="symbol"?i+"":i,u);var A,v=Fi(()=>{A=[]});var Yo=$i((Sn,On)=>{v();(function(f,i){typeof Sn=="object"&&typeof On<"u"?On.exports=i():typeof define=="function"&&define.amd?define(i):(f=typeof globalThis<"u"?globalThis:f||self,f.Dexie=i())})(Sn,(function(){"use strict";var f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},f(e,t)};function i(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");f(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(){return u=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},u.apply(this,arguments)};function p(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,b=Object.keys,E=Array.isArray;typeof Promise<"u"&&!y.Promise&&(y.Promise=Promise);function O(e,t){return typeof t!="object"||b(t).forEach(function(r){e[r]=t[r]}),e}var $=Object.getPrototypeOf,ee={}.hasOwnProperty;function X(e,t){return ee.call(e,t)}function re(e,t){typeof t=="function"&&(t=t($(e))),(typeof Reflect>"u"?b:Reflect.ownKeys)(t).forEach(function(r){fe(e,r,t[r])})}var Ne=Object.defineProperty;function fe(e,t,r,n){Ne(e,t,O(r&&X(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function Ye(e){return{from:function(t){return e.prototype=Object.create(t.prototype),fe(e.prototype,"constructor",e),{extend:re.bind(null,e.prototype)}}}}var Zo=Object.getOwnPropertyDescriptor;function In(e,t){var r=Zo(e,t),n;return r||(n=$(e))&&In(n,t)}var ea=[].slice;function Mt(e,t,r){return ea.call(e,t,r)}function Kn(e,t){return t(e)}function st(e){if(!e)throw new Error("Assertion Failed")}function Ln(e){y.setImmediate?setImmediate(e):setTimeout(e,0)}function ta(e,t){return e.reduce(function(r,n,o){var a=t(n,o);return a&&(r[a[0]]=a[1]),r},{})}function ve(e,t){if(typeof t=="string"&&X(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],n=0,o=t.length;n<o;++n){var a=ve(e,t[n]);r.push(a)}return r}var s=t.indexOf(".");if(s!==-1){var c=e[t.substr(0,s)];return c==null?void 0:ve(c,t.substr(s+1))}}function ae(e,t,r){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){st(typeof r!="string"&&"length"in r);for(var n=0,o=t.length;n<o;++n)ae(e,t[n],r[n])}else{var a=t.indexOf(".");if(a!==-1){var s=t.substr(0,a),c=t.substr(a+1);if(c==="")r===void 0?E(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r;else{var l=e[s];(!l||!X(e,s))&&(l=e[s]={}),ae(l,c,r)}}else r===void 0?E(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function ra(e,t){typeof t=="string"?ae(e,t,void 0):"length"in t&&[].map.call(t,function(r){ae(e,r,void 0)})}function Mn(e){var t={};for(var r in e)X(e,r)&&(t[r]=e[r]);return t}var na=[].concat;function Un(e){return na.apply([],e)}var oa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Un([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return y[e]}),Bn=new Set(oa.map(function(e){return y[e]}));function Fn(e){var t={};for(var r in e)if(X(e,r)){var n=e[r];t[r]=!n||typeof n!="object"||Bn.has(n.constructor)?n:Fn(n)}return t}function aa(e){for(var t in e)if(X(e,t))return!1;return!0}var ut=null;function Me(e){ut=new WeakMap;var t=Cr(e);return ut=null,t}function Cr(e){if(!e||typeof e!="object")return e;var t=ut.get(e);if(t)return t;if(E(e)){t=[],ut.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(Cr(e[r]))}else if(Bn.has(e.constructor))t=e;else{var o=$(e);t=o===Object.prototype?{}:Object.create(o),ut.set(e,t);for(var a in e)X(e,a)&&(t[a]=Cr(e[a]))}return t}var ia={}.toString;function kr(e){return ia.call(e).slice(8,-1)}var Dr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",sa=typeof Dr=="symbol"?function(e){var t;return e!=null&&(t=e[Dr])&&t.apply(e)}:function(){return null};function Ue(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}var Qe={};function we(e){var t,r,n,o;if(arguments.length===1){if(E(e))return e.slice();if(this===Qe&&typeof e=="string")return[e];if(o=sa(e)){for(r=[];n=o.next(),!n.done;)r.push(n.value);return r}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var Tr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ua=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],$n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Sr=ua.concat($n),ca={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this.name=e,this.message=t}Ye(Xe).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Vn(e,t){return e+". Errors: "+Object.keys(t).map(function(r){return t[r].toString()}).filter(function(r,n,o){return o.indexOf(r)===n}).join(`
`)}function Ut(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=Vn(e,t)}Ye(Ut).from(Xe);function Je(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(r){return t[r]}),this.failuresByPos=t,this.message=Vn(e,this.failures)}Ye(Je).from(Xe);var Or=Sr.reduce(function(e,t){return e[t]=t+"Error",e},{}),la=Xe,F=Sr.reduce(function(e,t){var r=t+"Error";function n(o,a){this.name=r,o?typeof o=="string"?(this.message="".concat(o).concat(a?`
 `+a:""),this.inner=a||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=ca[t]||r,this.inner=null)}return Ye(n).from(la),e[t]=n,e},{});F.Syntax=SyntaxError,F.Type=TypeError,F.Range=RangeError;var qn=$n.reduce(function(e,t){return e[t+"Error"]=F[t],e},{});function fa(e,t){if(!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!qn[e.name])return e;var r=new qn[e.name](t||e.message,e);return"stack"in e&&fe(r,"stack",{get:function(){return this.inner.stack}}),r}var Bt=Sr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=F[t]),e},{});Bt.ModifyError=Ut,Bt.DexieError=Xe,Bt.BulkError=Je;function Y(){}function ct(e){return e}function ha(e,t){return e==null||e===ct?t:function(r){return t(e(r))}}function Be(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function pa(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Be(n,this.onsuccess):n),o&&(this.onerror=this.onerror?Be(o,this.onerror):o),a!==void 0?a:r}}function da(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Be(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Be(n,this.onerror):n)}}function ma(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);O(r,n);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Be(o,this.onsuccess):o),a&&(this.onerror=this.onerror?Be(a,this.onerror):a),n===void 0?s===void 0?void 0:s:O(n,s)}}function ga(e,t){return e===Y?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Ar(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return r.then(function(){return t.apply(n,a)})}return t.apply(this,arguments)}}var de=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function jn(e,t){de=e}var lt={},Wn=100,Pr=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,$(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,$(t),e]})(),Hn=Pr[0],Gn=Pr[1],ya=Pr[2],va=Gn&&Gn.then,Fe=Hn&&Hn.constructor,Ir=!!ya;function wa(){queueMicrotask(_a)}var ft=function(e,t){ht.push([e,t]),Ft&&(wa(),Ft=!1)},Kr=!0,Ft=!0,$e=[],$t=[],Lr=ct,Ce={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},U=Ce,ht=[],Ve=0,Vt=[];function K(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=U;if(typeof e!="function"){if(e!==lt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ur(this,this._value);return}this._state=null,this._value=null,++t.ref,Yn(this,e)}var Mr={get:function(){var e=U,t=Ht;function r(n,o){var a=this,s=!e.global&&(e!==U||t!==Ht),c=s&&!De(),l=new K(function(h,g){Br(a,new zn(Jn(n,e,s,c),Jn(o,e,s,c),h,g,e))});return this._consoleTask&&(l._consoleTask=this._consoleTask),l}return r.prototype=lt,r},set:function(e){fe(this,"then",e&&e.prototype===lt?Mr:{get:function(){return e},set:Mr.set})}};re(K.prototype,{then:Mr,_then:function(e,t){Br(this,new zn(null,null,e,t,U))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,function(n){return n instanceof t?r(n):qt(n)}):this.then(null,function(n){return n&&n.name===t?r(n):qt(n)})},finally:function(e){return this.then(function(t){return K.resolve(e()).then(function(){return t})},function(t){return K.resolve(e()).then(function(){return qt(t)})})},timeout:function(e,t){var r=this;return e<1/0?new K(function(n,o){var a=setTimeout(function(){return o(new F.Timeout(t))},e);r.then(n,o).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&fe(K.prototype,Symbol.toStringTag,"Dexie.Promise"),Ce.env=Xn();function zn(e,t,r,n,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=n,this.psd=o}re(K,{all:function(){var e=we.apply(null,arguments).map(Gt);return new K(function(t,r){e.length===0&&t([]);var n=e.length;e.forEach(function(o,a){return K.resolve(o).then(function(s){e[a]=s,--n||t(e)},r)})})},resolve:function(e){if(e instanceof K)return e;if(e&&typeof e.then=="function")return new K(function(r,n){e.then(r,n)});var t=new K(lt,!0,e);return t},reject:qt,race:function(){var e=we.apply(null,arguments).map(Gt);return new K(function(t,r){e.map(function(n){return K.resolve(n).then(t,r)})})},PSD:{get:function(){return U},set:function(e){return U=e}},totalEchoes:{get:function(){return Ht}},newPSD:ke,usePSD:qe,scheduler:{get:function(){return ft},set:function(e){ft=e}},rejectionMapper:{get:function(){return Lr},set:function(e){Lr=e}},follow:function(e,t){return new K(function(r,n){return ke(function(o,a){var s=U;s.unhandleds=[],s.onunhandled=a,s.finalize=Be(function(){var c=this;Ea(function(){c.unhandleds.length===0?o():a(c.unhandleds[0])})},s.finalize),e()},t,r,n)})}}),Fe&&(Fe.allSettled&&fe(K,"allSettled",function(){var e=we.apply(null,arguments).map(Gt);return new K(function(t){e.length===0&&t([]);var r=e.length,n=new Array(r);e.forEach(function(o,a){return K.resolve(o).then(function(s){return n[a]={status:"fulfilled",value:s}},function(s){return n[a]={status:"rejected",reason:s}}).then(function(){return--r||t(n)})})})}),Fe.any&&typeof AggregateError<"u"&&fe(K,"any",function(){var e=we.apply(null,arguments).map(Gt);return new K(function(t,r){e.length===0&&r(new AggregateError([]));var n=e.length,o=new Array(n);e.forEach(function(a,s){return K.resolve(a).then(function(c){return t(c)},function(c){o[s]=c,--n||r(new AggregateError(o))})})})}),Fe.withResolvers&&(K.withResolvers=Fe.withResolvers));function Yn(e,t){try{t(function(r){if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ze();r&&typeof r.then=="function"?Yn(e,function(o,a){r instanceof K?r._then(o,a):r.then(o,a)}):(e._state=!0,e._value=r,Qn(e)),n&&et()}},Ur.bind(null,e))}catch(r){Ur(e,r)}}function Ur(e,t){if($t.push(t),e._state===null){var r=e._lib&&Ze();t=Lr(t),e._state=!1,e._value=t,xa(e),Qn(e),r&&et()}}function Qn(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Br(e,t[r]);var o=e._PSD;--o.ref||o.finalize(),Ve===0&&(++Ve,ft(function(){--Ve===0&&Fr()},[]))}function Br(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ve,ft(ba,[r,e,t])}function ba(e,t,r){try{var n,o=t._value;!t._state&&$t.length&&($t=[]),n=de&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),!t._state&&$t.indexOf(o)===-1&&Ra(t),r.resolve(n)}catch(a){r.reject(a)}finally{--Ve===0&&Fr(),--r.psd.ref||r.psd.finalize()}}function _a(){qe(Ce,function(){Ze()&&et()})}function Ze(){var e=Kr;return Kr=!1,Ft=!1,e}function et(){var e,t,r;do for(;ht.length>0;)for(e=ht,ht=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(ht.length>0);Kr=!0,Ft=!0}function Fr(){var e=$e;$e=[],e.forEach(function(n){n._PSD.onunhandled.call(null,n._value,n)});for(var t=Vt.slice(0),r=t.length;r;)t[--r]()}function Ea(e){function t(){e(),Vt.splice(Vt.indexOf(t),1)}Vt.push(t),++Ve,ft(function(){--Ve===0&&Fr()},[])}function xa(e){$e.some(function(t){return t._value===e._value})||$e.push(e)}function Ra(e){for(var t=$e.length;t;)if($e[--t]._value===e._value){$e.splice(t,1);return}}function qt(e){return new K(lt,!1,e)}function Q(e,t){var r=U;return function(){var n=Ze(),o=U;try{return Te(r,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Te(o,!1),n&&et()}}}var te={awaits:0,echoes:0,id:0},Na=0,jt=[],Wt=0,Ht=0,Ca=0;function ke(e,t,r,n){var o=U,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++Ca,Ce.env,a.env=Ir?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},t&&O(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=qe(a,e,r,n);return a.ref===0&&a.finalize(),s}function tt(){return te.id||(te.id=++Na),++te.awaits,te.echoes+=Wn,te.id}function De(){return te.awaits?(--te.awaits===0&&(te.id=0),te.echoes=te.awaits*Wn,!0):!1}(""+va).indexOf("[native code]")===-1&&(tt=De=Y);function Gt(e){return te.echoes&&e&&e.constructor===Fe?(tt(),e.then(function(t){return De(),t},function(t){return De(),Z(t)})):e}function ka(e){++Ht,(!te.echoes||--te.echoes===0)&&(te.echoes=te.awaits=te.id=0),jt.push(U),Te(e,!0)}function Da(){var e=jt[jt.length-1];jt.pop(),Te(e,!1)}function Te(e,t){var r=U;if((t?te.echoes&&(!Wt++||e!==U):Wt&&(!--Wt||e!==U))&&queueMicrotask(t?ka.bind(null,e):Da),e!==U&&(U=e,r===Ce&&(Ce.env=Xn()),Ir)){var n=Ce.env.Promise,o=e.env;(r.global||e.global)&&(Object.defineProperty(y,"Promise",o.PromiseProp),n.all=o.all,n.race=o.race,n.resolve=o.resolve,n.reject=o.reject,o.allSettled&&(n.allSettled=o.allSettled),o.any&&(n.any=o.any))}}function Xn(){var e=y.Promise;return Ir?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function qe(e,t,r,n,o){var a=U;try{return Te(e,!0),t(r,n,o)}finally{Te(a,!1)}}function Jn(e,t,r,n){return typeof e!="function"?e:function(){var o=U;r&&tt(),Te(t,!0);try{return e.apply(this,arguments)}finally{Te(o,!1),n&&queueMicrotask(De)}}}function $r(e){Promise===Fe&&te.echoes===0?Wt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var Z=K.reject;function Vr(e,t,r,n){if(!e.idbdb||!e._state.openComplete&&!U.letThrough&&!e._vip){if(e._state.openComplete)return Z(new F.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Z(new F.DatabaseClosed);e.open().catch(Y)}return e._state.dbReadyPromise.then(function(){return Vr(e,t,r,n)})}else{var o=e._createTransaction(t,r,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Or.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Vr(e,t,r,n)})):Z(a)}return o._promise(t,function(a,s){return ke(function(){return U.trans=o,n(a,s,o)})}).then(function(a){if(t==="readwrite")try{o.idbtrans.commit()}catch{}return t==="readonly"?a:o._completion.then(function(){return a})})}}var Zn="4.2.1",je="\uFFFF",qr=-1/0,be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eo="String expected.",rt=[],zt="__dbnames",jr="readonly",Wr="readwrite";function We(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var to={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Me(t),delete t[e]),t}:function(t){return t}}function ro(){throw F.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function G(e,t){try{var r=no(e),n=no(t);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Sa(oo(e),oo(t));case"Array":return Ta(e,t)}}catch{}return NaN}function Ta(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,a=0;a<o;++a){var s=G(e[a],t[a]);if(s!==0)return s}return r===n?0:r<n?-1:1}function Sa(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return r===n?0:r<n?-1:1}function no(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=kr(e);return r==="ArrayBuffer"?"binary":r}function oo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Qt(e,t,r){var n=e.schema.yProps;return n?(t&&r.numFailures>0&&(t=t.filter(function(o,a){return!r.failures[a]})),Promise.all(n.map(function(o){var a=o.updatesTable;return t?e.db.table(a).where("k").anyOf(t).delete():e.db.table(a).clear()})).then(function(){return r})):r}var pt=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var r,n=this["@@propmod"];if(n.add!==void 0){var o=n.add;if(E(o))return p(p([],E(t)?t:[],!0),o,!0).sort();if(typeof o=="number")return(Number(t)||0)+o;if(typeof o=="bigint")try{return BigInt(t)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(n.remove!==void 0){var a=n.remove;if(E(a))return E(t)?t.filter(function(c){return!a.includes(c)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var s=(r=n.replacePrefix)===null||r===void 0?void 0:r[0];return s&&typeof t=="string"&&t.startsWith(s)?n.replacePrefix[1]+t.substring(s.length):t},e})();function ao(e,t){for(var r=b(t),n=r.length,o=!1,a=0;a<n;++a){var s=r[a],c=t[s],l=ve(e,s);c instanceof pt?(ae(e,s,c.execute(l)),o=!0):l!==c&&(ae(e,s,c),o=!0)}return o}var io=(function(){function e(){}return e.prototype._trans=function(t,r,n){var o=this._tx||U.trans,a=this.name,s=de&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function c(g,d,R){if(!R.schema[a])throw new F.NotFound("Table "+a+" not part of transaction");return r(R.idbtrans,R)}var l=Ze();try{var h=o&&o.db._novip===this.db._novip?o===U.trans?o._promise(t,c,n):ke(function(){return o._promise(t,c,n)},{trans:o,transless:U.transless||U}):Vr(this.db,t,[this.name],c);return s&&(h._consoleTask=s,h=h.catch(function(g){return console.trace(g),Z(g)})),h}finally{l&&et()}},e.prototype.get=function(t,r){var n=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?Z(new F.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return n.core.get({trans:o,key:t}).then(function(a){return n.hook.reading.fire(a)})}).then(r)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(E(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=b(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(g){if(g.compound&&r.every(function(R){return g.keyPath.indexOf(R)>=0})){for(var d=0;d<r.length;++d)if(r.indexOf(g.keyPath[d])===-1)return!1;return!0}return!1}).sort(function(g,d){return g.keyPath.length-d.keyPath.length})[0];if(n&&this.db._maxKey!==je){var o=n.keyPath.slice(0,r.length);return this.where(o).equals(o.map(function(g){return t[g]}))}!n&&de&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName;function s(g,d){return G(g,d)===0}var c=r.reduce(function(g,d){var R=g[0],S=g[1],m=a[d],w=t[d];return[R||m,R||!m?We(S,m&&m.multi?function(x){var N=ve(x,d);return E(N)&&N.some(function(k){return s(w,k)})}:function(x){return s(w,ve(x,d))}):S]},[null,null]),l=c[0],h=c[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(h):n?this.filter(h):this.where(r).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,E(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var r=this,n=r.db,o=r.name;this.schema.mappedClass=t,t.prototype instanceof ro&&(t=(function(l){i(h,l);function h(){return l!==null&&l.apply(this,arguments)||this}return Object.defineProperty(h.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),h.prototype.table=function(){return o},h})(t));for(var a=new Set,s=t.prototype;s;s=$(s))Object.getOwnPropertyNames(s).forEach(function(l){return a.add(l)});var c=function(l){if(!l)return l;var h=Object.create(t.prototype);for(var g in l)if(!a.has(g))try{h[g]=l[g]}catch{}return h};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},e.prototype.defineClass=function(){function t(r){O(this,r)}return this.mapToClass(t)},e.prototype.add=function(t,r){var n=this,o=this.schema.primKey,a=o.auto,s=o.keyPath,c=t;return s&&a&&(c=Yt(s)(t)),this._trans("readwrite",function(l){return n.core.mutate({trans:l,type:"add",keys:r!=null?[r]:null,values:[c]})}).then(function(l){return l.numFailures?K.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{ae(t,s,l)}catch{}return l})},e.prototype.upsert=function(t,r){var n=this,o=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return n.core.get({trans:a,key:t}).then(function(s){var c=s??{};return ao(c,r),o&&ae(c,o,t),n.core.mutate({trans:a,type:"put",values:[c],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[r]}}).then(function(l){return l.numFailures?K.reject(l.failures[0]):!!s})})})},e.prototype.update=function(t,r){if(typeof t=="object"&&!E(t)){var n=ve(t,this.schema.primKey.keyPath);return n===void 0?Z(new F.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(r)}else return this.where(":id").equals(t).modify(r)},e.prototype.put=function(t,r){var n=this,o=this.schema.primKey,a=o.auto,s=o.keyPath,c=t;return s&&a&&(c=Yt(s)(t)),this._trans("readwrite",function(l){return n.core.mutate({trans:l,type:"put",values:[c],keys:r!=null?[r]:null})}).then(function(l){return l.numFailures?K.reject(l.failures[0]):l.lastResult}).then(function(l){if(s)try{ae(t,s,l)}catch{}return l})},e.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(n){return r.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(o){return Qt(r,[t],o)}).then(function(o){return o.numFailures?K.reject(o.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:to}).then(function(n){return Qt(t,null,n)})}).then(function(r){return r.numFailures?K.reject(r.failures[0]):void 0})},e.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(n){return r.core.getMany({keys:t,trans:n}).then(function(o){return o.map(function(a){return r.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,r,n){var o=this,a=Array.isArray(r)?r:void 0;n=n||(a?void 0:r);var s=n?n.allKeys:void 0;return this._trans("readwrite",function(c){var l=o.schema.primKey,h=l.auto,g=l.keyPath;if(g&&a)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,R=g&&h?t.map(Yt(g)):t;return o.core.mutate({trans:c,type:"add",keys:a,values:R,wantResults:s}).then(function(S){var m=S.numFailures,w=S.results,x=S.lastResult,N=S.failures,k=s?w:x;if(m===0)return k;throw new Je("".concat(o.name,".bulkAdd(): ").concat(m," of ").concat(d," operations failed"),N)})})},e.prototype.bulkPut=function(t,r,n){var o=this,a=Array.isArray(r)?r:void 0;n=n||(a?void 0:r);var s=n?n.allKeys:void 0;return this._trans("readwrite",function(c){var l=o.schema.primKey,h=l.auto,g=l.keyPath;if(g&&a)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,R=g&&h?t.map(Yt(g)):t;return o.core.mutate({trans:c,type:"put",keys:a,values:R,wantResults:s}).then(function(S){var m=S.numFailures,w=S.results,x=S.lastResult,N=S.failures,k=s?w:x;if(m===0)return k;throw new Je("".concat(o.name,".bulkPut(): ").concat(m," of ").concat(d," operations failed"),N)})})},e.prototype.bulkUpdate=function(t){var r=this,n=this.core,o=t.map(function(c){return c.key}),a=t.map(function(c){return c.changes}),s=[];return this._trans("readwrite",function(c){return n.getMany({trans:c,keys:o,cache:"clone"}).then(function(l){var h=[],g=[];t.forEach(function(R,S){var m=R.key,w=R.changes,x=l[S];if(x){for(var N=0,k=Object.keys(w);N<k.length;N++){var D=k[N],T=w[D];if(D===r.schema.primKey.keyPath){if(G(T,m)!==0)throw new F.Constraint("Cannot update primary key in bulkUpdate()")}else ae(x,D,T)}s.push(S),h.push(m),g.push(x)}});var d=h.length;return n.mutate({trans:c,type:"put",keys:h,values:g,updates:{keys:o,changeSpecs:a}}).then(function(R){var S=R.numFailures,m=R.failures;if(S===0)return d;for(var w=0,x=Object.keys(m);w<x.length;w++){var N=x[w],k=s[Number(N)];if(k!=null){var D=m[N];delete m[N],m[k]=D}}throw new Je("".concat(r.name,".bulkUpdate(): ").concat(S," of ").concat(d," operations failed"),m)})})})},e.prototype.bulkDelete=function(t){var r=this,n=t.length;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"delete",keys:t}).then(function(a){return Qt(r,t,a)})}).then(function(o){var a=o.numFailures,s=o.lastResult,c=o.failures;if(a===0)return s;throw new Je("".concat(r.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),c)})},e})();function dt(e){var t={},r=function(c,l){if(l){for(var h=arguments.length,g=new Array(h-1);--h;)g[h-1]=arguments[h];return t[c].subscribe.apply(null,g),e}else if(typeof c=="string")return t[c]};r.addEventType=a;for(var n=1,o=arguments.length;n<o;++n)a(arguments[n]);return r;function a(c,l,h){if(typeof c=="object")return s(c);l||(l=ga),h||(h=Y);var g={subscribers:[],fire:h,subscribe:function(d){g.subscribers.indexOf(d)===-1&&(g.subscribers.push(d),g.fire=l(g.fire,d))},unsubscribe:function(d){g.subscribers=g.subscribers.filter(function(R){return R!==d}),g.fire=g.subscribers.reduce(l,h)}};return t[c]=r[c]=g,g}function s(c){b(c).forEach(function(l){var h=c[l];if(E(h))a(l,c[l][0],c[l][1]);else if(h==="asap")var g=a(l,ct,function(){for(var R=arguments.length,S=new Array(R);R--;)S[R]=arguments[R];g.subscribers.forEach(function(m){Ln(function(){m.apply(null,S)})})});else throw new F.InvalidArgument("Invalid event config")})}}function mt(e,t){return Ye(t).from({prototype:e}),t}function Oa(e){return mt(io.prototype,function(r,n,o){this.db=e,this._tx=o,this.name=r,this.schema=n,this.hook=e._allTables[r]?e._allTables[r].hook:dt(null,{creating:[pa,Y],reading:[ha,ct],updating:[ma,Y],deleting:[da,Y]})})}function nt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Hr(e,t){e.filter=We(e.filter,t)}function Gr(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return We(n(),t())}:t,e.justLimit=r&&!n}function Aa(e,t){e.isMatch=We(e.isMatch,t)}function Xt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new F.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function so(e,t,r){var n=Xt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Jt(e,t,r,n){var o=e.replayFilter?We(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},s=function(c,l,h){if(!o||o(l,h,function(R){return l.stop(R)},function(R){return l.fail(R)})){var g=l.primaryKey,d=""+g;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(g)),X(a,d)||(a[d]=!0,t(c,l,h))}};return Promise.all([e.or._iterate(s,r),uo(so(e,n,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}else return uo(so(e,n,r),We(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function uo(e,t,r,n){var o=n?function(s,c,l){return r(n(s),c,l)}:r,a=Q(o);return e.then(function(s){if(s)return s.start(function(){var c=function(){return s.continue()};(!t||t(s,function(l){return c=l},function(l){s.stop(l),c=Y},function(l){s.fail(l),c=Y}))&&a(s.value,s,function(l){return c=l}),c()})})}var Pa=(function(){function e(){}return e.prototype._read=function(t,r){var n=this._ctx;return n.error?n.table._trans(null,Z.bind(null,n.error)):n.table._trans("readonly",t).then(r)},e.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,Z.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=We(r.algorithm,t)},e.prototype._iterate=function(t,r){return Jt(this._ctx,t,r,this._ctx.table.core)},e.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&O(n,t),r._ctx=n,r},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var r=this._ctx;return this._read(function(n){return Jt(r,t,n,r.table.core)})},e.prototype.count=function(t){var r=this;return this._read(function(n){var o=r._ctx,a=o.table.core;if(nt(o,!0))return a.count({trans:n,query:{index:Xt(o,a.schema),range:o.range}}).then(function(c){return Math.min(c,o.limit)});var s=0;return Jt(o,function(){return++s,!1},n,a).then(function(){return s})}).then(t)},e.prototype.sortBy=function(t,r){var n=t.split(".").reverse(),o=n[0],a=n.length-1;function s(h,g){return g?s(h[n[g]],g-1):h[o]}var c=this._ctx.dir==="next"?1:-1;function l(h,g){var d=s(h,a),R=s(g,a);return G(d,R)*c}return this.toArray(function(h){return h.sort(l)}).then(r)},e.prototype.toArray=function(t){var r=this;return this._read(function(n){var o=r._ctx;if(o.dir==="next"&&nt(o,!0)&&o.limit>0){var a=o.valueMapper,s=Xt(o,o.table.core.schema);return o.table.core.query({trans:n,limit:o.limit,values:!0,query:{index:s,range:o.range}}).then(function(l){var h=l.result;return a?h.map(a):h})}else{var c=[];return Jt(o,function(l){return c.push(l)},n,o.table.core).then(function(){return c})}},t)},e.prototype.offset=function(t){var r=this._ctx;return t<=0?this:(r.offset+=t,nt(r)?Gr(r,function(){var n=t;return function(o,a){return n===0?!0:n===1?(--n,!1):(a(function(){o.advance(n),n=0}),!1)}}):Gr(r,function(){var n=t;return function(){return--n<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Gr(this._ctx,function(){var r=t;return function(n,o,a){return--r<=0&&o(a),r>=0}},!0),this},e.prototype.until=function(t,r){return Hr(this._ctx,function(n,o,a){return t(n.value)?(o(a),r):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Hr(this._ctx,function(r){return t(r.value)}),Aa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,o){t(o.key,o)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,o){t(o.primaryKey,o)})},e.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(o,a){n.push(a.key)}).then(function(){return n}).then(t)},e.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&nt(r,!0)&&r.limit>0)return this._read(function(o){var a=Xt(r,r.table.core.schema);return r.table.core.query({trans:o,values:!1,limit:r.limit,query:{index:a,range:r.range}})}).then(function(o){var a=o.result;return a}).then(t);r.keysOnly=!r.isMatch;var n=[];return this.each(function(o,a){n.push(a.primaryKey)}).then(function(){return n}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return Hr(this._ctx,function(o){var a=o.primaryKey.toString(),s=X(n,a);return n[a]=!0,!s}),this},e.prototype.modify=function(t){var r=this,n=this._ctx;return this._write(function(o){var a;typeof t=="function"?a=t:a=function(N){return ao(N,t)};var s=n.table.core,c=s.schema.primaryKey,l=c.outbound,h=c.extractKey,g=200,d=r.db._options.modifyChunkSize;d&&(typeof d=="object"?g=d[s.name]||d["*"]||200:g=d);var R=[],S=0,m=[],w=function(N,k){var D=k.failures,T=k.numFailures;S+=N-T;for(var C=0,P=b(D);C<P.length;C++){var L=P[C];R.push(D[L])}},x=t===co;return r.clone().primaryKeys().then(function(N){var k=nt(n)&&n.limit===1/0&&(typeof t!="function"||x)&&{index:n.index,range:n.range},D=function(T){var C=Math.min(g,N.length-T),P=N.slice(T,T+C);return(x?Promise.resolve([]):s.getMany({trans:o,keys:P,cache:"immutable"})).then(function(L){var I=[],V=[],W=l?[]:null,M=x?P:[];if(!x)for(var j=0;j<C;++j){var q=L[j],z={value:Me(q),primKey:N[T+j]};a.call(z,z.value,z)!==!1&&(z.value==null?M.push(N[T+j]):!l&&G(h(q),h(z.value))!==0?(M.push(N[T+j]),I.push(z.value)):(V.push(z.value),l&&W.push(N[T+j])))}return Promise.resolve(I.length>0&&s.mutate({trans:o,type:"add",values:I}).then(function(B){for(var J in B.failures)M.splice(parseInt(J),1);w(I.length,B)})).then(function(){return(V.length>0||k&&typeof t=="object")&&s.mutate({trans:o,type:"put",keys:W,values:V,criteria:k,changeSpec:typeof t!="function"&&t,isAdditionalChunk:T>0}).then(function(B){return w(V.length,B)})}).then(function(){return(M.length>0||k&&x)&&s.mutate({trans:o,type:"delete",keys:M,criteria:k,isAdditionalChunk:T>0}).then(function(B){return Qt(n.table,M,B)}).then(function(B){return w(M.length,B)})}).then(function(){return N.length>T+C&&D(T+g)})})};return D(0).then(function(){if(R.length>0)throw new Ut("Error modifying one or more objects",R,S,m);return N.length})})})},e.prototype.delete=function(){var t=this._ctx,r=t.range;return nt(t)&&!t.table.schema.yProps&&(t.isPrimKey||r.type===3)?this._write(function(n){var o=t.table.core.schema.primaryKey,a=r;return t.table.core.count({trans:n,query:{index:o,range:a}}).then(function(s){return t.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(c){var l=c.failures,h=c.numFailures;if(h)throw new Ut("Could not delete some values",Object.keys(l).map(function(g){return l[g]}),s-h);return s-h})})}):this.modify(co)},e})(),co=function(e,t){return t.value=null};function Ia(e){return mt(Pa.prototype,function(r,n){this.db=e;var o=to,a=null;if(n)try{o=n()}catch(h){a=h}var s=r._ctx,c=s.table,l=c.hook.reading.fire;this._ctx={table:c,index:s.index,isPrimKey:!s.index||c.schema.primKey.keyPath&&s.index===c.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:s.or,valueMapper:l!==ct?l:null}})}function Ka(e,t){return e<t?-1:e===t?0:1}function La(e,t){return e>t?-1:e===t?0:1}function ue(e,t,r){var n=e instanceof fo?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function ot(e){return new e.Collection(e,function(){return lo("")}).limit(0)}function Ma(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ua(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ba(e,t,r,n,o,a){for(var s=Math.min(e.length,n.length),c=-1,l=0;l<s;++l){var h=t[l];if(h!==n[l])return o(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):o(e[l],n[l])<0?e.substr(0,l)+n[l]+r.substr(l+1):c>=0?e.substr(0,c)+t[c]+r.substr(c+1):null;o(e[l],h)<0&&(c=l)}return s<n.length&&a==="next"?e+r.substr(e.length):s<e.length&&a==="prev"?e.substr(0,r.length):c<0?null:e.substr(0,c)+n[c]+r.substr(c+1)}function Zt(e,t,r,n){var o,a,s,c,l,h,g,d=r.length;if(!r.every(function(w){return typeof w=="string"}))return ue(e,eo);function R(w){o=Ma(w),a=Ua(w),s=w==="next"?Ka:La;var x=r.map(function(N){return{lower:a(N),upper:o(N)}}).sort(function(N,k){return s(N.lower,k.lower)});c=x.map(function(N){return N.upper}),l=x.map(function(N){return N.lower}),h=w,g=w==="next"?"":n}R("next");var S=new e.Collection(e,function(){return Se(c[0],l[d-1]+n)});S._ondirectionchange=function(w){R(w)};var m=0;return S._addAlgorithm(function(w,x,N){var k=w.key;if(typeof k!="string")return!1;var D=a(k);if(t(D,l,m))return!0;for(var T=null,C=m;C<d;++C){var P=Ba(k,D,c[C],l[C],s,h);P===null&&T===null?m=C+1:(T===null||s(T,P)>0)&&(T=P)}return x(T!==null?function(){w.continue(T+g)}:N),!1}),S}function Se(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function lo(e){return{type:1,lower:e,upper:e}}var fo=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,r,n,o){n=n!==!1,o=o===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(n||o)&&!(n&&o)?ot(this):new this.Collection(this,function(){return Se(t,r,!n,!o)})}catch{return ue(this,be)}},e.prototype.equals=function(t){return t==null?ue(this,be):new this.Collection(this,function(){return lo(t)})},e.prototype.above=function(t){return t==null?ue(this,be):new this.Collection(this,function(){return Se(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ue(this,be):new this.Collection(this,function(){return Se(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ue(this,be):new this.Collection(this,function(){return Se(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ue(this,be):new this.Collection(this,function(){return Se(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ue(this,eo):this.between(t,t+je,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Zt(this,function(r,n){return r.indexOf(n[0])===0},[t],je)},e.prototype.equalsIgnoreCase=function(t){return Zt(this,function(r,n){return r===n[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=we.apply(Qe,arguments);return t.length===0?ot(this):Zt(this,function(r,n){return n.indexOf(r)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=we.apply(Qe,arguments);return t.length===0?ot(this):Zt(this,function(r,n){return n.some(function(o){return r.indexOf(o)===0})},t,je)},e.prototype.anyOf=function(){var t=this,r=we.apply(Qe,arguments),n=this._cmp;try{r.sort(n)}catch{return ue(this,be)}if(r.length===0)return ot(this);var o=new this.Collection(this,function(){return Se(r[0],r[r.length-1])});o._ondirectionchange=function(s){n=s==="next"?t._ascending:t._descending,r.sort(n)};var a=0;return o._addAlgorithm(function(s,c,l){for(var h=s.key;n(h,r[a])>0;)if(++a,a===r.length)return c(l),!1;return n(h,r[a])===0?!0:(c(function(){s.continue(r[a])}),!1)}),o},e.prototype.notEqual=function(t){return this.inAnyRange([[qr,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=we.apply(Qe,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ue(this,be)}var r=t.reduce(function(n,o){return n?n.concat([[n[n.length-1][1],o]]):[[qr,o]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,r){var n=this,o=this._cmp,a=this._ascending,s=this._descending,c=this._min,l=this._max;if(t.length===0)return ot(this);if(!t.every(function(C){return C[0]!==void 0&&C[1]!==void 0&&a(C[0],C[1])<=0}))return ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var h=!r||r.includeLowers!==!1,g=r&&r.includeUppers===!0;function d(C,P){for(var L=0,I=C.length;L<I;++L){var V=C[L];if(o(P[0],V[1])<0&&o(P[1],V[0])>0){V[0]=c(V[0],P[0]),V[1]=l(V[1],P[1]);break}}return L===I&&C.push(P),C}var R=a;function S(C,P){return R(C[0],P[0])}var m;try{m=t.reduce(d,[]),m.sort(S)}catch{return ue(this,be)}var w=0,x=g?function(C){return a(C,m[w][1])>0}:function(C){return a(C,m[w][1])>=0},N=h?function(C){return s(C,m[w][0])>0}:function(C){return s(C,m[w][0])>=0};function k(C){return!x(C)&&!N(C)}var D=x,T=new this.Collection(this,function(){return Se(m[0][0],m[m.length-1][1],!h,!g)});return T._ondirectionchange=function(C){C==="next"?(D=x,R=a):(D=N,R=s),m.sort(S)},T._addAlgorithm(function(C,P,L){for(var I=C.key;D(I);)if(++w,w===m.length)return P(L),!1;return k(I)?!0:(n._cmp(I,m[w][1])===0||n._cmp(I,m[w][0])===0||P(function(){R===a?C.continue(m[w][0]):C.continue(m[w][1])}),!1)}),T},e.prototype.startsWithAnyOf=function(){var t=we.apply(Qe,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?ot(this):this.inAnyRange(t.map(function(r){return[r,r+je]})):ue(this,"startsWithAnyOf() only works with strings")},e})();function Fa(e){return mt(fo.prototype,function(r,n,o){if(this.db=e,this._ctx={table:r,index:n===":id"?null:n,or:o},this._cmp=this._ascending=G,this._descending=function(a,s){return G(s,a)},this._max=function(a,s){return G(a,s)>0?a:s},this._min=function(a,s){return G(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new F.MissingAPI})}function me(e){return Q(function(t){return gt(t),e(t.target.error),!1})}function gt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yt="storagemutated",zr="x-storagemutated-1",Oe=dt(null,yt),$a=(function(){function e(){}return e.prototype._lock=function(){return st(!U.global),++this._reculock,this._reculock===1&&!U.global&&(U.lockOwnerFor=this),this},e.prototype._unlock=function(){if(st(!U.global),--this._reculock===0)for(U.global||(U.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&U.lockOwnerFor!==this},e.prototype.create=function(t){var r=this;if(!this.mode)return this;var n=this.db.idbdb,o=this.db._state.dbOpenError;if(st(!this.idbtrans),!t&&!n)switch(o&&o.name){case"DatabaseClosedError":throw new F.DatabaseClosed(o);case"MissingAPIError":throw new F.MissingAPI(o.message,o);default:throw new F.OpenFailed(o)}if(!this.active)throw new F.TransactionInactive;return st(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=Q(function(a){gt(a),r._reject(t.error)}),t.onabort=Q(function(a){gt(a),r.active&&r._reject(new F.Abort(t.error)),r.active=!1,r.on("abort").fire(a)}),t.oncomplete=Q(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&Oe.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,r,n){var o=this;if(t==="readwrite"&&this.mode!=="readwrite")return Z(new F.ReadOnly("Transaction is readonly"));if(!this.active)return Z(new F.TransactionInactive);if(this._locked())return new K(function(s,c){o._blockedFuncs.push([function(){o._promise(t,r,n).then(s,c)},U])});if(n)return ke(function(){var s=new K(function(c,l){o._lock();var h=r(c,l,o);h&&h.then&&h.then(c,l)});return s.finally(function(){return o._unlock()}),s._lib=!0,s});var a=new K(function(s,c){var l=r(s,c,o);l&&l.then&&l.then(s,c)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var r=this._root(),n=K.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return n});else{r._waitingFor=n,r._waitingQueue=[];var o=r.idbtrans.objectStore(r.storeNames[0]);(function s(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(o.get(-1/0).onsuccess=s)})()}var a=r._waitingFor;return new K(function(s,c){n.then(function(l){return r._waitingQueue.push(Q(s.bind(null,l)))},function(l){return r._waitingQueue.push(Q(c.bind(null,l)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort))},e.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(X(r,t))return r[t];var n=this.schema[t];if(!n)throw new F.NotFound("Table "+t+" not part of transaction");var o=new this.db.Table(t,n,this);return o.core=this.db.core.table(t),r[t]=o,o},e})();function Va(e){return mt($a.prototype,function(r,n,o,a,s){var c=this;r!=="readonly"&&n.forEach(function(l){var h,g=(h=o[l])===null||h===void 0?void 0:h.yProps;g&&(n=n.concat(g.map(function(d){return d.updatesTable})))}),this.db=e,this.mode=r,this.storeNames=n,this.schema=o,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=dt(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(l,h){c._resolve=l,c._reject=h}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(l){var h=c.active;return c.active=!1,c.on.error.fire(l),c.parent?c.parent._reject(l):h&&c.idbtrans&&c.idbtrans.abort(),Z(l)})})}function Yr(e,t,r,n,o,a,s,c){return{name:e,keyPath:t,unique:r,multi:n,auto:o,compound:a,src:(r&&!s?"&":"")+(n?"*":"")+(o?"++":"")+ho(t),type:c}}function ho(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Qr(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:ta(r,function(n){return[n.name,n]})}}function qa(e){return e.length===1?e[0]:e}var vt=function(e){try{return e.only([[]]),vt=function(){return[[]]},[[]]}catch{return vt=function(){return je},je}};function Xr(e){return e==null?function(){}:typeof e=="string"?ja(e):function(t){return ve(t,e)}}function ja(e){var t=e.split(".");return t.length===1?function(r){return r[e]}:function(r){return ve(r,e)}}function po(e){return[].slice.call(e)}var Wa=0;function wt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Ha(e,t,r){function n(d,R){var S=po(d.objectStoreNames);return{schema:{name:d.name,tables:S.map(function(m){return R.objectStore(m)}).map(function(m){var w=m.keyPath,x=m.autoIncrement,N=E(w),k=w==null,D={},T={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:k,compound:N,keyPath:w,autoIncrement:x,unique:!0,extractKey:Xr(w)},indexes:po(m.indexNames).map(function(C){return m.index(C)}).map(function(C){var P=C.name,L=C.unique,I=C.multiEntry,V=C.keyPath,W=E(V),M={name:P,compound:W,keyPath:V,unique:L,multiEntry:I,extractKey:Xr(V)};return D[wt(V)]=M,M}),getIndexByKeyPath:function(C){return D[wt(C)]}};return D[":id"]=T.primaryKey,w!=null&&(D[wt(w)]=T.primaryKey),T})},hasGetAll:S.length>0&&"getAll"in R.objectStore(S[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=d.lower,S=d.upper,m=d.lowerOpen,w=d.upperOpen,x=R===void 0?S===void 0?null:t.upperBound(S,!!w):S===void 0?t.lowerBound(R,!!m):t.bound(R,S,!!m,!!w);return x}function a(d){var R=d.name;function S(x){var N=x.trans,k=x.type,D=x.keys,T=x.values,C=x.range;return new Promise(function(P,L){P=Q(P);var I=N.objectStore(R),V=I.keyPath==null,W=k==="put"||k==="add";if(!W&&k!=="delete"&&k!=="deleteRange")throw new Error("Invalid operation type: "+k);var M=(D||T||{length:1}).length;if(D&&T&&D.length!==T.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});var j,q=[],z=[],B=0,J=function(ye){++B,gt(ye)};if(k==="deleteRange"){if(C.type===4)return P({numFailures:B,failures:z,results:[],lastResult:void 0});C.type===3?q.push(j=I.clear()):q.push(j=I.delete(o(C)))}else{var oe=W?V?[T,D]:[T,null]:[D,null],ge=oe[0],ie=oe[1];if(W)for(var ce=0;ce<M;++ce)q.push(j=ie&&ie[ce]!==void 0?I[k](ge[ce],ie[ce]):I[k](ge[ce])),j.onerror=J;else for(var ce=0;ce<M;++ce)q.push(j=I[k](ge[ce])),j.onerror=J}var Ie=function(ye){var Et=ye.target.result;q.forEach(function(he,fr){return he.error!=null&&(z[fr]=he.error)}),P({numFailures:B,failures:z,results:k==="delete"?D:q.map(function(he){return he.result}),lastResult:Et})};j.onerror=function(ye){J(ye),Ie(ye)},j.onsuccess=Ie})}function m(x){var N=x.trans,k=x.values,D=x.query,T=x.reverse,C=x.unique;return new Promise(function(P,L){P=Q(P);var I=D.index,V=D.range,W=N.objectStore(R),M=I.isPrimaryKey?W:W.index(I.name),j=T?C?"prevunique":"prev":C?"nextunique":"next",q=k||!("openKeyCursor"in M)?M.openCursor(o(V),j):M.openKeyCursor(o(V),j);q.onerror=me(L),q.onsuccess=Q(function(z){var B=q.result;if(!B){P(null);return}B.___id=++Wa,B.done=!1;var J=B.continue.bind(B),oe=B.continuePrimaryKey;oe&&(oe=oe.bind(B));var ge=B.advance.bind(B),ie=function(){throw new Error("Cursor not started")},ce=function(){throw new Error("Cursor not stopped")};B.trans=N,B.stop=B.continue=B.continuePrimaryKey=B.advance=ie,B.fail=Q(L),B.next=function(){var Ie=this,ye=1;return this.start(function(){return ye--?Ie.continue():Ie.stop()}).then(function(){return Ie})},B.start=function(Ie){var ye=new Promise(function(he,fr){he=Q(he),q.onerror=me(fr),B.fail=fr,B.stop=function(Pi){B.stop=B.continue=B.continuePrimaryKey=B.advance=ce,he(Pi)}}),Et=function(){if(q.result)try{Ie()}catch(he){B.fail(he)}else B.done=!0,B.start=function(){throw new Error("Cursor behind last entry")},B.stop()};return q.onsuccess=Q(function(he){q.onsuccess=Et,Et()}),B.continue=J,B.continuePrimaryKey=oe,B.advance=ge,Et(),ye},P(B)},L)})}function w(x){return function(N){return new Promise(function(k,D){k=Q(k);var T=N.trans,C=N.values,P=N.limit,L=N.query,I=P===1/0?void 0:P,V=L.index,W=L.range,M=T.objectStore(R),j=V.isPrimaryKey?M:M.index(V.name),q=o(W);if(P===0)return k({result:[]});if(x){var z=C?j.getAll(q,I):j.getAllKeys(q,I);z.onsuccess=function(ge){return k({result:ge.target.result})},z.onerror=me(D)}else{var B=0,J=C||!("openKeyCursor"in j)?j.openCursor(q):j.openKeyCursor(q),oe=[];J.onsuccess=function(ge){var ie=J.result;if(!ie)return k({result:oe});if(oe.push(C?ie.value:ie.primaryKey),++B===P)return k({result:oe});ie.continue()},J.onerror=me(D)}})}}return{name:R,schema:d,mutate:S,getMany:function(x){var N=x.trans,k=x.keys;return new Promise(function(D,T){D=Q(D);for(var C=N.objectStore(R),P=k.length,L=new Array(P),I=0,V=0,W,M=function(B){var J=B.target;(L[J._pos]=J.result)!=null,++V===I&&D(L)},j=me(T),q=0;q<P;++q){var z=k[q];z!=null&&(W=C.get(k[q]),W._pos=q,W.onsuccess=M,W.onerror=j,++I)}I===0&&D(L)})},get:function(x){var N=x.trans,k=x.key;return new Promise(function(D,T){D=Q(D);var C=N.objectStore(R),P=C.get(k);P.onsuccess=function(L){return D(L.target.result)},P.onerror=me(T)})},query:w(l),openCursor:m,count:function(x){var N=x.query,k=x.trans,D=N.index,T=N.range;return new Promise(function(C,P){var L=k.objectStore(R),I=D.isPrimaryKey?L:L.index(D.name),V=o(T),W=V?I.count(V):I.count();W.onsuccess=Q(function(M){return C(M.target.result)}),W.onerror=me(P)})}}}var s=n(e,r),c=s.schema,l=s.hasGetAll,h=c.tables.map(function(d){return a(d)}),g={};return h.forEach(function(d){return g[d.name]=d}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(d){var R=g[d];if(!R)throw new Error("Table '".concat(d,"' not found"));return g[d]},MIN_KEY:-1/0,MAX_KEY:vt(t),schema:c}}function Ga(e,t){return t.reduce(function(r,n){var o=n.create;return u(u({},r),o(r))},e)}function za(e,t,r,n){var o=r.IDBKeyRange;r.indexedDB;var a=Ga(Ha(t,o,n),e.dbcore);return{dbcore:a}}function er(e,t){var r=t.db,n=za(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(function(o){var a=o.name;e.core.schema.tables.some(function(s){return s.name===a})&&(o.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=o.core))})}function tr(e,t,r,n){r.forEach(function(o){var a=n[o];t.forEach(function(s){var c=In(s,o);(!c||"value"in c&&c.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?fe(s,o,{get:function(){return this.table(o)},set:function(l){Ne(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new e.Table(o,a))})})}function Jr(e,t){t.forEach(function(r){for(var n in r)r[n]instanceof e.Table&&delete r[n]})}function Ya(e,t){return e._cfg.version-t._cfg.version}function Qa(e,t,r,n){var o=e._dbSchema;r.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Qr("$meta",go("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(r),a._completion.catch(n);var s=a._reject.bind(a),c=U.transless||U;ke(function(){if(U.trans=a,U.transless=c,t===0)b(o).forEach(function(l){en(r,l,o[l].primKey,o[l].indexes)}),er(e,r),K.follow(function(){return e.on.populate.fire(a)}).catch(s);else return er(e,r),Ja(e,a,t).then(function(l){return Za(e,l,a,r)}).catch(s)})}function Xa(e,t){mo(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=nr(e,e.idbdb,t);or(e,e._dbSchema,t);for(var n=Zr(r,e._dbSchema),o=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var g=t.objectStore(h.name);h.add.forEach(function(d){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(d.src)),rr(g,d)})},a=0,s=n.change;a<s.length;a++){var c=s[a],l=o(c);if(typeof l=="object")return l.value}}function Ja(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(n){return n??r}):K.resolve(r)}function Za(e,t,r,n){var o=[],a=e._versions,s=e._dbSchema=nr(e,e.idbdb,n),c=a.filter(function(h){return h._cfg.version>=t});if(c.length===0)return K.resolve();c.forEach(function(h){o.push(function(){var g=s,d=h._cfg.dbschema;or(e,g,n),or(e,d,n),s=e._dbSchema=d;var R=Zr(g,d);R.add.forEach(function(k){en(n,k[0],k[1].primKey,k[1].indexes)}),R.change.forEach(function(k){if(k.recreate)throw new F.Upgrade("Not yet support for changing primary key");var D=n.objectStore(k.name);k.add.forEach(function(T){return rr(D,T)}),k.change.forEach(function(T){D.deleteIndex(T.name),rr(D,T)}),k.del.forEach(function(T){return D.deleteIndex(T)})});var S=h._cfg.contentUpgrade;if(S&&h._cfg.version>t){er(e,n),r._memoizedTables={};var m=Mn(d);R.del.forEach(function(k){m[k]=g[k]}),Jr(e,[e.Transaction.prototype]),tr(e,[e.Transaction.prototype],b(m),m),r.schema=m;var w=Tr(S);w&&tt();var x,N=K.follow(function(){if(x=S(r),x&&w){var k=De.bind(null,null);x.then(k,k)}});return x&&typeof x.then=="function"?K.resolve(x):N.then(function(){return x})}}),o.push(function(g){var d=h._cfg.dbschema;ei(d,g),Jr(e,[e.Transaction.prototype]),tr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}),o.push(function(g){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===h._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(d){return d!=="$meta"})):g.objectStore("$meta").put(h._cfg.version,"version"))})});function l(){return o.length?K.resolve(o.shift()(r.idbtrans)).then(l):K.resolve()}return l().then(function(){mo(s,n)})}function Zr(e,t){var r={del:[],add:[],change:[]},n;for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],a=t[n];if(!o)r.add.push([n,a]);else{var s={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto)s.recreate=!0,r.change.push(s);else{var c=o.idxByName,l=a.idxByName,h=void 0;for(h in c)l[h]||s.del.push(h);for(h in l){var g=c[h],d=l[h];g?g.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}}return r}function en(e,t,r,n){var o=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(a){return rr(o,a)}),o}function mo(e,t){b(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(de&&console.debug("Dexie: Creating missing table",r),en(t,r,e[r].primKey,e[r].indexes))})}function ei(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(r){return e[r]==null&&t.db.deleteObjectStore(r)})}function rr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function nr(e,t,r){var n={},o=Mt(t.objectStoreNames,0);return o.forEach(function(a){for(var s=r.objectStore(a),c=s.keyPath,l=Yr(ho(c),c||"",!0,!1,!!s.autoIncrement,c&&typeof c!="string",!0),h=[],g=0;g<s.indexNames.length;++g){var d=s.index(s.indexNames[g]);c=d.keyPath;var R=Yr(d.name,c,!!d.unique,!!d.multiEntry,!1,c&&typeof c!="string",!1);h.push(R)}n[a]=Qr(a,l,h)}),n}function ti(e,t,r){e.verno=t.version/10;var n=e._dbSchema=nr(e,t,r);e._storeNames=Mt(t.objectStoreNames,0),tr(e,[e._allTables],b(n),n)}function ri(e,t){var r=nr(e,e.idbdb,t),n=Zr(r,e._dbSchema);return!(n.add.length||n.change.some(function(o){return o.add.length||o.change.length}))}function or(e,t,r){for(var n=r.db.objectStoreNames,o=0;o<n.length;++o){var a=n[o],s=r.objectStore(a);e._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var l=s.indexNames[c],h=s.index(l).keyPath,g=typeof h=="string"?h:"["+Mt(h).join("+")+"]";if(t[a]){var d=t[a].idxByName[g];d&&(d.name=l,delete t[a].idxByName[g],t[a].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function go(e){return e.split(",").map(function(t,r){var n,o=t.split(":"),a=(n=o[1])===null||n===void 0?void 0:n.trim();t=o[0].trim();var s=t.replace(/([&*]|\+\+)/g,""),c=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return Yr(s,c||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),E(c),r===0,a)})}var ni=(function(){function e(){}return e.prototype._createTableSchema=function(t,r,n){return Qr(t,r,n)},e.prototype._parseIndexSyntax=function(t){return go(t)},e.prototype._parseStoresSpec=function(t,r){var n=this;b(t).forEach(function(o){if(t[o]!==null){var a=n._parseIndexSyntax(t[o]),s=a.shift();if(!s)throw new F.Schema("Invalid schema for table "+o+": "+t[o]);if(s.unique=!0,s.multi)throw new F.Schema("Primary key cannot be multiEntry*");a.forEach(function(l){if(l.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")});var c=n._createTableSchema(o,s,a);r[o]=c}})},e.prototype.stores=function(t){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,t):t;var n=r._versions,o={},a={};return n.forEach(function(s){O(o,s._cfg.storesSource),a=s._cfg.dbschema={},s._parseStoresSpec(o,a)}),r._dbSchema=a,Jr(r,[r._allTables,r,r.Transaction.prototype]),tr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],b(a),a),r._storeNames=b(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Ar(this._cfg.contentUpgrade||Y,t),this},e})();function oi(e){return mt(ni.prototype,function(r){this.db=e,this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function tn(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new _e(zt,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function rn(e){return e&&typeof e.databases=="function"}function ai(e){var t=e.indexedDB,r=e.IDBKeyRange;return rn(t)?Promise.resolve(t.databases()).then(function(n){return n.map(function(o){return o.name}).filter(function(o){return o!==zt})}):tn(t,r).toCollection().primaryKeys()}function ii(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!rn(r)&&t!==zt&&tn(r,n).put({name:t}).catch(Y)}function si(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!rn(r)&&t!==zt&&tn(r,n).delete(t).catch(Y)}function nn(e){return ke(function(){return U.letThrough=!0,e()})}function ui(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(r){var n=function(){return indexedDB.databases().finally(r)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)})}var on;function an(e){return!("from"in e)}var ne=function(e,t){if(this)O(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var r=new ne;return e&&"d"in e&&O(r,e),r}};re(ne.prototype,(on={add:function(e){return _t(this,e),this},addKey:function(e){return bt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(r){return bt(t,r,r)}),this},hasKey:function(e){var t=ar(this).next(e).value;return t&&G(t.from,e)<=0&&G(t.to,e)>=0}},on[Dr]=function(){return ar(this)},on));function bt(e,t,r){var n=G(t,r);if(!isNaN(n)){if(n>0)throw RangeError();if(an(e))return O(e,{from:t,to:r,d:1});var o=e.l,a=e.r;if(G(r,e.from)<0)return o?bt(o,t,r):e.l={from:t,to:r,d:1,l:null,r:null},vo(e);if(G(t,e.to)>0)return a?bt(a,t,r):e.r={from:t,to:r,d:1,l:null,r:null},vo(e);G(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),G(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;o&&!e.l&&_t(e,o),a&&s&&_t(e,a)}}function _t(e,t){function r(n,o){var a=o.from,s=o.to,c=o.l,l=o.r;bt(n,a,s),c&&r(n,c),l&&r(n,l)}an(t)||r(e,t)}function yo(e,t){var r=ar(t),n=r.next();if(n.done)return!1;for(var o=n.value,a=ar(e),s=a.next(o.from),c=s.value;!n.done&&!s.done;){if(G(c.from,o.to)<=0&&G(c.to,o.from)>=0)return!0;G(o.from,c.from)<0?o=(n=r.next(c.from)).value:c=(s=a.next(o.from)).value}return!1}function ar(e){var t=an(e)?null:{s:0,n:e};return{next:function(r){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&G(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||G(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function vo(e){var t,r,n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),o=n>1?"r":n<-1?"l":"";if(o){var a=o==="r"?"l":"r",s=u({},e),c=e[o];e.from=c.from,e.to=c.to,e[o]=c[o],s[o]=c[a],e[a]=s,s.d=wo(s)}e.d=wo(e)}function wo(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function ir(e,t){return b(t).forEach(function(r){e[r]?_t(e[r],t[r]):e[r]=Fn(t[r])}),e}function sn(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&yo(t[r],e[r])})}var He={},un={},cn=!1;function sr(e,t){ir(un,e),cn||(cn=!0,setTimeout(function(){cn=!1;var r=un;un={},ln(r,!1)},0))}function ln(e,t){t===void 0&&(t=!1);var r=new Set;if(e.all)for(var n=0,o=Object.values(He);n<o.length;n++){var a=o[n];bo(a,e,r,t)}else for(var s in e){var c=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(c){var l=c[1],h=c[2],a=He["idb://".concat(l,"/").concat(h)];a&&bo(a,e,r,t)}}r.forEach(function(g){return g()})}function bo(e,t,r,n){for(var o=[],a=0,s=Object.entries(e.queries.query);a<s.length;a++){for(var c=s[a],l=c[0],h=c[1],g=[],d=0,R=h;d<R.length;d++){var S=R[d];sn(t,S.obsSet)?S.subscribers.forEach(function(N){return r.add(N)}):n&&g.push(S)}n&&o.push([l,g])}if(n)for(var m=0,w=o;m<w.length;m++){var x=w[m],l=x[0],g=x[1];e.queries.query[l]=g}}function ci(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Z(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,o=Math.round(e.verno*10),a=!1;function s(){if(t.openCanceller!==n)throw new F.DatabaseClosed("db.open() was cancelled")}var c=t.dbReadyResolve,l=null,h=!1,g=function(){return new K(function(d,R){if(s(),!r)throw new F.MissingAPI;var S=e.name,m=t.autoSchema||!o?r.open(S):r.open(S,o);if(!m)throw new F.MissingAPI;m.onerror=me(R),m.onblocked=Q(e._fireOnBlocked),m.onupgradeneeded=Q(function(w){if(l=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=gt,l.abort(),m.result.close();var x=r.deleteDatabase(S);x.onsuccess=x.onerror=Q(function(){R(new F.NoSuchDatabase("Database ".concat(S," doesnt exist")))})}else{l.onerror=me(R);var N=w.oldVersion>Math.pow(2,62)?0:w.oldVersion;h=N<1,e.idbdb=m.result,a&&Xa(e,l),Qa(e,N/10,l,R)}},R),m.onsuccess=Q(function(){l=null;var w=e.idbdb=m.result,x=Mt(w.objectStoreNames);if(x.length>0)try{var N=w.transaction(qa(x),"readonly");if(t.autoSchema)ti(e,w,N);else if(or(e,e._dbSchema,N),!ri(e,N)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),w.close(),o=w.version+1,a=!0,d(g());er(e,N)}catch{}rt.push(e),w.onversionchange=Q(function(k){t.vcFired=!0,e.on("versionchange").fire(k)}),w.onclose=Q(function(){e.close({disableAutoOpen:!1})}),h&&ii(e._deps,S),d()},R)}).catch(function(d){switch(d?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),g();break;case"VersionError":if(o>0)return o=0,g();break}return K.reject(d)})};return K.race([n,(typeof navigator>"u"?K.resolve():ui()).then(g)]).then(function(){return s(),t.onReadyBeingFired=[],K.resolve(nn(function(){return e.on.ready.fire(e.vip)})).then(function d(){if(t.onReadyBeingFired.length>0){var R=t.onReadyBeingFired.reduce(Ar,Y);return t.onReadyBeingFired=[],K.resolve(nn(function(){return R(e.vip)})).then(d)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(d){t.dbOpenError=d;try{l&&l.abort()}catch{}return n===t.openCanceller&&e._close(),Z(d)}).finally(function(){t.openComplete=!0,c()}).then(function(){if(h){var d={};e.tables.forEach(function(R){R.schema.indexes.forEach(function(S){S.name&&(d["idb://".concat(e.name,"/").concat(R.name,"/").concat(S.name)]=new ne(-1/0,[[[]]]))}),d["idb://".concat(e.name,"/").concat(R.name,"/")]=d["idb://".concat(e.name,"/").concat(R.name,"/:dels")]=new ne(-1/0,[[[]]])}),Oe(yt).fire(d),ln(d,!0)}return e})}function fn(e){var t=function(s){return e.next(s)},r=function(s){return e.throw(s)},n=a(t),o=a(r);function a(s){return function(c){var l=s(c),h=l.value;return l.done?h:!h||typeof h.then!="function"?E(h)?Promise.all(h).then(n,o):n(h):h.then(n,o)}}return a(t)()}function li(e,t,r){var n=arguments.length;if(n<2)throw new F.InvalidArgument("Too few arguments");for(var o=new Array(n-1);--n;)o[n-1]=arguments[n];r=o.pop();var a=Un(o);return[e,a,r]}function _o(e,t,r,n,o){return K.resolve().then(function(){var a=U.transless||U,s=e._createTransaction(t,r,e._dbSchema,n);s.explicit=!0;var c={trans:s,transless:a};if(n)s.idbtrans=n.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(d){return d.name===Or.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return _o(e,t,r,null,o)})):Z(d)}var l=Tr(o);l&&tt();var h,g=K.follow(function(){if(h=o.call(s,s),h)if(l){var d=De.bind(null,null);h.then(d,d)}else typeof h.next=="function"&&typeof h.throw=="function"&&(h=fn(h))},c);return(h&&typeof h.then=="function"?K.resolve(h).then(function(d){return s.active?d:Z(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return h})).then(function(d){return n&&s._resolve(),s._completion.then(function(){return d})}).catch(function(d){return s._reject(d),Z(d)})})}function ur(e,t,r){for(var n=E(e)?e.slice():[e],o=0;o<r;++o)n.push(t);return n}function fi(e){return u(u({},e),{table:function(t){var r=e.table(t),n=r.schema,o={},a=[];function s(w,x,N){var k=wt(w),D=o[k]=o[k]||[],T=w==null?0:typeof w=="string"?1:w.length,C=x>0,P=u(u({},N),{name:C?"".concat(k,"(virtual-from:").concat(N.name,")"):N.name,lowLevelIndex:N,isVirtual:C,keyTail:x,keyLength:T,extractKey:Xr(w),unique:!C&&N.unique});if(D.push(P),P.isPrimaryKey||a.push(P),T>1){var L=T===2?w[0]:w.slice(0,T-1);s(L,x+1,N)}return D.sort(function(I,V){return I.keyTail-V.keyTail}),P}var c=s(n.primaryKey.keyPath,0,n.primaryKey);o[":id"]=[c];for(var l=0,h=n.indexes;l<h.length;l++){var g=h[l];s(g.keyPath,0,g)}function d(w){var x=o[wt(w)];return x&&x[0]}function R(w,x){return{type:w.type===1?2:w.type,lower:ur(w.lower,w.lowerOpen?e.MAX_KEY:e.MIN_KEY,x),lowerOpen:!0,upper:ur(w.upper,w.upperOpen?e.MIN_KEY:e.MAX_KEY,x),upperOpen:!0}}function S(w){var x=w.query.index;return x.isVirtual?u(u({},w),{query:{index:x.lowLevelIndex,range:R(w.query.range,x.keyTail)}}):w}var m=u(u({},r),{schema:u(u({},n),{primaryKey:c,indexes:a,getIndexByKeyPath:d}),count:function(w){return r.count(S(w))},query:function(w){return r.query(S(w))},openCursor:function(w){var x=w.query.index,N=x.keyTail,k=x.isVirtual,D=x.keyLength;if(!k)return r.openCursor(w);function T(C){function P(I){I!=null?C.continue(ur(I,w.reverse?e.MAX_KEY:e.MIN_KEY,N)):w.unique?C.continue(C.key.slice(0,D).concat(w.reverse?e.MIN_KEY:e.MAX_KEY,N)):C.continue()}var L=Object.create(C,{continue:{value:P},continuePrimaryKey:{value:function(I,V){C.continuePrimaryKey(ur(I,e.MAX_KEY,N),V)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var I=C.key;return D===1?I[0]:I.slice(0,D)}},value:{get:function(){return C.value}}});return L}return r.openCursor(S(w)).then(function(C){return C&&T(C)})}});return m}})}var hi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:fi};function hn(e,t,r,n){return r=r||{},n=n||"",b(e).forEach(function(o){if(!X(t,o))r[n+o]=void 0;else{var a=e[o],s=t[o];if(typeof a=="object"&&typeof s=="object"&&a&&s){var c=kr(a),l=kr(s);c!==l?r[n+o]=t[o]:c==="Object"?hn(a,s,r,n+o+"."):a!==s&&(r[n+o]=t[o])}else a!==s&&(r[n+o]=t[o])}}),b(t).forEach(function(o){X(e,o)||(r[n+o]=t[o])}),r}function pn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var pi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(t){var r=e.table(t),n=r.schema.primaryKey,o=u(u({},r),{mutate:function(a){var s=U.trans,c=s.table(t).hook,l=c.deleting,h=c.creating,g=c.updating;switch(a.type){case"add":if(h.fire===Y)break;return s._promise("readwrite",function(){return d(a)},!0);case"put":if(h.fire===Y&&g.fire===Y)break;return s._promise("readwrite",function(){return d(a)},!0);case"delete":if(l.fire===Y)break;return s._promise("readwrite",function(){return d(a)},!0);case"deleteRange":if(l.fire===Y)break;return s._promise("readwrite",function(){return R(a)},!0)}return r.mutate(a);function d(m){var w=U.trans,x=m.keys||pn(n,m);if(!x)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?u(u({},m),{keys:x}):u({},m),m.type!=="delete"&&(m.values=p([],m.values,!0)),m.keys&&(m.keys=p([],m.keys,!0)),di(r,m,x).then(function(N){var k=x.map(function(D,T){var C=N[T],P={onerror:null,onsuccess:null};if(m.type==="delete")l.fire.call(P,D,C,w);else if(m.type==="add"||C===void 0){var L=h.fire.call(P,D,m.values[T],w);D==null&&L!=null&&(D=L,m.keys[T]=D,n.outbound||ae(m.values[T],n.keyPath,D))}else{var I=hn(C,m.values[T]),V=g.fire.call(P,I,D,C,w);if(V){var W=m.values[T];Object.keys(V).forEach(function(M){X(W,M)?W[M]=V[M]:ae(W,M,V[M])})}}return P});return r.mutate(m).then(function(D){for(var T=D.failures,C=D.results,P=D.numFailures,L=D.lastResult,I=0;I<x.length;++I){var V=C?C[I]:x[I],W=k[I];V==null?W.onerror&&W.onerror(T[I]):W.onsuccess&&W.onsuccess(m.type==="put"&&N[I]?m.values[I]:V)}return{failures:T,results:C,numFailures:P,lastResult:L}}).catch(function(D){return k.forEach(function(T){return T.onerror&&T.onerror(D)}),Promise.reject(D)})})}function R(m){return S(m.trans,m.range,1e4)}function S(m,w,x){return r.query({trans:m,values:!1,query:{index:n,range:w},limit:x}).then(function(N){var k=N.result;return d({type:"delete",keys:k,trans:m}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):k.length<x?{failures:[],numFailures:0,lastResult:void 0}:S(m,u(u({},w),{lower:k[k.length-1],lowerOpen:!0}),x)})})}}});return o}})}};function di(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function Eo(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)G(t.keys[o],e[a])===0&&(n.push(r?Me(t.values[o]):t.values[o]),++a);return n.length===e.length?n:null}catch{return null}}var mi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return u(u({},r),{getMany:function(n){if(!n.cache)return r.getMany(n);var o=Eo(n.keys,n.trans._cache,n.cache==="clone");return o?K.resolve(o):r.getMany(n).then(function(a){return n.trans._cache={keys:n.keys,values:n.cache==="clone"?Me(a):a},a})},mutate:function(n){return n.type!=="add"&&(n.trans._cache=null),r.mutate(n)}})}}}};function xo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ro(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var gi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new ne(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(n,o,a){if(U.subscr&&o!=="readonly")throw new F.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(U.querier));return e.transaction(n,o,a)},table:function(n){var o=e.table(n),a=o.schema,s=a.primaryKey,c=a.indexes,l=s.extractKey,h=s.outbound,g=s.autoIncrement&&c.filter(function(m){return m.compound&&m.keyPath.includes(s.keyPath)}),d=u(u({},o),{mutate:function(m){var w,x,N=m.trans,k=m.mutatedParts||(m.mutatedParts={}),D=function(q){var z="idb://".concat(t,"/").concat(n,"/").concat(q);return k[z]||(k[z]=new ne)},T=D(""),C=D(":dels"),P=m.type,L=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[pn(s,m).filter(function(q){return q}),m.values]:[],I=L[0],V=L[1],W=m.trans._cache;if(E(I)){T.addKeys(I);var M=P==="delete"||I.length===V.length?Eo(I,W):null;M||C.addKeys(I),(M||V)&&yi(D,a,M,V)}else if(I){var j={from:(w=I.lower)!==null&&w!==void 0?w:e.MIN_KEY,to:(x=I.upper)!==null&&x!==void 0?x:e.MAX_KEY};C.add(j),T.add(j)}else T.add(r),C.add(r),a.indexes.forEach(function(q){return D(q.name).add(r)});return o.mutate(m).then(function(q){return I&&(m.type==="add"||m.type==="put")&&(T.addKeys(q.results),g&&g.forEach(function(z){for(var B=m.values.map(function(ie){return z.extractKey(ie)}),J=z.keyPath.findIndex(function(ie){return ie===s.keyPath}),oe=0,ge=q.results.length;oe<ge;++oe)B[oe][J]=q.results[oe];D(z.name).addKeys(B)})),N.mutatedParts=ir(N.mutatedParts||{},k),q})}}),R=function(m){var w,x,N=m.query,k=N.index,D=N.range;return[k,new ne((w=D.lower)!==null&&w!==void 0?w:e.MIN_KEY,(x=D.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},S={get:function(m){return[s,new ne(m.key)]},getMany:function(m){return[s,new ne().addKeys(m.keys)]},count:R,query:R,openCursor:R};return b(S).forEach(function(m){d[m]=function(w){var x=U.subscr,N=!!x,k=xo(U,o)&&Ro(m,w),D=k?w.obsSet={}:x;if(N){var T=function(M){var j="idb://".concat(t,"/").concat(n,"/").concat(M);return D[j]||(D[j]=new ne)},C=T(""),P=T(":dels"),L=S[m](w),I=L[0],V=L[1];if(m==="query"&&I.isPrimaryKey&&!w.values?P.add(V):T(I.name||"").add(V),!I.isPrimaryKey)if(m==="count")P.add(r);else{var W=m==="query"&&h&&w.values&&o.query(u(u({},w),{values:!1}));return o[m].apply(this,arguments).then(function(M){if(m==="query"){if(h&&w.values)return W.then(function(B){var J=B.result;return C.addKeys(J),M});var j=w.values?M.result.map(l):M.result;w.values?C.addKeys(j):P.addKeys(j)}else if(m==="openCursor"){var q=M,z=w.values;return q&&Object.create(q,{key:{get:function(){return P.addKey(q.primaryKey),q.key}},primaryKey:{get:function(){var B=q.primaryKey;return P.addKey(B),B}},value:{get:function(){return z&&C.addKey(q.primaryKey),q.value}}})}return M})}}return o[m].apply(this,arguments)}}),d}})}};function yi(e,t,r,n){function o(a){var s=e(a.name||"");function c(h){return h!=null?a.extractKey(h):null}var l=function(h){return a.multiEntry&&E(h)?h.forEach(function(g){return s.addKey(g)}):s.addKey(h)};(r||n).forEach(function(h,g){var d=r&&c(r[g]),R=n&&c(n[g]);G(d,R)!==0&&(d!=null&&l(d),R!=null&&l(R))})}t.indexes.forEach(o)}function No(e,t,r){if(r.numFailures===0)return t;if(t.type==="deleteRange")return null;var n=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===n)return null;var o=u({},t);return E(o.keys)&&(o.keys=o.keys.filter(function(a,s){return!(s in r.failures)})),"values"in o&&E(o.values)&&(o.values=o.values.filter(function(a,s){return!(s in r.failures)})),o}function vi(e,t){return t.lower===void 0?!0:t.lowerOpen?G(e,t.lower)>0:G(e,t.lower)>=0}function wi(e,t){return t.upper===void 0?!0:t.upperOpen?G(e,t.upper)<0:G(e,t.upper)<=0}function dn(e,t){return vi(e,t)&&wi(e,t)}function Co(e,t,r,n,o,a){if(!r||r.length===0)return e;var s=t.query.index,c=s.multiEntry,l=t.query.range,h=n.schema.primaryKey,g=h.extractKey,d=s.extractKey,R=(s.lowLevelIndex||s).extractKey,S=r.reduce(function(m,w){var x=m,N=[];if(w.type==="add"||w.type==="put")for(var k=new ne,D=w.values.length-1;D>=0;--D){var T=w.values[D],C=g(T);if(!k.hasKey(C)){var P=d(T);(c&&E(P)?P.some(function(M){return dn(M,l)}):dn(P,l))&&(k.addKey(C),N.push(T))}}switch(w.type){case"add":{var L=new ne().addKeys(t.values?m.map(function(M){return g(M)}):m);x=m.concat(t.values?N.filter(function(M){var j=g(M);return L.hasKey(j)?!1:(L.addKey(j),!0)}):N.map(function(M){return g(M)}).filter(function(M){return L.hasKey(M)?!1:(L.addKey(M),!0)}));break}case"put":{var I=new ne().addKeys(w.values.map(function(M){return g(M)}));x=m.filter(function(M){return!I.hasKey(t.values?g(M):M)}).concat(t.values?N:N.map(function(M){return g(M)}));break}case"delete":var V=new ne().addKeys(w.keys);x=m.filter(function(M){return!V.hasKey(t.values?g(M):M)});break;case"deleteRange":var W=w.range;x=m.filter(function(M){return!dn(g(M),W)});break}return x},e);return S===e?e:(S.sort(function(m,w){return G(R(m),R(w))||G(g(m),g(w))}),t.limit&&t.limit<1/0&&(S.length>t.limit?S.length=t.limit:e.length===t.limit&&S.length<t.limit&&(o.dirty=!0)),a?Object.freeze(S):S)}function ko(e,t){return G(e.lower,t.lower)===0&&G(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function bi(e,t,r,n){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var o=G(e,t);if(o===0){if(r&&n)return 0;if(r)return 1;if(n)return-1}return o}function _i(e,t,r,n){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var o=G(e,t);if(o===0){if(r&&n)return 0;if(r)return-1;if(n)return 1}return o}function Ei(e,t){return bi(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&_i(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function xi(e,t,r,n){var o=He["idb://".concat(e,"/").concat(t)];if(!o)return[];var a=o.queries[r];if(!a)return[null,!1,o,null];var s=n.query?n.query.index.name:null,c=a[s||""];if(!c)return[null,!1,o,null];switch(r){case"query":var l=c.find(function(d){return d.req.limit===n.limit&&d.req.values===n.values&&ko(d.req.query.range,n.query.range)});if(l)return[l,!0,o,c];var h=c.find(function(d){var R="limit"in d.req?d.req.limit:1/0;return R>=n.limit&&(n.values?d.req.values:!0)&&Ei(d.req.query.range,n.query.range)});return[h,!1,o,c];case"count":var g=c.find(function(d){return ko(d.req.query.range,n.query.range)});return[g,!!g,o,c]}}function Ri(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){e.subscribers.delete(r),e.subscribers.size===0&&Ni(e,t)})}function Ni(e,t){setTimeout(function(){e.subscribers.size===0&&Ue(t,e)},3e3)}var Ci={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=u(u({},e),{transaction:function(n,o,a){var s=e.transaction(n,o,a);if(o==="readwrite"){var c=new AbortController,l=c.signal,h=function(g){return function(){if(c.abort(),o==="readwrite"){for(var d=new Set,R=0,S=n;R<S.length;R++){var m=S[R],w=He["idb://".concat(t,"/").concat(m)];if(w){var x=e.table(m),N=w.optimisticOps.filter(function(z){return z.trans===s});if(s._explicit&&g&&s.mutatedParts)for(var k=0,D=Object.values(w.queries.query);k<D.length;k++)for(var T=D[k],C=0,P=T.slice();C<P.length;C++){var L=P[C];sn(L.obsSet,s.mutatedParts)&&(Ue(T,L),L.subscribers.forEach(function(z){return d.add(z)}))}else if(N.length>0){w.optimisticOps=w.optimisticOps.filter(function(z){return z.trans!==s});for(var I=0,V=Object.values(w.queries.query);I<V.length;I++)for(var T=V[I],W=0,M=T.slice();W<M.length;W++){var L=M[W];if(L.res!=null&&s.mutatedParts)if(g&&!L.dirty){var j=Object.isFrozen(L.res),q=Co(L.res,L.req,N,x,L,j);L.dirty?(Ue(T,L),L.subscribers.forEach(function(J){return d.add(J)})):q!==L.res&&(L.res=q,L.promise=K.resolve({result:q}))}else L.dirty&&Ue(T,L),L.subscribers.forEach(function(J){return d.add(J)})}}}}d.forEach(function(z){return z()})}}};s.addEventListener("abort",h(!1),{signal:l}),s.addEventListener("error",h(!1),{signal:l}),s.addEventListener("complete",h(!0),{signal:l})}return s},table:function(n){var o=e.table(n),a=o.schema.primaryKey,s=u(u({},o),{mutate:function(c){var l=U.trans;if(a.outbound||l.db._options.cache==="disabled"||l.explicit||l.idbtrans.mode!=="readwrite")return o.mutate(c);var h=He["idb://".concat(t,"/").concat(n)];if(!h)return o.mutate(c);var g=o.mutate(c);return(c.type==="add"||c.type==="put")&&(c.values.length>=50||pn(a,c).some(function(d){return d==null}))?g.then(function(d){var R=u(u({},c),{values:c.values.map(function(m,w){var x;if(d.failures[w])return m;var N=!((x=a.keyPath)===null||x===void 0)&&x.includes(".")?Me(m):u({},m);return ae(N,a.keyPath,d.results[w]),N})}),S=No(h,R,d);h.optimisticOps.push(S),queueMicrotask(function(){return c.mutatedParts&&sr(c.mutatedParts)})}):(h.optimisticOps.push(c),c.mutatedParts&&sr(c.mutatedParts),g.then(function(d){if(d.numFailures>0){Ue(h.optimisticOps,c);var R=No(h,c,d);R&&h.optimisticOps.push(R),c.mutatedParts&&sr(c.mutatedParts)}}),g.catch(function(){Ue(h.optimisticOps,c),c.mutatedParts&&sr(c.mutatedParts)})),g},query:function(c){var l;if(!xo(U,o)||!Ro("query",c))return o.query(c);var h=((l=U.trans)===null||l===void 0?void 0:l.db._options.cache)==="immutable",g=U,d=g.requery,R=g.signal,S=xi(t,n,"query",c),m=S[0],w=S[1],x=S[2],N=S[3];if(m&&w)m.obsSet=c.obsSet;else{var k=o.query(c).then(function(D){var T=D.result;if(m&&(m.res=T),h){for(var C=0,P=T.length;C<P;++C)Object.freeze(T[C]);Object.freeze(T)}else D.result=Me(T);return D}).catch(function(D){return N&&m&&Ue(N,m),Promise.reject(D)});m={obsSet:c.obsSet,promise:k,subscribers:new Set,type:"query",req:c,dirty:!1},N?N.push(m):(N=[m],x||(x=He["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),x.queries.query[c.query.index.name||""]=N)}return Ri(m,N,d,R),m.promise.then(function(D){return{result:Co(D.result,c,x?.optimisticOps,o,m,h)}})}});return s}});return r}};function cr(e,t){return new Proxy(e,{get:function(r,n,o){return n==="db"?t:Reflect.get(r,n,o)}})}var _e=(function(){function e(t,r){var n=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=r=u({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};s.dbReadyPromise=new K(function(l){s.dbReadyResolve=l}),s.openCanceller=new K(function(l,h){s.cancelOpen=h}),this._state=s,this.name=t,this.on=dt(this,"populate","blocked","versionchange","close",{ready:[Ar,Y]}),this.once=function(l,h){var g=function(){for(var d=[],R=0;R<arguments.length;R++)d[R]=arguments[R];n.on(l).unsubscribe(g),h.apply(n,d)};return n.on(l,g)},this.on.ready.subscribe=Kn(this.on.ready.subscribe,function(l){return function(h,g){e.vip(function(){var d=n._state;if(d.openComplete)d.dbOpenError||K.resolve().then(h),g&&l(h);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(h),g&&l(h);else{l(h);var R=n;g||l(function S(){R.on.ready.unsubscribe(h),R.on.ready.unsubscribe(S)})}})}}),this.Collection=Ia(this),this.Table=Oa(this),this.Transaction=Va(this),this.Version=oi(this),this.WhereClause=Fa(this),this.on("versionchange",function(l){l.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(l){!l.newVersion||l.newVersion<l.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(l.oldVersion/10))}),this._maxKey=vt(r.IDBKeyRange),this._createTransaction=function(l,h,g,d){return new n.Transaction(l,h,g,n._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(l){n.on("blocked").fire(l),rt.filter(function(h){return h.name===n.name&&h!==n&&!h._state.vcFired}).map(function(h){return h.on("versionchange").fire(l)})},this.use(mi),this.use(Ci),this.use(gi),this.use(hi),this.use(pi);var c=new Proxy(this,{get:function(l,h,g){if(h==="_vip")return!0;if(h==="table")return function(R){return cr(n.table(R),c)};var d=Reflect.get(l,h,g);return d instanceof io?cr(d,c):h==="tables"?d.map(function(R){return cr(R,c)}):h==="_createTransaction"?function(){var R=d.apply(this,arguments);return cr(R,c)}:d}});this.vip=c,a.forEach(function(l){return l(n)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new F.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,n=r.filter(function(o){return o._cfg.version===t})[0];return n||(n=new this.Version(t),r.push(n),r.sort(Ya),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?t():new K(function(n,o){if(r._state.openComplete)return o(new F.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){o(new F.DatabaseClosed);return}r.open().catch(Y)}r._state.dbReadyPromise.then(n,o)}).then(t)},e.prototype.use=function(t){var r=t.stack,n=t.create,o=t.level,a=t.name;a&&this.unuse({stack:r,name:a});var s=this._middlewares[r]||(this._middlewares[r]=[]);return s.push({stack:r,create:n,level:o??10,name:a}),s.sort(function(c,l){return c.level-l.level}),this},e.prototype.unuse=function(t){var r=t.stack,n=t.name,o=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(a){return o?a.create!==o:n?a.name!==n:!1})),this},e.prototype.open=function(){var t=this;return qe(Ce,function(){return ci(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,r=rt.indexOf(this);if(r>=0&&rt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new K(function(n){t.dbReadyResolve=n}),t.openCanceller=new K(function(n,o){t.cancelOpen=o}))},e.prototype.close=function(t){var r=t===void 0?{disableAutoOpen:!0}:t,n=r.disableAutoOpen,o=this._state;n?(o.isBeingOpened&&o.cancelOpen(new F.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new F.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},e.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var n=arguments.length>0&&typeof arguments[0]!="object",o=this._state;return new K(function(a,s){var c=function(){r.close(t);var l=r._deps.indexedDB.deleteDatabase(r.name);l.onsuccess=Q(function(){si(r._deps,r.name),a()}),l.onerror=me(s),l.onblocked=r._fireOnBlocked};if(n)throw new F.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(c):c()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return b(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=li.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,r,n){var o=this,a=U.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var s=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var c,l;try{if(l=r.map(function(g){var d=g instanceof o.Table?g.name:g;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===jr)c=jr;else if(t=="rw"||t==Wr)c=Wr;else throw new F.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===jr&&c===Wr)if(s)a=null;else throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&l.forEach(function(g){if(a&&a.storeNames.indexOf(g)===-1)if(s)a=null;else throw new F.SubTransaction("Table "+g+" not included in parent transaction.")}),s&&a&&!a.active&&(a=null)}}catch(g){return a?a._promise(null,function(d,R){R(g)}):Z(g)}var h=_o.bind(null,this,c,l,a,n);return a?a._promise(c,h,"lock"):U.trans?qe(U.transless,function(){return o._whenReady(h)}):this._whenReady(h)},e.prototype.table=function(t){if(!X(this._allTables,t))throw new F.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),ki=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Di=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,r,n){return this._subscribe(!t||typeof t=="function"?{next:t,error:r,complete:n}:t)},e.prototype[ki]=function(){return this},e})(),lr;try{lr={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{lr={indexedDB:null,IDBKeyRange:null}}function Do(e){var t=!1,r,n=new Di(function(o){var a=Tr(e);function s(N){var k=Ze();try{a&&tt();var D=ke(e,N);return a&&(D=D.finally(De)),D}finally{k&&et()}}var c=!1,l,h={},g={},d={get closed(){return c},unsubscribe:function(){c||(c=!0,l&&l.abort(),R&&Oe.storagemutated.unsubscribe(w))}};o.start&&o.start(d);var R=!1,S=function(){return $r(x)};function m(){return sn(g,h)}var w=function(N){ir(h,N),m()&&S()},x=function(){if(!(c||!lr.indexedDB)){h={};var N={};l&&l.abort(),l=new AbortController;var k={subscr:N,signal:l.signal,requery:S,querier:e,trans:null},D=s(k);Promise.resolve(D).then(function(T){t=!0,r=T,!(c||k.signal.aborted)&&(h={},g=N,!aa(g)&&!R&&(Oe(yt,w),R=!0),$r(function(){return!c&&o.next&&o.next(T)}))},function(T){t=!1,["DatabaseClosedError","AbortError"].includes(T?.name)||c||$r(function(){c||o.error&&o.error(T)})})}};return setTimeout(S,0),d});return n.hasValue=function(){return t},n.getValue=function(){return r},n}var Ge=_e;re(Ge,u(u({},Bt),{delete:function(e){var t=new Ge(e,{addons:[]});return t.delete()},exists:function(e){return new Ge(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return ai(Ge.dependencies).then(e)}catch{return Z(new F.MissingAPI)}},defineClass:function(){function e(t){O(this,t)}return e},ignoreTransaction:function(e){return U.trans?qe(U.transless,e):e()},vip:nn,async:function(e){return function(){try{var t=fn(e.apply(this,arguments));return!t||typeof t.then!="function"?K.resolve(t):t}catch(r){return Z(r)}}},spawn:function(e,t,r){try{var n=fn(e.apply(r,t||[]));return!n||typeof n.then!="function"?K.resolve(n):n}catch(o){return Z(o)}},currentTransaction:{get:function(){return U.trans||null}},waitFor:function(e,t){var r=K.resolve(typeof e=="function"?Ge.ignoreTransaction(e):e).timeout(t||6e4);return U.trans?U.trans.waitFor(r):r},Promise:K,debug:{get:function(){return de},set:function(e){jn(e)}},derive:Ye,extend:O,props:re,override:Kn,Events:dt,on:Oe,liveQuery:Do,extendObservabilitySet:ir,getByKeyPath:ve,setByKeyPath:ae,delByKeyPath:ra,shallowClone:Mn,deepClone:Me,getObjectDiff:hn,cmp:G,asap:Ln,minKey:qr,addons:[],connections:rt,errnames:Or,dependencies:lr,cache:He,semVer:Zn,version:Zn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,r*2)})})),Ge.maxKey=vt(Ge.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Oe(yt,function(e){if(!Ae){var t;t=new CustomEvent(zr,{detail:e}),Ae=!0,dispatchEvent(t),Ae=!1}}),addEventListener(zr,function(e){var t=e.detail;Ae||mn(t)}));function mn(e){var t=Ae;try{Ae=!0,Oe.storagemutated.fire(e),ln(e,!0)}finally{Ae=t}}var Ae=!1,Pe,gn=function(){};typeof BroadcastChannel<"u"&&(gn=function(){Pe=new BroadcastChannel(zr),Pe.onmessage=function(e){return e.data&&mn(e.data)}},gn(),typeof Pe.unref=="function"&&Pe.unref(),Oe(yt,function(e){Ae||Pe.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!_e.disableBfCache&&e.persisted){de&&console.debug("Dexie: handling persisted pagehide"),Pe?.close();for(var t=0,r=rt;t<r.length;t++){var n=r[t];n.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!_e.disableBfCache&&e.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),gn(),mn({all:new ne(-1/0,[[]])}))}));function Ti(e){return new pt({add:e})}function Si(e){return new pt({remove:e})}function Oi(e,t){return new pt({replacePrefix:[e,t]})}K.rejectionMapper=fa,jn(de);var Ai=Object.freeze({__proto__:null,Dexie:_e,liveQuery:Do,Entity:ro,cmp:G,PropModification:pt,replacePrefix:Oi,add:Ti,remove:Si,default:_e,RangeSet:ne,mergeRanges:_t,rangesOverlap:yo});return u(_e,Ai,{default:_e}),_e}))});v();v();v();v();v();v();v();v();v();v();try{self["workbox:core:7.3.0"]&&_()}catch{}var Wi=(f,...i)=>{let u=f;return i.length>0&&(u+=` :: ${JSON.stringify(i)}`),u};var To=Wi;var H=class extends Error{constructor(i,u){let p=To(i,u);super(p),this.name=i,this.details=u}};v();var Ee={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},vn=f=>[Ee.prefix,f,Ee.suffix].filter(i=>i&&i.length>0).join("-"),Hi=f=>{for(let i of Object.keys(Ee))f(i)},xe={updateDetails:f=>{Hi(i=>{typeof f[i]=="string"&&(Ee[i]=f[i])})},getGoogleAnalyticsName:f=>f||vn(Ee.googleAnalytics),getPrecacheName:f=>f||vn(Ee.precache),getPrefix:()=>Ee.prefix,getRuntimeName:f=>f||vn(Ee.runtime),getSuffix:()=>Ee.suffix};v();v();function wn(f,i){let u=i();return f.waitUntil(u),u}v();v();try{self["workbox:precaching:7.3.0"]&&_()}catch{}var Gi="__WB_REVISION__";function So(f){if(!f)throw new H("add-to-cache-list-unexpected-type",{entry:f});if(typeof f=="string"){let b=new URL(f,location.href);return{cacheKey:b.href,url:b.href}}let{revision:i,url:u}=f;if(!u)throw new H("add-to-cache-list-unexpected-type",{entry:f});if(!i){let b=new URL(u,location.href);return{cacheKey:b.href,url:b.href}}let p=new URL(u,location.href),y=new URL(u,location.href);return p.searchParams.set(Gi,i),{cacheKey:p.href,url:y.href}}v();var hr=class{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:i,state:u})=>{u&&(u.originalRequest=i)},this.cachedResponseWillBeUsed=async({event:i,state:u,cachedResponse:p})=>{if(i.type==="install"&&u&&u.originalRequest&&u.originalRequest instanceof Request){let y=u.originalRequest.url;p?this.notUpdatedURLs.push(y):this.updatedURLs.push(y)}return p}}};v();var pr=class{constructor({precacheController:i}){this.cacheKeyWillBeUsed=async({request:u,params:p})=>{let y=p?.cacheKey||this._precacheController.getCacheKeyForURL(u.url);return y?new Request(y,{headers:u.headers}):u},this._precacheController=i}};v();v();v();v();v();var xt;function Ao(){if(xt===void 0){let f=new Response("");if("body"in f)try{new Response(f.body),xt=!0}catch{xt=!1}xt=!1}return xt}async function Po(f,i){let u=null;if(f.url&&(u=new URL(f.url).origin),u!==self.location.origin)throw new H("cross-origin-copy-response",{origin:u});let p=f.clone(),y={headers:new Headers(p.headers),status:p.status,statusText:p.statusText},b=i?i(y):y,E=Ao()?p.body:await p.blob();return new Response(E,b)}v();var bn=f=>new URL(String(f),location.href).href.replace(new RegExp(`^${location.origin}`),"");v();v();v();function Io(f,i){let u=new URL(f);for(let p of i)u.searchParams.delete(p);return u.href}async function Ko(f,i,u,p){let y=Io(i.url,u);if(i.url===y)return f.match(i,p);let b=Object.assign(Object.assign({},p),{ignoreSearch:!0}),E=await f.keys(i,b);for(let O of E){let $=Io(O.url,u);if(y===$)return f.match(O,p)}}v();var dr=class{constructor(){this.promise=new Promise((i,u)=>{this.resolve=i,this.reject=u})}};v();v();var mr=new Set;async function Lo(){for(let f of mr)await f()}v();function gr(f){return new Promise(i=>setTimeout(i,f))}v();try{self["workbox:strategies:7.3.0"]&&_()}catch{}function yr(f){return typeof f=="string"?new Request(f):f}var Rt=class{constructor(i,u){this._cacheKeys={},Object.assign(this,u),this.event=u.event,this._strategy=i,this._handlerDeferred=new dr,this._extendLifetimePromises=[],this._plugins=[...i.plugins],this._pluginStateMap=new Map;for(let p of this._plugins)this._pluginStateMap.set(p,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(i){let{event:u}=this,p=yr(i);if(p.mode==="navigate"&&u instanceof FetchEvent&&u.preloadResponse){let E=await u.preloadResponse;if(E)return E}let y=this.hasCallback("fetchDidFail")?p.clone():null;try{for(let E of this.iterateCallbacks("requestWillFetch"))p=await E({request:p.clone(),event:u})}catch(E){if(E instanceof Error)throw new H("plugin-error-request-will-fetch",{thrownErrorMessage:E.message})}let b=p.clone();try{let E;E=await fetch(p,p.mode==="navigate"?void 0:this._strategy.fetchOptions);for(let O of this.iterateCallbacks("fetchDidSucceed"))E=await O({event:u,request:b,response:E});return E}catch(E){throw y&&await this.runCallbacks("fetchDidFail",{error:E,event:u,originalRequest:y.clone(),request:b.clone()}),E}}async fetchAndCachePut(i){let u=await this.fetch(i),p=u.clone();return this.waitUntil(this.cachePut(i,p)),u}async cacheMatch(i){let u=yr(i),p,{cacheName:y,matchOptions:b}=this._strategy,E=await this.getCacheKey(u,"read"),O=Object.assign(Object.assign({},b),{cacheName:y});p=await caches.match(E,O);for(let $ of this.iterateCallbacks("cachedResponseWillBeUsed"))p=await $({cacheName:y,matchOptions:b,cachedResponse:p,request:E,event:this.event})||void 0;return p}async cachePut(i,u){let p=yr(i);await gr(0);let y=await this.getCacheKey(p,"write");if(!u)throw new H("cache-put-with-no-response",{url:bn(y.url)});let b=await this._ensureResponseSafeToCache(u);if(!b)return!1;let{cacheName:E,matchOptions:O}=this._strategy,$=await self.caches.open(E),ee=this.hasCallback("cacheDidUpdate"),X=ee?await Ko($,y.clone(),["__WB_REVISION__"],O):null;try{await $.put(y,ee?b.clone():b)}catch(re){if(re instanceof Error)throw re.name==="QuotaExceededError"&&await Lo(),re}for(let re of this.iterateCallbacks("cacheDidUpdate"))await re({cacheName:E,oldResponse:X,newResponse:b.clone(),request:y,event:this.event});return!0}async getCacheKey(i,u){let p=`${i.url} | ${u}`;if(!this._cacheKeys[p]){let y=i;for(let b of this.iterateCallbacks("cacheKeyWillBeUsed"))y=yr(await b({mode:u,request:y,event:this.event,params:this.params}));this._cacheKeys[p]=y}return this._cacheKeys[p]}hasCallback(i){for(let u of this._strategy.plugins)if(i in u)return!0;return!1}async runCallbacks(i,u){for(let p of this.iterateCallbacks(i))await p(u)}*iterateCallbacks(i){for(let u of this._strategy.plugins)if(typeof u[i]=="function"){let p=this._pluginStateMap.get(u);yield b=>{let E=Object.assign(Object.assign({},b),{state:p});return u[i](E)}}}waitUntil(i){return this._extendLifetimePromises.push(i),i}async doneWaiting(){for(;this._extendLifetimePromises.length;){let i=this._extendLifetimePromises.splice(0),p=(await Promise.allSettled(i)).find(y=>y.status==="rejected");if(p)throw p.reason}}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(i){let u=i,p=!1;for(let y of this.iterateCallbacks("cacheWillUpdate"))if(u=await y({request:this.request,response:u,event:this.event})||void 0,p=!0,!u)break;return p||u&&u.status!==200&&(u=void 0),u}};var se=class{constructor(i={}){this.cacheName=xe.getRuntimeName(i.cacheName),this.plugins=i.plugins||[],this.fetchOptions=i.fetchOptions,this.matchOptions=i.matchOptions}handle(i){let[u]=this.handleAll(i);return u}handleAll(i){i instanceof FetchEvent&&(i={event:i,request:i.request});let u=i.event,p=typeof i.request=="string"?new Request(i.request):i.request,y="params"in i?i.params:void 0,b=new Rt(this,{event:u,request:p,params:y}),E=this._getResponse(b,p,u),O=this._awaitComplete(E,b,p,u);return[E,O]}async _getResponse(i,u,p){await i.runCallbacks("handlerWillStart",{event:p,request:u});let y;try{if(y=await this._handle(u,i),!y||y.type==="error")throw new H("no-response",{url:u.url})}catch(b){if(b instanceof Error){for(let E of i.iterateCallbacks("handlerDidError"))if(y=await E({error:b,event:p,request:u}),y)break}if(!y)throw b}for(let b of i.iterateCallbacks("handlerWillRespond"))y=await b({event:p,request:u,response:y});return y}async _awaitComplete(i,u,p,y){let b,E;try{b=await i}catch{}try{await u.runCallbacks("handlerDidRespond",{event:y,request:p,response:b}),await u.doneWaiting()}catch(O){O instanceof Error&&(E=O)}if(await u.runCallbacks("handlerDidComplete",{event:y,request:p,response:b,error:E}),u.destroy(),E)throw E}};var ze=class f extends se{constructor(i={}){i.cacheName=xe.getPrecacheName(i.cacheName),super(i),this._fallbackToNetwork=i.fallbackToNetwork!==!1,this.plugins.push(f.copyRedirectedCacheableResponsesPlugin)}async _handle(i,u){let p=await u.cacheMatch(i);return p||(u.event&&u.event.type==="install"?await this._handleInstall(i,u):await this._handleFetch(i,u))}async _handleFetch(i,u){let p,y=u.params||{};if(this._fallbackToNetwork){let b=y.integrity,E=i.integrity,O=!E||E===b;if(p=await u.fetch(new Request(i,{integrity:i.mode!=="no-cors"?E||b:void 0})),b&&O&&i.mode!=="no-cors"){this._useDefaultCacheabilityPluginIfNeeded();let $=await u.cachePut(i,p.clone())}}else throw new H("missing-precache-entry",{cacheName:this.cacheName,url:i.url});return p}async _handleInstall(i,u){this._useDefaultCacheabilityPluginIfNeeded();let p=await u.fetch(i);if(!await u.cachePut(i,p.clone()))throw new H("bad-precaching-response",{url:i.url,status:p.status});return p}_useDefaultCacheabilityPluginIfNeeded(){let i=null,u=0;for(let[p,y]of this.plugins.entries())y!==f.copyRedirectedCacheableResponsesPlugin&&(y===f.defaultPrecacheCacheabilityPlugin&&(i=p),y.cacheWillUpdate&&u++);u===0?this.plugins.push(f.defaultPrecacheCacheabilityPlugin):u>1&&i!==null&&this.plugins.splice(i,1)}};ze.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:f}){return!f||f.status>=400?null:f}};ze.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:f}){return f.redirected?await Po(f):f}};var Nt=class{constructor({cacheName:i,plugins:u=[],fallbackToNetwork:p=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new ze({cacheName:xe.getPrecacheName(i),plugins:[...u,new pr({precacheController:this})],fallbackToNetwork:p}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(i){this.addToCacheList(i),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(i){let u=[];for(let p of i){typeof p=="string"?u.push(p):p&&p.revision===void 0&&u.push(p.url);let{cacheKey:y,url:b}=So(p),E=typeof p!="string"&&p.revision?"reload":"default";if(this._urlsToCacheKeys.has(b)&&this._urlsToCacheKeys.get(b)!==y)throw new H("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(b),secondEntry:y});if(typeof p!="string"&&p.integrity){if(this._cacheKeysToIntegrities.has(y)&&this._cacheKeysToIntegrities.get(y)!==p.integrity)throw new H("add-to-cache-list-conflicting-integrities",{url:b});this._cacheKeysToIntegrities.set(y,p.integrity)}if(this._urlsToCacheKeys.set(b,y),this._urlsToCacheModes.set(b,E),u.length>0){let O=`Workbox is precaching URLs without revision info: ${u.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(O)}}}install(i){return wn(i,async()=>{let u=new hr;this.strategy.plugins.push(u);for(let[b,E]of this._urlsToCacheKeys){let O=this._cacheKeysToIntegrities.get(E),$=this._urlsToCacheModes.get(b),ee=new Request(b,{integrity:O,cache:$,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:E},request:ee,event:i}))}let{updatedURLs:p,notUpdatedURLs:y}=u;return{updatedURLs:p,notUpdatedURLs:y}})}activate(i){return wn(i,async()=>{let u=await self.caches.open(this.strategy.cacheName),p=await u.keys(),y=new Set(this._urlsToCacheKeys.values()),b=[];for(let E of p)y.has(E.url)||(await u.delete(E),b.push(E.url));return{deletedURLs:b}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(i){let u=new URL(i,location.href);return this._urlsToCacheKeys.get(u.href)}getIntegrityForCacheKey(i){return this._cacheKeysToIntegrities.get(i)}async matchPrecache(i){let u=i instanceof Request?i.url:i,p=this.getCacheKeyForURL(u);if(p)return(await self.caches.open(this.strategy.cacheName)).match(p)}createHandlerBoundToURL(i){let u=this.getCacheKeyForURL(i);if(!u)throw new H("non-precached-url",{url:i});return p=>(p.request=new Request(i),p.params=Object.assign({cacheKey:u},p.params),this.strategy.handle(p))}};var _n,Re=()=>(_n||(_n=new Nt),_n);v();v();v();v();v();try{self["workbox:routing:7.3.0"]&&_()}catch{}var vr="GET";v();var at=f=>f&&typeof f=="object"?f:{handle:f};var le=class{constructor(i,u,p=vr){this.handler=at(u),this.match=i,this.method=p}setCatchHandler(i){this.catchHandler=at(i)}};v();var Ct=class extends le{constructor(i,u,p){let y=({url:b})=>{let E=i.exec(b.href);if(E&&!(b.origin!==location.origin&&E.index!==0))return E.slice(1)};super(y,u,p)}};v();v();var kt=class{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",(i=>{let{request:u}=i,p=this.handleRequest({request:u,event:i});p&&i.respondWith(p)}))}addCacheListener(){self.addEventListener("message",(i=>{if(i.data&&i.data.type==="CACHE_URLS"){let{payload:u}=i.data,p=Promise.all(u.urlsToCache.map(y=>{typeof y=="string"&&(y=[y]);let b=new Request(...y);return this.handleRequest({request:b,event:i})}));i.waitUntil(p),i.ports&&i.ports[0]&&p.then(()=>i.ports[0].postMessage(!0))}}))}handleRequest({request:i,event:u}){let p=new URL(i.url,location.href);if(!p.protocol.startsWith("http"))return;let y=p.origin===location.origin,{params:b,route:E}=this.findMatchingRoute({event:u,request:i,sameOrigin:y,url:p}),O=E&&E.handler,$=[],ee=i.method;if(!O&&this._defaultHandlerMap.has(ee)&&(O=this._defaultHandlerMap.get(ee)),!O)return;let X;try{X=O.handle({url:p,request:i,event:u,params:b})}catch(Ne){X=Promise.reject(Ne)}let re=E&&E.catchHandler;return X instanceof Promise&&(this._catchHandler||re)&&(X=X.catch(async Ne=>{if(re)try{return await re.handle({url:p,request:i,event:u,params:b})}catch(fe){fe instanceof Error&&(Ne=fe)}if(this._catchHandler)return this._catchHandler.handle({url:p,request:i,event:u});throw Ne})),X}findMatchingRoute({url:i,sameOrigin:u,request:p,event:y}){let b=this._routes.get(p.method)||[];for(let E of b){let O,$=E.match({url:i,sameOrigin:u,request:p,event:y});if($)return O=$,(Array.isArray(O)&&O.length===0||$.constructor===Object&&Object.keys($).length===0||typeof $=="boolean")&&(O=void 0),{route:E,params:O}}return{}}setDefaultHandler(i,u=vr){this._defaultHandlerMap.set(u,at(i))}setCatchHandler(i){this._catchHandler=at(i)}registerRoute(i){this._routes.has(i.method)||this._routes.set(i.method,[]),this._routes.get(i.method).push(i)}unregisterRoute(i){if(!this._routes.has(i.method))throw new H("unregister-route-but-not-found-with-method",{method:i.method});let u=this._routes.get(i.method).indexOf(i);if(u>-1)this._routes.get(i.method).splice(u,1);else throw new H("unregister-route-route-not-registered")}};var Dt,wr=()=>(Dt||(Dt=new kt,Dt.addFetchListener(),Dt.addCacheListener()),Dt);function Le(f,i,u){let p;if(typeof f=="string"){let b=new URL(f,location.href),E=({url:O})=>O.href===b.href;p=new le(E,i,u)}else if(f instanceof RegExp)p=new Ct(f,i,u);else if(typeof f=="function")p=new le(f,i,u);else if(f instanceof le)p=f;else throw new H("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return wr().registerRoute(p),p}v();v();v();function Mo(f,i=[]){for(let u of[...f.searchParams.keys()])i.some(p=>p.test(u))&&f.searchParams.delete(u);return f}function*Uo(f,{ignoreURLParametersMatching:i=[/^utm_/,/^fbclid$/],directoryIndex:u="index.html",cleanURLs:p=!0,urlManipulation:y}={}){let b=new URL(f,location.href);b.hash="",yield b.href;let E=Mo(b,i);if(yield E.href,u&&E.pathname.endsWith("/")){let O=new URL(E.href);O.pathname+=u,yield O.href}if(p){let O=new URL(E.href);O.pathname+=".html",yield O.href}if(y){let O=y({url:b});for(let $ of O)yield $.href}}var Tt=class extends le{constructor(i,u){let p=({request:y})=>{let b=i.getURLsToCacheKeys();for(let E of Uo(y.url,u)){let O=b.get(E);if(O){let $=i.getIntegrityForCacheKey(O);return{cacheKey:O,integrity:$}}}};super(p,i.strategy)}};function En(f){let i=Re(),u=new Tt(i,f);Le(u)}v();v();v();v();v();v();function xn(f){Re().precache(f)}v();function Rn(f,i){xn(f),En(i)}v();v();v();v();v();v();v();v();v();var St=class extends se{async _handle(i,u){let p=[],y=await u.cacheMatch(i),b;if(!y)try{y=await u.fetchAndCachePut(i)}catch(E){E instanceof Error&&(b=E)}if(!y)throw new H("no-response",{url:i.url,error:b});return y}};v();v();v();var br={cacheWillUpdate:async({response:f})=>f.status===200||f.status===0?f:null};var Ot=class extends se{constructor(i={}){super(i),this.plugins.some(u=>"cacheWillUpdate"in u)||this.plugins.unshift(br),this._networkTimeoutSeconds=i.networkTimeoutSeconds||0}async _handle(i,u){let p=[],y=[],b;if(this._networkTimeoutSeconds){let{id:$,promise:ee}=this._getTimeoutPromise({request:i,logs:p,handler:u});b=$,y.push(ee)}let E=this._getNetworkPromise({timeoutId:b,request:i,logs:p,handler:u});y.push(E);let O=await u.waitUntil((async()=>await u.waitUntil(Promise.race(y))||await E)());if(!O)throw new H("no-response",{url:i.url});return O}_getTimeoutPromise({request:i,logs:u,handler:p}){let y;return{promise:new Promise(E=>{y=setTimeout(async()=>{E(await p.cacheMatch(i))},this._networkTimeoutSeconds*1e3)}),id:y}}async _getNetworkPromise({timeoutId:i,request:u,logs:p,handler:y}){let b,E;try{E=await y.fetchAndCachePut(u)}catch(O){O instanceof Error&&(b=O)}return i&&clearTimeout(i),(b||!E)&&(E=await y.cacheMatch(u)),E}};v();var At=class extends se{constructor(i={}){super(i),this._networkTimeoutSeconds=i.networkTimeoutSeconds||0}async _handle(i,u){let p,y;try{let b=[u.fetch(i)];if(this._networkTimeoutSeconds){let E=gr(this._networkTimeoutSeconds*1e3);b.push(E)}if(y=await Promise.race(b),!y)throw new Error(`Timed out the network response after ${this._networkTimeoutSeconds} seconds.`)}catch(b){b instanceof Error&&(p=b)}if(!y)throw new H("no-response",{url:i.url,error:p});return y}};v();var Pt=class extends se{constructor(i={}){super(i),this.plugins.some(u=>"cacheWillUpdate"in u)||this.plugins.unshift(br)}async _handle(i,u){let p=[],y=u.fetchAndCachePut(i).catch(()=>{});u.waitUntil(y);let b=await u.cacheMatch(i),E;if(!b)try{b=await y}catch(O){O instanceof Error&&(E=O)}if(!b)throw new H("no-response",{url:i.url,error:E});return b}};v();v();v();function _r(f){f.then(()=>{})}v();v();v();var zi=(f,i)=>i.some(u=>f instanceof u),Bo,Fo;function Yi(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qi(){return Fo||(Fo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $o=new WeakMap,Cn=new WeakMap,Vo=new WeakMap,Nn=new WeakMap,Dn=new WeakMap;function Xi(f){let i=new Promise((u,p)=>{let y=()=>{f.removeEventListener("success",b),f.removeEventListener("error",E)},b=()=>{u(pe(f.result)),y()},E=()=>{p(f.error),y()};f.addEventListener("success",b),f.addEventListener("error",E)});return i.then(u=>{u instanceof IDBCursor&&$o.set(u,f)}).catch(()=>{}),Dn.set(i,f),i}function Ji(f){if(Cn.has(f))return;let i=new Promise((u,p)=>{let y=()=>{f.removeEventListener("complete",b),f.removeEventListener("error",E),f.removeEventListener("abort",E)},b=()=>{u(),y()},E=()=>{p(f.error||new DOMException("AbortError","AbortError")),y()};f.addEventListener("complete",b),f.addEventListener("error",E),f.addEventListener("abort",E)});Cn.set(f,i)}var kn={get(f,i,u){if(f instanceof IDBTransaction){if(i==="done")return Cn.get(f);if(i==="objectStoreNames")return f.objectStoreNames||Vo.get(f);if(i==="store")return u.objectStoreNames[1]?void 0:u.objectStore(u.objectStoreNames[0])}return pe(f[i])},set(f,i,u){return f[i]=u,!0},has(f,i){return f instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in f}};function qo(f){kn=f(kn)}function Zi(f){return f===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(i,...u){let p=f.call(Er(this),i,...u);return Vo.set(p,i.sort?i.sort():[i]),pe(p)}:Qi().includes(f)?function(...i){return f.apply(Er(this),i),pe($o.get(this))}:function(...i){return pe(f.apply(Er(this),i))}}function es(f){return typeof f=="function"?Zi(f):(f instanceof IDBTransaction&&Ji(f),zi(f,Yi())?new Proxy(f,kn):f)}function pe(f){if(f instanceof IDBRequest)return Xi(f);if(Nn.has(f))return Nn.get(f);let i=es(f);return i!==f&&(Nn.set(f,i),Dn.set(i,f)),i}var Er=f=>Dn.get(f);function Wo(f,i,{blocked:u,upgrade:p,blocking:y,terminated:b}={}){let E=indexedDB.open(f,i),O=pe(E);return p&&E.addEventListener("upgradeneeded",$=>{p(pe(E.result),$.oldVersion,$.newVersion,pe(E.transaction),$)}),u&&E.addEventListener("blocked",$=>u($.oldVersion,$.newVersion,$)),O.then($=>{b&&$.addEventListener("close",()=>b()),y&&$.addEventListener("versionchange",ee=>y(ee.oldVersion,ee.newVersion,ee))}).catch(()=>{}),O}function Ho(f,{blocked:i}={}){let u=indexedDB.deleteDatabase(f);return i&&u.addEventListener("blocked",p=>i(p.oldVersion,p)),pe(u).then(()=>{})}var ts=["get","getKey","getAll","getAllKeys","count"],rs=["put","add","delete","clear"],Tn=new Map;function jo(f,i){if(!(f instanceof IDBDatabase&&!(i in f)&&typeof i=="string"))return;if(Tn.get(i))return Tn.get(i);let u=i.replace(/FromIndex$/,""),p=i!==u,y=rs.includes(u);if(!(u in(p?IDBIndex:IDBObjectStore).prototype)||!(y||ts.includes(u)))return;let b=async function(E,...O){let $=this.transaction(E,y?"readwrite":"readonly"),ee=$.store;return p&&(ee=ee.index(O.shift())),(await Promise.all([ee[u](...O),y&&$.done]))[0]};return Tn.set(i,b),b}qo(f=>({...f,get:(i,u,p)=>jo(i,u)||f.get(i,u,p),has:(i,u)=>!!jo(i,u)||f.has(i,u)}));v();try{self["workbox:expiration:7.3.0"]&&_()}catch{}var ns="workbox-expiration",It="cache-entries",Go=f=>{let i=new URL(f,location.href);return i.hash="",i.href},xr=class{constructor(i){this._db=null,this._cacheName=i}_upgradeDb(i){let u=i.createObjectStore(It,{keyPath:"id"});u.createIndex("cacheName","cacheName",{unique:!1}),u.createIndex("timestamp","timestamp",{unique:!1})}_upgradeDbAndDeleteOldDbs(i){this._upgradeDb(i),this._cacheName&&Ho(this._cacheName)}async setTimestamp(i,u){i=Go(i);let p={url:i,timestamp:u,cacheName:this._cacheName,id:this._getId(i)},b=(await this.getDb()).transaction(It,"readwrite",{durability:"relaxed"});await b.store.put(p),await b.done}async getTimestamp(i){let p=await(await this.getDb()).get(It,this._getId(i));return p?.timestamp}async expireEntries(i,u){let p=await this.getDb(),y=await p.transaction(It).store.index("timestamp").openCursor(null,"prev"),b=[],E=0;for(;y;){let $=y.value;$.cacheName===this._cacheName&&(i&&$.timestamp<i||u&&E>=u?b.push(y.value):E++),y=await y.continue()}let O=[];for(let $ of b)await p.delete(It,$.id),O.push($.url);return O}_getId(i){return this._cacheName+"|"+Go(i)}async getDb(){return this._db||(this._db=await Wo(ns,1,{upgrade:this._upgradeDbAndDeleteOldDbs.bind(this)})),this._db}};var Kt=class{constructor(i,u={}){this._isRunning=!1,this._rerunRequested=!1,this._maxEntries=u.maxEntries,this._maxAgeSeconds=u.maxAgeSeconds,this._matchOptions=u.matchOptions,this._cacheName=i,this._timestampModel=new xr(i)}async expireEntries(){if(this._isRunning){this._rerunRequested=!0;return}this._isRunning=!0;let i=this._maxAgeSeconds?Date.now()-this._maxAgeSeconds*1e3:0,u=await this._timestampModel.expireEntries(i,this._maxEntries),p=await self.caches.open(this._cacheName);for(let y of u)await p.delete(y,this._matchOptions);this._isRunning=!1,this._rerunRequested&&(this._rerunRequested=!1,_r(this.expireEntries()))}async updateTimestamp(i){await this._timestampModel.setTimestamp(i,Date.now())}async isURLExpired(i){if(this._maxAgeSeconds){let u=await this._timestampModel.getTimestamp(i),p=Date.now()-this._maxAgeSeconds*1e3;return u!==void 0?u<p:!0}else return!1}async delete(){this._rerunRequested=!1,await this._timestampModel.expireEntries(1/0)}};v();v();function zo(f){mr.add(f)}var Lt=class{constructor(i={}){this.cachedResponseWillBeUsed=async({event:u,request:p,cacheName:y,cachedResponse:b})=>{if(!b)return null;let E=this._isResponseDateFresh(b),O=this._getCacheExpiration(y);_r(O.expireEntries());let $=O.updateTimestamp(p.url);if(u)try{u.waitUntil($)}catch{}return E?b:null},this.cacheDidUpdate=async({cacheName:u,request:p})=>{let y=this._getCacheExpiration(u);await y.updateTimestamp(p.url),await y.expireEntries()},this._config=i,this._maxAgeSeconds=i.maxAgeSeconds,this._cacheExpirations=new Map,i.purgeOnQuotaError&&zo(()=>this.deleteCacheAndMetadata())}_getCacheExpiration(i){if(i===xe.getRuntimeName())throw new H("expire-custom-caches-only");let u=this._cacheExpirations.get(i);return u||(u=new Kt(i,this._config),this._cacheExpirations.set(i,u)),u}_isResponseDateFresh(i){if(!this._maxAgeSeconds)return!0;let u=this._getDateHeaderTimestamp(i);if(u===null)return!0;let p=Date.now();return u>=p-this._maxAgeSeconds*1e3}_getDateHeaderTimestamp(i){if(!i.headers.has("date"))return null;let u=i.headers.get("date"),y=new Date(u).getTime();return isNaN(y)?null:y}async deleteCacheAndMetadata(){for(let[i,u]of this._cacheExpirations)await self.caches.delete(i),await u.delete();this._cacheExpirations=new Map}};v();v();v();v();var Rr=qi(Yo(),1),Qo=Symbol.for("Dexie"),Nr=globalThis[Qo]||(globalThis[Qo]=Rr.default);if(Rr.default.semVer!==Nr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rr.default.semVer} and ${Nr.semVer}`);var{liveQuery:am,mergeRanges:im,rangesOverlap:sm,RangeSet:um,cmp:cm,Entity:lm,PropModification:fm,replacePrefix:hm,add:pm,remove:dm,DexieYProvider:mm}=Nr;var Xo=Nr;var An=class extends Xo{constructor(){super("VynkLocalDB");Ke(this,"messages");Ke(this,"stories");Ke(this,"conversations");Ke(this,"queue");Ke(this,"meta");Ke(this,"users");Ke(this,"participants");this.version(3).stores({messages:"++id, messageId, conversationId, timestamp",stories:"++id, storyId, expiresAt",conversations:"++id, conversationId, updatedAt, type",queue:"++id, action, timestamp",meta:"key",settings:"id",calls:"++id, status",users:"id, name, updatedAt",participants:"id, conversationId, userId"})}async cleanupOldStories(){let u=Date.now();await this.stories.where("expiresAt").below(u).delete()}async clearAllData(){await this.messages.clear(),await this.stories.clear(),await this.conversations.clear(),await this.users.clear(),await this.participants.clear(),await this.queue.clear(),await this.meta.clear()}},Pn=new An;v();v();var Jo="sync-queue",it={IMAGES:"images-v1",STATIC:"static-v1",PAGES:"pages-v1",MAX_IMAGES:60,IMAGE_MAX_AGE:720*60*60,NAV_TIMEOUT:3};Rn(A||[]);self.addEventListener("install",()=>{self.skipWaiting()});self.addEventListener("activate",f=>{f.waitUntil(self.clients.claim())});Le(({url:f,request:i})=>f.pathname.startsWith("/api/auth")||i.method==="POST",new At);Le(({request:f})=>f.destination==="image",new St({cacheName:it.IMAGES,plugins:[new Lt({maxEntries:it.MAX_IMAGES,maxAgeSeconds:it.IMAGE_MAX_AGE,purgeOnQuotaError:!0})]}));Le(({request:f})=>f.destination==="script"||f.destination==="style",new Pt({cacheName:it.STATIC}));Le(({request:f})=>f.mode==="navigate",new Ot({cacheName:it.PAGES,networkTimeoutSeconds:it.NAV_TIMEOUT}));self.addEventListener("sync",f=>{let i=f;i.tag===Jo&&i.waitUntil(os())});async function os(){let f=await Pn.queue.orderBy("timestamp").toArray();if(f.length!==0)try{let i=await fetch("/api/sync",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}});if(i.status>=500)throw new Error(`Server error: ${i.status}`);if(!i.ok){console.error("[SW] Batch sync rejected:",await i.text());return}let{results:u}=await i.json();await as(f,u)}catch(i){throw console.error("[SW] Sync failed:",i),i}}async function as(f,i){if(!Array.isArray(i))return;let u=[],p=[];for(let b of i)b.status==="success"&&b.id?u.push(b.id):b.status==="failed"&&b.id&&(console.warn(`[SW] Item ${b.id} failed: ${b.error}`),p.push(b.id));let y=[...u,...p];y.length>0&&await Pn.queue.bulkDelete(y),await is(f,u)}async function is(f,i){let u=await self.clients.matchAll({type:"window"});for(let p of f)if(p.id&&i.includes(p.id)){let y={type:"OpSynced",action:p.action,originalId:p.id};for(let b of u)b.postMessage(y)}}self.addEventListener("push",f=>{let i=f,u={title:"Vynk",body:"You have a new notification",icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png"},p=u;if(i.data)try{let y=i.data.json();p={title:y.title||u.title,body:y.body||u.body,icon:y.icon||u.icon,badge:y.badge||u.badge}}catch{}i.waitUntil(self.registration.showNotification(p.title,{body:p.body,icon:p.icon,badge:p.badge,tag:"vynk-notification"}))});self.addEventListener("notificationclick",f=>{f.notification.close(),f.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(i=>{for(let u of i)if("focus"in u)return u.focus();return self.clients.openWindow("/")}))});self.addEventListener("message",f=>{let{type:i}=f.data||{};switch(i){case"SKIP_WAITING":self.skipWaiting();break;case"TRIGGER_SYNC":self.registration.sync?.register(Jo).catch(u=>console.warn("[SW] Sync registration failed:",u));break;case"GET_VERSION":f.ports[0]?.postMessage({version:"1.0.0"});break}});})();
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
