"use strict";(()=>{var Bs=Object.create;var Ar=Object.defineProperty;var qs=Object.getOwnPropertyDescriptor;var js=Object.getOwnPropertyNames;var Ws=Object.getPrototypeOf,Hs=Object.prototype.hasOwnProperty;var Gs=(o,i,s)=>i in o?Ar(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s;var re=(o,i)=>()=>(o&&(i=o(o=0)),i);var Ys=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),zs=(o,i)=>{for(var s in i)Ar(o,s,{get:i[s],enumerable:!0})},Qs=(o,i,s,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of js(i))!Hs.call(o,l)&&l!==s&&Ar(o,l,{get:()=>i[l],enumerable:!(u=qs(i,l))||u.enumerable});return o};var Xs=(o,i,s)=>(s=o!=null?Bs(Ws(o)):{},Qs(i||!o||!o.__esModule?Ar(s,"default",{value:o,enumerable:!0}):s,o));var He=(o,i,s)=>Gs(o,typeof i!="symbol"?i+"":i,s);var A,v=re(()=>{A=[]});var Di=Ys((eo,to)=>{v();(function(o,i){typeof eo=="object"&&typeof to<"u"?to.exports=i():typeof define=="function"&&define.amd?define(i):(o=typeof globalThis<"u"?globalThis:o||self,o.Dexie=i())})(eo,(function(){"use strict";var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},o(e,t)};function i(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},s.apply(this,arguments)};function u(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,c;n<a;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||Array.prototype.slice.call(t))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h=Object.keys,m=Array.isArray;typeof Promise<"u"&&!l.Promise&&(l.Promise=Promise);function w(e,t){return typeof t!="object"||h(t).forEach(function(r){e[r]=t[r]}),e}var I=Object.getPrototypeOf,j={}.hasOwnProperty;function Q(e,t){return j.call(e,t)}function X(e,t){typeof t=="function"&&(t=t(I(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(r){oe(e,r,t[r])})}var se=Object.defineProperty;function oe(e,t,r,n){se(e,t,w(r&&Q(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function Z(e){return{from:function(t){return e.prototype=Object.create(t.prototype),oe(e.prototype,"constructor",e),{extend:X.bind(null,e.prototype)}}}}var er=Object.getOwnPropertyDescriptor;function tr(e,t){var r=er(e,t),n;return r||(n=I(e))&&tr(n,t)}var ua=[].slice;function rr(e,t,r){return ua.call(e,t,r)}function yo(e,t){return t(e)}function wt(e){if(!e)throw new Error("Assertion Failed")}function vo(e){l.setImmediate?setImmediate(e):setTimeout(e,0)}function ca(e,t){return e.reduce(function(r,n,a){var c=t(n,a);return c&&(r[c[0]]=c[1]),r},{})}function ke(e,t){if(typeof t=="string"&&Q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],n=0,a=t.length;n<a;++n){var c=ke(e,t[n]);r.push(c)}return r}var f=t.indexOf(".");if(f!==-1){var p=e[t.substr(0,f)];return p==null?void 0:ke(p,t.substr(f+1))}}function me(e,t,r){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){wt(typeof r!="string"&&"length"in r);for(var n=0,a=t.length;n<a;++n)me(e,t[n],r[n])}else{var c=t.indexOf(".");if(c!==-1){var f=t.substr(0,c),p=t.substr(c+1);if(p==="")r===void 0?m(e)&&!isNaN(parseInt(f))?e.splice(f,1):delete e[f]:e[f]=r;else{var d=e[f];(!d||!Q(e,f))&&(d=e[f]={}),me(d,p,r)}}else r===void 0?m(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function la(e,t){typeof t=="string"?me(e,t,void 0):"length"in t&&[].map.call(t,function(r){me(e,r,void 0)})}function wo(e){var t={};for(var r in e)Q(e,r)&&(t[r]=e[r]);return t}var fa=[].concat;function bo(e){return fa.apply([],e)}var ha="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(bo([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return l[e]}),_o=new Set(ha.map(function(e){return l[e]}));function xo(e){var t={};for(var r in e)if(Q(e,r)){var n=e[r];t[r]=!n||typeof n!="object"||_o.has(n.constructor)?n:xo(n)}return t}function pa(e){for(var t in e)if(Q(e,t))return!1;return!0}var bt=null;function Qe(e){bt=new WeakMap;var t=Xr(e);return bt=null,t}function Xr(e){if(!e||typeof e!="object")return e;var t=bt.get(e);if(t)return t;if(m(e)){t=[],bt.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(Xr(e[r]))}else if(_o.has(e.constructor))t=e;else{var a=I(e);t=a===Object.prototype?{}:Object.create(a),bt.set(e,t);for(var c in e)Q(e,c)&&(t[c]=Xr(e[c]))}return t}var da={}.toString;function Jr(e){return da.call(e).slice(8,-1)}var Zr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ma=typeof Zr=="symbol"?function(e){var t;return e!=null&&(t=e[Zr])&&t.apply(e)}:function(){return null};function Xe(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}var ut={};function Se(e){var t,r,n,a;if(arguments.length===1){if(m(e))return e.slice();if(this===ut&&typeof e=="string")return[e];if(a=ma(e)){for(r=[];n=a.next(),!n.done;)r.push(n.value);return r}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var en=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ga=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Eo=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],tn=ga.concat(Eo),ya={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ct(e,t){this.name=e,this.message=t}Z(ct).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Ro(e,t){return e+". Errors: "+Object.keys(t).map(function(r){return t[r].toString()}).filter(function(r,n,a){return a.indexOf(r)===n}).join(`
`)}function nr(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=Ro(e,t)}Z(nr).from(ct);function lt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(r){return t[r]}),this.failuresByPos=t,this.message=Ro(e,this.failures)}Z(lt).from(ct);var rn=tn.reduce(function(e,t){return e[t]=t+"Error",e},{}),va=ct,V=tn.reduce(function(e,t){var r=t+"Error";function n(a,c){this.name=r,a?typeof a=="string"?(this.message="".concat(a).concat(c?`
 `+c:""),this.inner=c||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=ya[t]||r,this.inner=null)}return Z(n).from(va),e[t]=n,e},{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var No=Eo.reduce(function(e,t){return e[t+"Error"]=V[t],e},{});function wa(e,t){if(!e||e instanceof ct||e instanceof TypeError||e instanceof SyntaxError||!e.name||!No[e.name])return e;var r=new No[e.name](t||e.message,e);return"stack"in e&&oe(r,"stack",{get:function(){return this.inner.stack}}),r}var or=tn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=V[t]),e},{});or.ModifyError=nr,or.DexieError=ct,or.BulkError=lt;function J(){}function _t(e){return e}function ba(e,t){return e==null||e===_t?t:function(r){return t(e(r))}}function Je(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function _a(e,t){return e===J?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Je(n,this.onsuccess):n),a&&(this.onerror=this.onerror?Je(a,this.onerror):a),c!==void 0?c:r}}function xa(e,t){return e===J?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Je(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Je(n,this.onerror):n)}}function Ea(e,t){return e===J?t:function(r){var n=e.apply(this,arguments);w(r,n);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Je(a,this.onsuccess):a),c&&(this.onerror=this.onerror?Je(c,this.onerror):c),n===void 0?f===void 0?void 0:f:w(n,f)}}function Ra(e,t){return e===J?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function nn(e,t){return e===J?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,a=arguments.length,c=new Array(a);a--;)c[a]=arguments[a];return r.then(function(){return t.apply(n,c)})}return t.apply(this,arguments)}}var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Co(e,t){Ee=e}var xt={},ko=100,on=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,I(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,I(t),e]})(),So=on[0],To=on[1],Na=on[2],Ca=To&&To.then,Ze=So&&So.constructor,an=!!Na;function ka(){queueMicrotask(Ta)}var Et=function(e,t){Rt.push([e,t]),ir&&(ka(),ir=!1)},sn=!0,ir=!0,et=[],ar=[],un=_t,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:J,pgp:!1,env:{},finalize:J},$=Me,Rt=[],tt=0,sr=[];function U(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=$;if(typeof e!="function"){if(e!==xt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ln(this,this._value);return}this._state=null,this._value=null,++t.ref,Ao(this,e)}var cn={get:function(){var e=$,t=fr;function r(n,a){var c=this,f=!e.global&&(e!==$||t!==fr),p=f&&!$e(),d=new U(function(g,x){fn(c,new Do(Po(n,e,f,p),Po(a,e,f,p),g,x,e))});return this._consoleTask&&(d._consoleTask=this._consoleTask),d}return r.prototype=xt,r},set:function(e){oe(this,"then",e&&e.prototype===xt?cn:{get:function(){return e},set:cn.set})}};X(U.prototype,{then:cn,_then:function(e,t){fn(this,new Do(null,null,e,t,$))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,function(n){return n instanceof t?r(n):ur(n)}):this.then(null,function(n){return n&&n.name===t?r(n):ur(n)})},finally:function(e){return this.then(function(t){return U.resolve(e()).then(function(){return t})},function(t){return U.resolve(e()).then(function(){return ur(t)})})},timeout:function(e,t){var r=this;return e<1/0?new U(function(n,a){var c=setTimeout(function(){return a(new V.Timeout(t))},e);r.then(n,a).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&oe(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Me.env=Io();function Do(e,t,r,n,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=n,this.psd=a}X(U,{all:function(){var e=Se.apply(null,arguments).map(hr);return new U(function(t,r){e.length===0&&t([]);var n=e.length;e.forEach(function(a,c){return U.resolve(a).then(function(f){e[c]=f,--n||t(e)},r)})})},resolve:function(e){if(e instanceof U)return e;if(e&&typeof e.then=="function")return new U(function(r,n){e.then(r,n)});var t=new U(xt,!0,e);return t},reject:ur,race:function(){var e=Se.apply(null,arguments).map(hr);return new U(function(t,r){e.map(function(n){return U.resolve(n).then(t,r)})})},PSD:{get:function(){return $},set:function(e){return $=e}},totalEchoes:{get:function(){return fr}},newPSD:Le,usePSD:rt,scheduler:{get:function(){return Et},set:function(e){Et=e}},rejectionMapper:{get:function(){return un},set:function(e){un=e}},follow:function(e,t){return new U(function(r,n){return Le(function(a,c){var f=$;f.unhandleds=[],f.onunhandled=c,f.finalize=Je(function(){var p=this;Da(function(){p.unhandleds.length===0?a():c(p.unhandleds[0])})},f.finalize),e()},t,r,n)})}}),Ze&&(Ze.allSettled&&oe(U,"allSettled",function(){var e=Se.apply(null,arguments).map(hr);return new U(function(t){e.length===0&&t([]);var r=e.length,n=new Array(r);e.forEach(function(a,c){return U.resolve(a).then(function(f){return n[c]={status:"fulfilled",value:f}},function(f){return n[c]={status:"rejected",reason:f}}).then(function(){return--r||t(n)})})})}),Ze.any&&typeof AggregateError<"u"&&oe(U,"any",function(){var e=Se.apply(null,arguments).map(hr);return new U(function(t,r){e.length===0&&r(new AggregateError([]));var n=e.length,a=new Array(n);e.forEach(function(c,f){return U.resolve(c).then(function(p){return t(p)},function(p){a[f]=p,--n||r(new AggregateError(a))})})})}),Ze.withResolvers&&(U.withResolvers=Ze.withResolvers));function Ao(e,t){try{t(function(r){if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ft();r&&typeof r.then=="function"?Ao(e,function(a,c){r instanceof U?r._then(a,c):r.then(a,c)}):(e._state=!0,e._value=r,Oo(e)),n&&ht()}},ln.bind(null,e))}catch(r){ln(e,r)}}function ln(e,t){if(ar.push(t),e._state===null){var r=e._lib&&ft();t=un(t),e._state=!1,e._value=t,Aa(e),Oo(e),r&&ht()}}function Oo(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)fn(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),tt===0&&(++tt,Et(function(){--tt===0&&hn()},[]))}function fn(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++tt,Et(Sa,[r,e,t])}function Sa(e,t,r){try{var n,a=t._value;!t._state&&ar.length&&(ar=[]),n=Ee&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),!t._state&&ar.indexOf(a)===-1&&Oa(t),r.resolve(n)}catch(c){r.reject(c)}finally{--tt===0&&hn(),--r.psd.ref||r.psd.finalize()}}function Ta(){rt(Me,function(){ft()&&ht()})}function ft(){var e=sn;return sn=!1,ir=!1,e}function ht(){var e,t,r;do for(;Rt.length>0;)for(e=Rt,Rt=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(Rt.length>0);sn=!0,ir=!0}function hn(){var e=et;et=[],e.forEach(function(n){n._PSD.onunhandled.call(null,n._value,n)});for(var t=sr.slice(0),r=t.length;r;)t[--r]()}function Da(e){function t(){e(),sr.splice(sr.indexOf(t),1)}sr.push(t),++tt,Et(function(){--tt===0&&hn()},[])}function Aa(e){et.some(function(t){return t._value===e._value})||et.push(e)}function Oa(e){for(var t=et.length;t;)if(et[--t]._value===e._value){et.splice(t,1);return}}function ur(e){return new U(xt,!1,e)}function ee(e,t){var r=$;return function(){var n=ft(),a=$;try{return Fe(r,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{Fe(a,!1),n&&ht()}}}var ie={awaits:0,echoes:0,id:0},Ia=0,cr=[],lr=0,fr=0,Pa=0;function Le(e,t,r,n){var a=$,c=Object.create(a);c.parent=a,c.ref=0,c.global=!1,c.id=++Pa,Me.env,c.env=an?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},t&&w(c,t),++a.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var f=rt(c,e,r,n);return c.ref===0&&c.finalize(),f}function pt(){return ie.id||(ie.id=++Ia),++ie.awaits,ie.echoes+=ko,ie.id}function $e(){return ie.awaits?(--ie.awaits===0&&(ie.id=0),ie.echoes=ie.awaits*ko,!0):!1}(""+Ca).indexOf("[native code]")===-1&&(pt=$e=J);function hr(e){return ie.echoes&&e&&e.constructor===Ze?(pt(),e.then(function(t){return $e(),t},function(t){return $e(),ne(t)})):e}function Ka(e){++fr,(!ie.echoes||--ie.echoes===0)&&(ie.echoes=ie.awaits=ie.id=0),cr.push($),Fe(e,!0)}function Ua(){var e=cr[cr.length-1];cr.pop(),Fe(e,!1)}function Fe(e,t){var r=$;if((t?ie.echoes&&(!lr++||e!==$):lr&&(!--lr||e!==$))&&queueMicrotask(t?Ka.bind(null,e):Ua),e!==$&&($=e,r===Me&&(Me.env=Io()),an)){var n=Me.env.Promise,a=e.env;(r.global||e.global)&&(Object.defineProperty(l,"Promise",a.PromiseProp),n.all=a.all,n.race=a.race,n.resolve=a.resolve,n.reject=a.reject,a.allSettled&&(n.allSettled=a.allSettled),a.any&&(n.any=a.any))}}function Io(){var e=l.Promise;return an?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function rt(e,t,r,n,a){var c=$;try{return Fe(e,!0),t(r,n,a)}finally{Fe(c,!1)}}function Po(e,t,r,n){return typeof e!="function"?e:function(){var a=$;r&&pt(),Fe(t,!0);try{return e.apply(this,arguments)}finally{Fe(a,!1),n&&queueMicrotask($e)}}}function pn(e){Promise===Ze&&ie.echoes===0?lr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var ne=U.reject;function dn(e,t,r,n){if(!e.idbdb||!e._state.openComplete&&!$.letThrough&&!e._vip){if(e._state.openComplete)return ne(new V.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return ne(new V.DatabaseClosed);e.open().catch(J)}return e._state.dbReadyPromise.then(function(){return dn(e,t,r,n)})}else{var a=e._createTransaction(t,r,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===rn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return dn(e,t,r,n)})):ne(c)}return a._promise(t,function(c,f){return Le(function(){return $.trans=a,n(c,f,a)})}).then(function(c){if(t==="readwrite")try{a.idbtrans.commit()}catch{}return t==="readonly"?c:a._completion.then(function(){return c})})}}var Ko="4.2.1",nt="\uFFFF",mn=-1/0,Te="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Uo="String expected.",dt=[],pr="__dbnames",gn="readonly",yn="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dr(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Qe(t),delete t[e]),t}:function(t){return t}}function Lo(){throw V.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Y(e,t){try{var r=$o(e),n=$o(t);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return La(Fo(e),Fo(t));case"Array":return Ma(e,t)}}catch{}return NaN}function Ma(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,c=0;c<a;++c){var f=Y(e[c],t[c]);if(f!==0)return f}return r===n?0:r<n?-1:1}function La(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,c=0;c<a;++c)if(e[c]!==t[c])return e[c]<t[c]?-1:1;return r===n?0:r<n?-1:1}function $o(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=Jr(e);return r==="ArrayBuffer"?"binary":r}function Fo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function mr(e,t,r){var n=e.schema.yProps;return n?(t&&r.numFailures>0&&(t=t.filter(function(a,c){return!r.failures[c]})),Promise.all(n.map(function(a){var c=a.updatesTable;return t?e.db.table(c).where("k").anyOf(t).delete():e.db.table(c).clear()})).then(function(){return r})):r}var Nt=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var r,n=this["@@propmod"];if(n.add!==void 0){var a=n.add;if(m(a))return u(u([],m(t)?t:[],!0),a,!0).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(n.remove!==void 0){var c=n.remove;if(m(c))return m(t)?t.filter(function(p){return!c.includes(p)}).sort():[];if(typeof c=="number")return Number(t)-c;if(typeof c=="bigint")try{return BigInt(t)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var f=(r=n.replacePrefix)===null||r===void 0?void 0:r[0];return f&&typeof t=="string"&&t.startsWith(f)?n.replacePrefix[1]+t.substring(f.length):t},e})();function Vo(e,t){for(var r=h(t),n=r.length,a=!1,c=0;c<n;++c){var f=r[c],p=t[f],d=ke(e,f);p instanceof Nt?(me(e,f,p.execute(d)),a=!0):d!==p&&(me(e,f,p),a=!0)}return a}var Bo=(function(){function e(){}return e.prototype._trans=function(t,r,n){var a=this._tx||$.trans,c=this.name,f=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function p(x,y,N){if(!N.schema[c])throw new V.NotFound("Table "+c+" not part of transaction");return r(N.idbtrans,N)}var d=ft();try{var g=a&&a.db._novip===this.db._novip?a===$.trans?a._promise(t,p,n):Le(function(){return a._promise(t,p,n)},{trans:a,transless:$.transless||$}):dn(this.db,t,[this.name],p);return f&&(g._consoleTask=f,g=g.catch(function(x){return console.trace(x),ne(x)})),g}finally{d&&ht()}},e.prototype.get=function(t,r){var n=this;return t&&t.constructor===Object?this.where(t).first(r):t==null?ne(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:t}).then(function(c){return n.hook.reading.fire(c)})}).then(r)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(m(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var r=h(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&r.every(function(N){return x.keyPath.indexOf(N)>=0})){for(var y=0;y<r.length;++y)if(r.indexOf(x.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(x,y){return x.keyPath.length-y.keyPath.length})[0];if(n&&this.db._maxKey!==nt){var a=n.keyPath.slice(0,r.length);return this.where(a).equals(a.map(function(x){return t[x]}))}!n&&Ee&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var c=this.schema.idxByName;function f(x,y){return Y(x,y)===0}var p=r.reduce(function(x,y){var N=x[0],O=x[1],b=c[y],E=t[y];return[N||b,N||!b?ot(O,b&&b.multi?function(R){var C=ke(R,y);return m(C)&&C.some(function(S){return f(E,S)})}:function(R){return f(E,ke(R,y))}):O]},[null,null]),d=p[0],g=p[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(g):n?this.filter(g):this.where(r).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,m(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var r=this,n=r.db,a=r.name;this.schema.mappedClass=t,t.prototype instanceof Lo&&(t=(function(d){i(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),g.prototype.table=function(){return a},g})(t));for(var c=new Set,f=t.prototype;f;f=I(f))Object.getOwnPropertyNames(f).forEach(function(d){return c.add(d)});var p=function(d){if(!d)return d;var g=Object.create(t.prototype);for(var x in d)if(!c.has(x))try{g[x]=d[x]}catch{}return g};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),t},e.prototype.defineClass=function(){function t(r){w(this,r)}return this.mapToClass(t)},e.prototype.add=function(t,r){var n=this,a=this.schema.primKey,c=a.auto,f=a.keyPath,p=t;return f&&c&&(p=dr(f)(t)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"add",keys:r!=null?[r]:null,values:[p]})}).then(function(d){return d.numFailures?U.reject(d.failures[0]):d.lastResult}).then(function(d){if(f)try{me(t,f,d)}catch{}return d})},e.prototype.upsert=function(t,r){var n=this,a=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return n.core.get({trans:c,key:t}).then(function(f){var p=f??{};return Vo(p,r),a&&me(p,a,t),n.core.mutate({trans:c,type:"put",values:[p],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[r]}}).then(function(d){return d.numFailures?U.reject(d.failures[0]):!!f})})})},e.prototype.update=function(t,r){if(typeof t=="object"&&!m(t)){var n=ke(t,this.schema.primKey.keyPath);return n===void 0?ne(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(r)}else return this.where(":id").equals(t).modify(r)},e.prototype.put=function(t,r){var n=this,a=this.schema.primKey,c=a.auto,f=a.keyPath,p=t;return f&&c&&(p=dr(f)(t)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"put",values:[p],keys:r!=null?[r]:null})}).then(function(d){return d.numFailures?U.reject(d.failures[0]):d.lastResult}).then(function(d){if(f)try{me(t,f,d)}catch{}return d})},e.prototype.delete=function(t){var r=this;return this._trans("readwrite",function(n){return r.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(a){return mr(r,[t],a)}).then(function(a){return a.numFailures?U.reject(a.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"deleteRange",range:Mo}).then(function(n){return mr(t,null,n)})}).then(function(r){return r.numFailures?U.reject(r.failures[0]):void 0})},e.prototype.bulkGet=function(t){var r=this;return this._trans("readonly",function(n){return r.core.getMany({keys:t,trans:n}).then(function(a){return a.map(function(c){return r.hook.reading.fire(c)})})})},e.prototype.bulkAdd=function(t,r,n){var a=this,c=Array.isArray(r)?r:void 0;n=n||(c?void 0:r);var f=n?n.allKeys:void 0;return this._trans("readwrite",function(p){var d=a.schema.primKey,g=d.auto,x=d.keyPath;if(x&&c)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,N=x&&g?t.map(dr(x)):t;return a.core.mutate({trans:p,type:"add",keys:c,values:N,wantResults:f}).then(function(O){var b=O.numFailures,E=O.results,R=O.lastResult,C=O.failures,S=f?E:R;if(b===0)return S;throw new lt("".concat(a.name,".bulkAdd(): ").concat(b," of ").concat(y," operations failed"),C)})})},e.prototype.bulkPut=function(t,r,n){var a=this,c=Array.isArray(r)?r:void 0;n=n||(c?void 0:r);var f=n?n.allKeys:void 0;return this._trans("readwrite",function(p){var d=a.schema.primKey,g=d.auto,x=d.keyPath;if(x&&c)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,N=x&&g?t.map(dr(x)):t;return a.core.mutate({trans:p,type:"put",keys:c,values:N,wantResults:f}).then(function(O){var b=O.numFailures,E=O.results,R=O.lastResult,C=O.failures,S=f?E:R;if(b===0)return S;throw new lt("".concat(a.name,".bulkPut(): ").concat(b," of ").concat(y," operations failed"),C)})})},e.prototype.bulkUpdate=function(t){var r=this,n=this.core,a=t.map(function(p){return p.key}),c=t.map(function(p){return p.changes}),f=[];return this._trans("readwrite",function(p){return n.getMany({trans:p,keys:a,cache:"clone"}).then(function(d){var g=[],x=[];t.forEach(function(N,O){var b=N.key,E=N.changes,R=d[O];if(R){for(var C=0,S=Object.keys(E);C<S.length;C++){var T=S[C],D=E[T];if(T===r.schema.primKey.keyPath){if(Y(D,b)!==0)throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else me(R,T,D)}f.push(O),g.push(b),x.push(R)}});var y=g.length;return n.mutate({trans:p,type:"put",keys:g,values:x,updates:{keys:a,changeSpecs:c}}).then(function(N){var O=N.numFailures,b=N.failures;if(O===0)return y;for(var E=0,R=Object.keys(b);E<R.length;E++){var C=R[E],S=f[Number(C)];if(S!=null){var T=b[C];delete b[C],b[S]=T}}throw new lt("".concat(r.name,".bulkUpdate(): ").concat(O," of ").concat(y," operations failed"),b)})})})},e.prototype.bulkDelete=function(t){var r=this,n=t.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:t}).then(function(c){return mr(r,t,c)})}).then(function(a){var c=a.numFailures,f=a.lastResult,p=a.failures;if(c===0)return f;throw new lt("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(n," operations failed"),p)})},e})();function Ct(e){var t={},r=function(p,d){if(d){for(var g=arguments.length,x=new Array(g-1);--g;)x[g-1]=arguments[g];return t[p].subscribe.apply(null,x),e}else if(typeof p=="string")return t[p]};r.addEventType=c;for(var n=1,a=arguments.length;n<a;++n)c(arguments[n]);return r;function c(p,d,g){if(typeof p=="object")return f(p);d||(d=Ra),g||(g=J);var x={subscribers:[],fire:g,subscribe:function(y){x.subscribers.indexOf(y)===-1&&(x.subscribers.push(y),x.fire=d(x.fire,y))},unsubscribe:function(y){x.subscribers=x.subscribers.filter(function(N){return N!==y}),x.fire=x.subscribers.reduce(d,g)}};return t[p]=r[p]=x,x}function f(p){h(p).forEach(function(d){var g=p[d];if(m(g))c(d,p[d][0],p[d][1]);else if(g==="asap")var x=c(d,_t,function(){for(var N=arguments.length,O=new Array(N);N--;)O[N]=arguments[N];x.subscribers.forEach(function(b){vo(function(){b.apply(null,O)})})});else throw new V.InvalidArgument("Invalid event config")})}}function kt(e,t){return Z(t).from({prototype:e}),t}function $a(e){return kt(Bo.prototype,function(r,n,a){this.db=e,this._tx=a,this.name=r,this.schema=n,this.hook=e._allTables[r]?e._allTables[r].hook:Ct(null,{creating:[_a,J],reading:[ba,_t],updating:[Ea,J],deleting:[xa,J]})})}function mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vn(e,t){e.filter=ot(e.filter,t)}function wn(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return ot(n(),t())}:t,e.justLimit=r&&!n}function Fa(e,t){e.isMatch=ot(e.isMatch,t)}function gr(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new V.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function qo(e,t,r){var n=gr(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function yr(e,t,r,n){var a=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(p,d,g){if(!a||a(d,g,function(N){return d.stop(N)},function(N){return d.fail(N)})){var x=d.primaryKey,y=""+x;y==="[object ArrayBuffer]"&&(y=""+new Uint8Array(x)),Q(c,y)||(c[y]=!0,t(p,d,g))}};return Promise.all([e.or._iterate(f,r),jo(qo(e,n,r),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}else return jo(qo(e,n,r),ot(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function jo(e,t,r,n){var a=n?function(f,p,d){return r(n(f),p,d)}:r,c=ee(a);return e.then(function(f){if(f)return f.start(function(){var p=function(){return f.continue()};(!t||t(f,function(d){return p=d},function(d){f.stop(d),p=J},function(d){f.fail(d),p=J}))&&c(f.value,f,function(d){return p=d}),p()})})}var Va=(function(){function e(){}return e.prototype._read=function(t,r){var n=this._ctx;return n.error?n.table._trans(null,ne.bind(null,n.error)):n.table._trans("readonly",t).then(r)},e.prototype._write=function(t){var r=this._ctx;return r.error?r.table._trans(null,ne.bind(null,r.error)):r.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var r=this._ctx;r.algorithm=ot(r.algorithm,t)},e.prototype._iterate=function(t,r){return yr(this._ctx,t,r,this._ctx.table.core)},e.prototype.clone=function(t){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&w(n,t),r._ctx=n,r},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var r=this._ctx;return this._read(function(n){return yr(r,t,n,r.table.core)})},e.prototype.count=function(t){var r=this;return this._read(function(n){var a=r._ctx,c=a.table.core;if(mt(a,!0))return c.count({trans:n,query:{index:gr(a,c.schema),range:a.range}}).then(function(p){return Math.min(p,a.limit)});var f=0;return yr(a,function(){return++f,!1},n,c).then(function(){return f})}).then(t)},e.prototype.sortBy=function(t,r){var n=t.split(".").reverse(),a=n[0],c=n.length-1;function f(g,x){return x?f(g[n[x]],x-1):g[a]}var p=this._ctx.dir==="next"?1:-1;function d(g,x){var y=f(g,c),N=f(x,c);return Y(y,N)*p}return this.toArray(function(g){return g.sort(d)}).then(r)},e.prototype.toArray=function(t){var r=this;return this._read(function(n){var a=r._ctx;if(a.dir==="next"&&mt(a,!0)&&a.limit>0){var c=a.valueMapper,f=gr(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:f,range:a.range}}).then(function(d){var g=d.result;return c?g.map(c):g})}else{var p=[];return yr(a,function(d){return p.push(d)},n,a.table.core).then(function(){return p})}},t)},e.prototype.offset=function(t){var r=this._ctx;return t<=0?this:(r.offset+=t,mt(r)?wn(r,function(){var n=t;return function(a,c){return n===0?!0:n===1?(--n,!1):(c(function(){a.advance(n),n=0}),!1)}}):wn(r,function(){var n=t;return function(){return--n<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),wn(this._ctx,function(){var r=t;return function(n,a,c){return--r<=0&&a(c),r>=0}},!0),this},e.prototype.until=function(t,r){return vn(this._ctx,function(n,a,c){return t(n.value)?(a(c),r):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return vn(this._ctx,function(r){return t(r.value)}),Fa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(a,c){n.push(c.key)}).then(function(){return n}).then(t)},e.prototype.primaryKeys=function(t){var r=this._ctx;if(r.dir==="next"&&mt(r,!0)&&r.limit>0)return this._read(function(a){var c=gr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(a){var c=a.result;return c}).then(t);r.keysOnly=!r.isMatch;var n=[];return this.each(function(a,c){n.push(c.primaryKey)}).then(function(){return n}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(r){return r[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return vn(this._ctx,function(a){var c=a.primaryKey.toString(),f=Q(n,c);return n[c]=!0,!f}),this},e.prototype.modify=function(t){var r=this,n=this._ctx;return this._write(function(a){var c;typeof t=="function"?c=t:c=function(C){return Vo(C,t)};var f=n.table.core,p=f.schema.primaryKey,d=p.outbound,g=p.extractKey,x=200,y=r.db._options.modifyChunkSize;y&&(typeof y=="object"?x=y[f.name]||y["*"]||200:x=y);var N=[],O=0,b=[],E=function(C,S){var T=S.failures,D=S.numFailures;O+=C-D;for(var k=0,P=h(T);k<P.length;k++){var M=P[k];N.push(T[M])}},R=t===Wo;return r.clone().primaryKeys().then(function(C){var S=mt(n)&&n.limit===1/0&&(typeof t!="function"||R)&&{index:n.index,range:n.range},T=function(D){var k=Math.min(x,C.length-D),P=C.slice(D,D+k);return(R?Promise.resolve([]):f.getMany({trans:a,keys:P,cache:"immutable"})).then(function(M){var K=[],B=[],H=d?[]:null,L=R?P:[];if(!R)for(var W=0;W<k;++W){var q=M[W],z={value:Qe(q),primKey:C[D+W]};c.call(z,z.value,z)!==!1&&(z.value==null?L.push(C[D+W]):!d&&Y(g(q),g(z.value))!==0?(L.push(C[D+W]),K.push(z.value)):(B.push(z.value),d&&H.push(C[D+W])))}return Promise.resolve(K.length>0&&f.mutate({trans:a,type:"add",values:K}).then(function(F){for(var te in F.failures)L.splice(parseInt(te),1);E(K.length,F)})).then(function(){return(B.length>0||S&&typeof t=="object")&&f.mutate({trans:a,type:"put",keys:H,values:B,criteria:S,changeSpec:typeof t!="function"&&t,isAdditionalChunk:D>0}).then(function(F){return E(B.length,F)})}).then(function(){return(L.length>0||S&&R)&&f.mutate({trans:a,type:"delete",keys:L,criteria:S,isAdditionalChunk:D>0}).then(function(F){return mr(n.table,L,F)}).then(function(F){return E(L.length,F)})}).then(function(){return C.length>D+k&&T(D+x)})})};return T(0).then(function(){if(N.length>0)throw new nr("Error modifying one or more objects",N,O,b);return C.length})})})},e.prototype.delete=function(){var t=this._ctx,r=t.range;return mt(t)&&!t.table.schema.yProps&&(t.isPrimKey||r.type===3)?this._write(function(n){var a=t.table.core.schema.primaryKey,c=r;return t.table.core.count({trans:n,query:{index:a,range:c}}).then(function(f){return t.table.core.mutate({trans:n,type:"deleteRange",range:c}).then(function(p){var d=p.failures,g=p.numFailures;if(g)throw new nr("Could not delete some values",Object.keys(d).map(function(x){return d[x]}),f-g);return f-g})})}):this.modify(Wo)},e})(),Wo=function(e,t){return t.value=null};function Ba(e){return kt(Va.prototype,function(r,n){this.db=e;var a=Mo,c=null;if(n)try{a=n()}catch(g){c=g}var f=r._ctx,p=f.table,d=p.hook.reading.fire;this._ctx={table:p,index:f.index,isPrimKey:!f.index||p.schema.primKey.keyPath&&f.index===p.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:f.or,valueMapper:d!==_t?d:null}})}function qa(e,t){return e<t?-1:e===t?0:1}function ja(e,t){return e>t?-1:e===t?0:1}function ve(e,t,r){var n=e instanceof Go?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function gt(e){return new e.Collection(e,function(){return Ho("")}).limit(0)}function Wa(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ha(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ga(e,t,r,n,a,c){for(var f=Math.min(e.length,n.length),p=-1,d=0;d<f;++d){var g=t[d];if(g!==n[d])return a(e[d],r[d])<0?e.substr(0,d)+r[d]+r.substr(d+1):a(e[d],n[d])<0?e.substr(0,d)+n[d]+r.substr(d+1):p>=0?e.substr(0,p)+t[p]+r.substr(p+1):null;a(e[d],g)<0&&(p=d)}return f<n.length&&c==="next"?e+r.substr(e.length):f<e.length&&c==="prev"?e.substr(0,r.length):p<0?null:e.substr(0,p)+n[p]+r.substr(p+1)}function vr(e,t,r,n){var a,c,f,p,d,g,x,y=r.length;if(!r.every(function(E){return typeof E=="string"}))return ve(e,Uo);function N(E){a=Wa(E),c=Ha(E),f=E==="next"?qa:ja;var R=r.map(function(C){return{lower:c(C),upper:a(C)}}).sort(function(C,S){return f(C.lower,S.lower)});p=R.map(function(C){return C.upper}),d=R.map(function(C){return C.lower}),g=E,x=E==="next"?"":n}N("next");var O=new e.Collection(e,function(){return Ve(p[0],d[y-1]+n)});O._ondirectionchange=function(E){N(E)};var b=0;return O._addAlgorithm(function(E,R,C){var S=E.key;if(typeof S!="string")return!1;var T=c(S);if(t(T,d,b))return!0;for(var D=null,k=b;k<y;++k){var P=Ga(S,T,p[k],d[k],f,g);P===null&&D===null?b=k+1:(D===null||f(D,P)>0)&&(D=P)}return R(D!==null?function(){E.continue(D+x)}:C),!1}),O}function Ve(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Ho(e){return{type:1,lower:e,upper:e}}var Go=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,r,n,a){n=n!==!1,a=a===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(n||a)&&!(n&&a)?gt(this):new this.Collection(this,function(){return Ve(t,r,!n,!a)})}catch{return ve(this,Te)}},e.prototype.equals=function(t){return t==null?ve(this,Te):new this.Collection(this,function(){return Ho(t)})},e.prototype.above=function(t){return t==null?ve(this,Te):new this.Collection(this,function(){return Ve(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ve(this,Te):new this.Collection(this,function(){return Ve(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ve(this,Te):new this.Collection(this,function(){return Ve(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ve(this,Te):new this.Collection(this,function(){return Ve(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ve(this,Uo):this.between(t,t+nt,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):vr(this,function(r,n){return r.indexOf(n[0])===0},[t],nt)},e.prototype.equalsIgnoreCase=function(t){return vr(this,function(r,n){return r===n[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=Se.apply(ut,arguments);return t.length===0?gt(this):vr(this,function(r,n){return n.indexOf(r)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=Se.apply(ut,arguments);return t.length===0?gt(this):vr(this,function(r,n){return n.some(function(a){return r.indexOf(a)===0})},t,nt)},e.prototype.anyOf=function(){var t=this,r=Se.apply(ut,arguments),n=this._cmp;try{r.sort(n)}catch{return ve(this,Te)}if(r.length===0)return gt(this);var a=new this.Collection(this,function(){return Ve(r[0],r[r.length-1])});a._ondirectionchange=function(f){n=f==="next"?t._ascending:t._descending,r.sort(n)};var c=0;return a._addAlgorithm(function(f,p,d){for(var g=f.key;n(g,r[c])>0;)if(++c,c===r.length)return p(d),!1;return n(g,r[c])===0?!0:(p(function(){f.continue(r[c])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[mn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=Se.apply(ut,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ve(this,Te)}var r=t.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[mn,a]]},null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,r){var n=this,a=this._cmp,c=this._ascending,f=this._descending,p=this._min,d=this._max;if(t.length===0)return gt(this);if(!t.every(function(k){return k[0]!==void 0&&k[1]!==void 0&&c(k[0],k[1])<=0}))return ve(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var g=!r||r.includeLowers!==!1,x=r&&r.includeUppers===!0;function y(k,P){for(var M=0,K=k.length;M<K;++M){var B=k[M];if(a(P[0],B[1])<0&&a(P[1],B[0])>0){B[0]=p(B[0],P[0]),B[1]=d(B[1],P[1]);break}}return M===K&&k.push(P),k}var N=c;function O(k,P){return N(k[0],P[0])}var b;try{b=t.reduce(y,[]),b.sort(O)}catch{return ve(this,Te)}var E=0,R=x?function(k){return c(k,b[E][1])>0}:function(k){return c(k,b[E][1])>=0},C=g?function(k){return f(k,b[E][0])>0}:function(k){return f(k,b[E][0])>=0};function S(k){return!R(k)&&!C(k)}var T=R,D=new this.Collection(this,function(){return Ve(b[0][0],b[b.length-1][1],!g,!x)});return D._ondirectionchange=function(k){k==="next"?(T=R,N=c):(T=C,N=f),b.sort(O)},D._addAlgorithm(function(k,P,M){for(var K=k.key;T(K);)if(++E,E===b.length)return P(M),!1;return S(K)?!0:(n._cmp(K,b[E][1])===0||n._cmp(K,b[E][0])===0||P(function(){N===c?k.continue(b[E][0]):k.continue(b[E][1])}),!1)}),D},e.prototype.startsWithAnyOf=function(){var t=Se.apply(ut,arguments);return t.every(function(r){return typeof r=="string"})?t.length===0?gt(this):this.inAnyRange(t.map(function(r){return[r,r+nt]})):ve(this,"startsWithAnyOf() only works with strings")},e})();function Ya(e){return kt(Go.prototype,function(r,n,a){if(this.db=e,this._ctx={table:r,index:n===":id"?null:n,or:a},this._cmp=this._ascending=Y,this._descending=function(c,f){return Y(f,c)},this._max=function(c,f){return Y(c,f)>0?c:f},this._min=function(c,f){return Y(c,f)<0?c:f},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI})}function Re(e){return ee(function(t){return St(t),e(t.target.error),!1})}function St(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Tt="storagemutated",bn="x-storagemutated-1",Be=Ct(null,Tt),za=(function(){function e(){}return e.prototype._lock=function(){return wt(!$.global),++this._reculock,this._reculock===1&&!$.global&&($.lockOwnerFor=this),this},e.prototype._unlock=function(){if(wt(!$.global),--this._reculock===0)for($.global||($.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{rt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},e.prototype.create=function(t){var r=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(wt(!this.idbtrans),!t&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new V.DatabaseClosed(a);case"MissingAPIError":throw new V.MissingAPI(a.message,a);default:throw new V.OpenFailed(a)}if(!this.active)throw new V.TransactionInactive;return wt(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ee(function(c){St(c),r._reject(t.error)}),t.onabort=ee(function(c){St(c),r.active&&r._reject(new V.Abort(t.error)),r.active=!1,r.on("abort").fire(c)}),t.oncomplete=ee(function(){r.active=!1,r._resolve(),"mutatedParts"in t&&Be.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,r,n){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return ne(new V.ReadOnly("Transaction is readonly"));if(!this.active)return ne(new V.TransactionInactive);if(this._locked())return new U(function(f,p){a._blockedFuncs.push([function(){a._promise(t,r,n).then(f,p)},$])});if(n)return Le(function(){var f=new U(function(p,d){a._lock();var g=r(p,d,a);g&&g.then&&g.then(p,d)});return f.finally(function(){return a._unlock()}),f._lib=!0,f});var c=new U(function(f,p){var d=r(f,p,a);d&&d.then&&d.then(f,p)});return c._lib=!0,c},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var r=this._root(),n=U.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return n});else{r._waitingFor=n,r._waitingQueue=[];var a=r.idbtrans.objectStore(r.storeNames[0]);(function f(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(a.get(-1/0).onsuccess=f)})()}var c=r._waitingFor;return new U(function(f,p){n.then(function(d){return r._waitingQueue.push(ee(f.bind(null,d)))},function(d){return r._waitingQueue.push(ee(p.bind(null,d)))}).finally(function(){r._waitingFor===c&&(r._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},e.prototype.table=function(t){var r=this._memoizedTables||(this._memoizedTables={});if(Q(r,t))return r[t];var n=this.schema[t];if(!n)throw new V.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,n,this);return a.core=this.db.core.table(t),r[t]=a,a},e})();function Qa(e){return kt(za.prototype,function(r,n,a,c,f){var p=this;r!=="readonly"&&n.forEach(function(d){var g,x=(g=a[d])===null||g===void 0?void 0:g.yProps;x&&(n=n.concat(x.map(function(y){return y.updatesTable})))}),this.db=e,this.mode=r,this.storeNames=n,this.schema=a,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(d,g){p._resolve=d,p._reject=g}),this._completion.then(function(){p.active=!1,p.on.complete.fire()},function(d){var g=p.active;return p.active=!1,p.on.error.fire(d),p.parent?p.parent._reject(d):g&&p.idbtrans&&p.idbtrans.abort(),ne(d)})})}function _n(e,t,r,n,a,c,f,p){return{name:e,keyPath:t,unique:r,multi:n,auto:a,compound:c,src:(r&&!f?"&":"")+(n?"*":"")+(a?"++":"")+Yo(t),type:p}}function Yo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function xn(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:ca(r,function(n){return[n.name,n]})}}function Xa(e){return e.length===1?e[0]:e}var Dt=function(e){try{return e.only([[]]),Dt=function(){return[[]]},[[]]}catch{return Dt=function(){return nt},nt}};function En(e){return e==null?function(){}:typeof e=="string"?Ja(e):function(t){return ke(t,e)}}function Ja(e){var t=e.split(".");return t.length===1?function(r){return r[e]}:function(r){return ke(r,e)}}function zo(e){return[].slice.call(e)}var Za=0;function At(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function es(e,t,r){function n(y,N){var O=zo(y.objectStoreNames);return{schema:{name:y.name,tables:O.map(function(b){return N.objectStore(b)}).map(function(b){var E=b.keyPath,R=b.autoIncrement,C=m(E),S=E==null,T={},D={name:b.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S,compound:C,keyPath:E,autoIncrement:R,unique:!0,extractKey:En(E)},indexes:zo(b.indexNames).map(function(k){return b.index(k)}).map(function(k){var P=k.name,M=k.unique,K=k.multiEntry,B=k.keyPath,H=m(B),L={name:P,compound:H,keyPath:B,unique:M,multiEntry:K,extractKey:En(B)};return T[At(B)]=L,L}),getIndexByKeyPath:function(k){return T[At(k)]}};return T[":id"]=D.primaryKey,E!=null&&(T[At(E)]=D.primaryKey),D})},hasGetAll:O.length>0&&"getAll"in N.objectStore(O[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=y.lower,O=y.upper,b=y.lowerOpen,E=y.upperOpen,R=N===void 0?O===void 0?null:t.upperBound(O,!!E):O===void 0?t.lowerBound(N,!!b):t.bound(N,O,!!b,!!E);return R}function c(y){var N=y.name;function O(R){var C=R.trans,S=R.type,T=R.keys,D=R.values,k=R.range;return new Promise(function(P,M){P=ee(P);var K=C.objectStore(N),B=K.keyPath==null,H=S==="put"||S==="add";if(!H&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var L=(T||D||{length:1}).length;if(T&&D&&T.length!==D.length)throw new Error("Given keys array must have same length as given values array.");if(L===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});var W,q=[],z=[],F=0,te=function(Ce){++F,St(Ce)};if(S==="deleteRange"){if(k.type===4)return P({numFailures:F,failures:z,results:[],lastResult:void 0});k.type===3?q.push(W=K.clear()):q.push(W=K.delete(a(k)))}else{var ce=H?B?[D,T]:[D,null]:[T,null],Ne=ce[0],ge=ce[1];if(H)for(var we=0;we<L;++we)q.push(W=ge&&ge[we]!==void 0?K[S](Ne[we],ge[we]):K[S](Ne[we])),W.onerror=te;else for(var we=0;we<L;++we)q.push(W=K[S](Ne[we])),W.onerror=te}var We=function(Ce){var Pt=Ce.target.result;q.forEach(function(_e,Dr){return _e.error!=null&&(z[Dr]=_e.error)}),P({numFailures:F,failures:z,results:S==="delete"?T:q.map(function(_e){return _e.result}),lastResult:Pt})};W.onerror=function(Ce){te(Ce),We(Ce)},W.onsuccess=We})}function b(R){var C=R.trans,S=R.values,T=R.query,D=R.reverse,k=R.unique;return new Promise(function(P,M){P=ee(P);var K=T.index,B=T.range,H=C.objectStore(N),L=K.isPrimaryKey?H:H.index(K.name),W=D?k?"prevunique":"prev":k?"nextunique":"next",q=S||!("openKeyCursor"in L)?L.openCursor(a(B),W):L.openKeyCursor(a(B),W);q.onerror=Re(M),q.onsuccess=ee(function(z){var F=q.result;if(!F){P(null);return}F.___id=++Za,F.done=!1;var te=F.continue.bind(F),ce=F.continuePrimaryKey;ce&&(ce=ce.bind(F));var Ne=F.advance.bind(F),ge=function(){throw new Error("Cursor not started")},we=function(){throw new Error("Cursor not stopped")};F.trans=C,F.stop=F.continue=F.continuePrimaryKey=F.advance=ge,F.fail=ee(M),F.next=function(){var We=this,Ce=1;return this.start(function(){return Ce--?We.continue():We.stop()}).then(function(){return We})},F.start=function(We){var Ce=new Promise(function(_e,Dr){_e=ee(_e),q.onerror=Re(Dr),F.fail=Dr,F.stop=function(Vs){F.stop=F.continue=F.continuePrimaryKey=F.advance=we,_e(Vs)}}),Pt=function(){if(q.result)try{We()}catch(_e){F.fail(_e)}else F.done=!0,F.start=function(){throw new Error("Cursor behind last entry")},F.stop()};return q.onsuccess=ee(function(_e){q.onsuccess=Pt,Pt()}),F.continue=te,F.continuePrimaryKey=ce,F.advance=Ne,Pt(),Ce},P(F)},M)})}function E(R){return function(C){return new Promise(function(S,T){S=ee(S);var D=C.trans,k=C.values,P=C.limit,M=C.query,K=P===1/0?void 0:P,B=M.index,H=M.range,L=D.objectStore(N),W=B.isPrimaryKey?L:L.index(B.name),q=a(H);if(P===0)return S({result:[]});if(R){var z=k?W.getAll(q,K):W.getAllKeys(q,K);z.onsuccess=function(Ne){return S({result:Ne.target.result})},z.onerror=Re(T)}else{var F=0,te=k||!("openKeyCursor"in W)?W.openCursor(q):W.openKeyCursor(q),ce=[];te.onsuccess=function(Ne){var ge=te.result;if(!ge)return S({result:ce});if(ce.push(k?ge.value:ge.primaryKey),++F===P)return S({result:ce});ge.continue()},te.onerror=Re(T)}})}}return{name:N,schema:y,mutate:O,getMany:function(R){var C=R.trans,S=R.keys;return new Promise(function(T,D){T=ee(T);for(var k=C.objectStore(N),P=S.length,M=new Array(P),K=0,B=0,H,L=function(F){var te=F.target;(M[te._pos]=te.result)!=null,++B===K&&T(M)},W=Re(D),q=0;q<P;++q){var z=S[q];z!=null&&(H=k.get(S[q]),H._pos=q,H.onsuccess=L,H.onerror=W,++K)}K===0&&T(M)})},get:function(R){var C=R.trans,S=R.key;return new Promise(function(T,D){T=ee(T);var k=C.objectStore(N),P=k.get(S);P.onsuccess=function(M){return T(M.target.result)},P.onerror=Re(D)})},query:E(d),openCursor:b,count:function(R){var C=R.query,S=R.trans,T=C.index,D=C.range;return new Promise(function(k,P){var M=S.objectStore(N),K=T.isPrimaryKey?M:M.index(T.name),B=a(D),H=B?K.count(B):K.count();H.onsuccess=ee(function(L){return k(L.target.result)}),H.onerror=Re(P)})}}}var f=n(e,r),p=f.schema,d=f.hasGetAll,g=p.tables.map(function(y){return c(y)}),x={};return g.forEach(function(y){return x[y.name]=y}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(y){var N=x[y];if(!N)throw new Error("Table '".concat(y,"' not found"));return x[y]},MIN_KEY:-1/0,MAX_KEY:Dt(t),schema:p}}function ts(e,t){return t.reduce(function(r,n){var a=n.create;return s(s({},r),a(r))},e)}function rs(e,t,r,n){var a=r.IDBKeyRange;r.indexedDB;var c=ts(es(t,a,n),e.dbcore);return{dbcore:c}}function wr(e,t){var r=t.db,n=rs(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(function(a){var c=a.name;e.core.schema.tables.some(function(f){return f.name===c})&&(a.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=a.core))})}function br(e,t,r,n){r.forEach(function(a){var c=n[a];t.forEach(function(f){var p=tr(f,a);(!p||"value"in p&&p.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?oe(f,a,{get:function(){return this.table(a)},set:function(d){se(this,a,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):f[a]=new e.Table(a,c))})})}function Rn(e,t){t.forEach(function(r){for(var n in r)r[n]instanceof e.Table&&delete r[n]})}function ns(e,t){return e._cfg.version-t._cfg.version}function os(e,t,r,n){var a=e._dbSchema;r.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=xn("$meta",Xo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,a);c.create(r),c._completion.catch(n);var f=c._reject.bind(c),p=$.transless||$;Le(function(){if($.trans=c,$.transless=p,t===0)h(a).forEach(function(d){Cn(r,d,a[d].primKey,a[d].indexes)}),wr(e,r),U.follow(function(){return e.on.populate.fire(c)}).catch(f);else return wr(e,r),as(e,c,t).then(function(d){return ss(e,d,c,r)}).catch(f)})}function is(e,t){Qo(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=xr(e,e.idbdb,t);Er(e,e._dbSchema,t);for(var n=Nn(r,e._dbSchema),a=function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=t.objectStore(g.name);g.add.forEach(function(y){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(y.src)),_r(x,y)})},c=0,f=n.change;c<f.length;c++){var p=f[c],d=a(p);if(typeof d=="object")return d.value}}function as(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(n){return n??r}):U.resolve(r)}function ss(e,t,r,n){var a=[],c=e._versions,f=e._dbSchema=xr(e,e.idbdb,n),p=c.filter(function(g){return g._cfg.version>=t});if(p.length===0)return U.resolve();p.forEach(function(g){a.push(function(){var x=f,y=g._cfg.dbschema;Er(e,x,n),Er(e,y,n),f=e._dbSchema=y;var N=Nn(x,y);N.add.forEach(function(S){Cn(n,S[0],S[1].primKey,S[1].indexes)}),N.change.forEach(function(S){if(S.recreate)throw new V.Upgrade("Not yet support for changing primary key");var T=n.objectStore(S.name);S.add.forEach(function(D){return _r(T,D)}),S.change.forEach(function(D){T.deleteIndex(D.name),_r(T,D)}),S.del.forEach(function(D){return T.deleteIndex(D)})});var O=g._cfg.contentUpgrade;if(O&&g._cfg.version>t){wr(e,n),r._memoizedTables={};var b=wo(y);N.del.forEach(function(S){b[S]=x[S]}),Rn(e,[e.Transaction.prototype]),br(e,[e.Transaction.prototype],h(b),b),r.schema=b;var E=en(O);E&&pt();var R,C=U.follow(function(){if(R=O(r),R&&E){var S=$e.bind(null,null);R.then(S,S)}});return R&&typeof R.then=="function"?U.resolve(R):C.then(function(){return R})}}),a.push(function(x){var y=g._cfg.dbschema;us(y,x),Rn(e,[e.Transaction.prototype]),br(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}),a.push(function(x){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===g._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(y){return y!=="$meta"})):x.objectStore("$meta").put(g._cfg.version,"version"))})});function d(){return a.length?U.resolve(a.shift()(r.idbtrans)).then(d):U.resolve()}return d().then(function(){Qo(f,n)})}function Nn(e,t){var r={del:[],add:[],change:[]},n;for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],c=t[n];if(!a)r.add.push([n,c]);else{var f={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||a.primKey.auto!==c.primKey.auto)f.recreate=!0,r.change.push(f);else{var p=a.idxByName,d=c.idxByName,g=void 0;for(g in p)d[g]||f.del.push(g);for(g in d){var x=p[g],y=d[g];x?x.src!==y.src&&f.change.push(y):f.add.push(y)}(f.del.length>0||f.add.length>0||f.change.length>0)&&r.change.push(f)}}}return r}function Cn(e,t,r,n){var a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(c){return _r(a,c)}),a}function Qo(e,t){h(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(Ee&&console.debug("Dexie: Creating missing table",r),Cn(t,r,e[r].primKey,e[r].indexes))})}function us(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(r){return e[r]==null&&t.db.deleteObjectStore(r)})}function _r(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function xr(e,t,r){var n={},a=rr(t.objectStoreNames,0);return a.forEach(function(c){for(var f=r.objectStore(c),p=f.keyPath,d=_n(Yo(p),p||"",!0,!1,!!f.autoIncrement,p&&typeof p!="string",!0),g=[],x=0;x<f.indexNames.length;++x){var y=f.index(f.indexNames[x]);p=y.keyPath;var N=_n(y.name,p,!!y.unique,!!y.multiEntry,!1,p&&typeof p!="string",!1);g.push(N)}n[c]=xn(c,d,g)}),n}function cs(e,t,r){e.verno=t.version/10;var n=e._dbSchema=xr(e,t,r);e._storeNames=rr(t.objectStoreNames,0),br(e,[e._allTables],h(n),n)}function ls(e,t){var r=xr(e,e.idbdb,t),n=Nn(r,e._dbSchema);return!(n.add.length||n.change.some(function(a){return a.add.length||a.change.length}))}function Er(e,t,r){for(var n=r.db.objectStoreNames,a=0;a<n.length;++a){var c=n[a],f=r.objectStore(c);e._hasGetAll="getAll"in f;for(var p=0;p<f.indexNames.length;++p){var d=f.indexNames[p],g=f.index(d).keyPath,x=typeof g=="string"?g:"["+rr(g).join("+")+"]";if(t[c]){var y=t[c].idxByName[x];y&&(y.name=d,delete t[c].idxByName[x],t[c].idxByName[d]=y)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Xo(e){return e.split(",").map(function(t,r){var n,a=t.split(":"),c=(n=a[1])===null||n===void 0?void 0:n.trim();t=a[0].trim();var f=t.replace(/([&*]|\+\+)/g,""),p=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return _n(f,p||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),m(p),r===0,c)})}var fs=(function(){function e(){}return e.prototype._createTableSchema=function(t,r,n){return xn(t,r,n)},e.prototype._parseIndexSyntax=function(t){return Xo(t)},e.prototype._parseStoresSpec=function(t,r){var n=this;h(t).forEach(function(a){if(t[a]!==null){var c=n._parseIndexSyntax(t[a]),f=c.shift();if(!f)throw new V.Schema("Invalid schema for table "+a+": "+t[a]);if(f.unique=!0,f.multi)throw new V.Schema("Primary key cannot be multiEntry*");c.forEach(function(d){if(d.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")});var p=n._createTableSchema(a,f,c);r[a]=p}})},e.prototype.stores=function(t){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?w(this._cfg.storesSource,t):t;var n=r._versions,a={},c={};return n.forEach(function(f){w(a,f._cfg.storesSource),c=f._cfg.dbschema={},f._parseStoresSpec(a,c)}),r._dbSchema=c,Rn(r,[r._allTables,r,r.Transaction.prototype]),br(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],h(c),c),r._storeNames=h(c),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=nn(this._cfg.contentUpgrade||J,t),this},e})();function hs(e){return kt(fs.prototype,function(r){this.db=e,this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function kn(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new De(pr,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function Sn(e){return e&&typeof e.databases=="function"}function ps(e){var t=e.indexedDB,r=e.IDBKeyRange;return Sn(t)?Promise.resolve(t.databases()).then(function(n){return n.map(function(a){return a.name}).filter(function(a){return a!==pr})}):kn(t,r).toCollection().primaryKeys()}function ds(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!Sn(r)&&t!==pr&&kn(r,n).put({name:t}).catch(J)}function ms(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!Sn(r)&&t!==pr&&kn(r,n).delete(t).catch(J)}function Tn(e){return Le(function(){return $.letThrough=!0,e()})}function gs(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(r){var n=function(){return indexedDB.databases().finally(r)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)})}var Dn;function An(e){return!("from"in e)}var ue=function(e,t){if(this)w(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var r=new ue;return e&&"d"in e&&w(r,e),r}};X(ue.prototype,(Dn={add:function(e){return It(this,e),this},addKey:function(e){return Ot(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(r){return Ot(t,r,r)}),this},hasKey:function(e){var t=Rr(this).next(e).value;return t&&Y(t.from,e)<=0&&Y(t.to,e)>=0}},Dn[Zr]=function(){return Rr(this)},Dn));function Ot(e,t,r){var n=Y(t,r);if(!isNaN(n)){if(n>0)throw RangeError();if(An(e))return w(e,{from:t,to:r,d:1});var a=e.l,c=e.r;if(Y(r,e.from)<0)return a?Ot(a,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Zo(e);if(Y(t,e.to)>0)return c?Ot(c,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Zo(e);Y(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),Y(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);var f=!e.r;a&&!e.l&&It(e,a),c&&f&&It(e,c)}}function It(e,t){function r(n,a){var c=a.from,f=a.to,p=a.l,d=a.r;Ot(n,c,f),p&&r(n,p),d&&r(n,d)}An(t)||r(e,t)}function Jo(e,t){var r=Rr(t),n=r.next();if(n.done)return!1;for(var a=n.value,c=Rr(e),f=c.next(a.from),p=f.value;!n.done&&!f.done;){if(Y(p.from,a.to)<=0&&Y(p.to,a.from)>=0)return!0;Y(a.from,p.from)<0?a=(n=r.next(p.from)).value:p=(f=c.next(a.from)).value}return!1}function Rr(e){var t=An(e)?null:{s:0,n:e};return{next:function(r){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Y(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Y(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Zo(e){var t,r,n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),a=n>1?"r":n<-1?"l":"";if(a){var c=a==="r"?"l":"r",f=s({},e),p=e[a];e.from=p.from,e.to=p.to,e[a]=p[a],f[a]=p[c],e[c]=f,f.d=ei(f)}e.d=ei(e)}function ei(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function Nr(e,t){return h(t).forEach(function(r){e[r]?It(e[r],t[r]):e[r]=xo(t[r])}),e}function On(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&Jo(t[r],e[r])})}var it={},In={},Pn=!1;function Cr(e,t){Nr(In,e),Pn||(Pn=!0,setTimeout(function(){Pn=!1;var r=In;In={},Kn(r,!1)},0))}function Kn(e,t){t===void 0&&(t=!1);var r=new Set;if(e.all)for(var n=0,a=Object.values(it);n<a.length;n++){var c=a[n];ti(c,e,r,t)}else for(var f in e){var p=/^idb\:\/\/(.*)\/(.*)\//.exec(f);if(p){var d=p[1],g=p[2],c=it["idb://".concat(d,"/").concat(g)];c&&ti(c,e,r,t)}}r.forEach(function(x){return x()})}function ti(e,t,r,n){for(var a=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var p=f[c],d=p[0],g=p[1],x=[],y=0,N=g;y<N.length;y++){var O=N[y];On(t,O.obsSet)?O.subscribers.forEach(function(C){return r.add(C)}):n&&x.push(O)}n&&a.push([d,x])}if(n)for(var b=0,E=a;b<E.length;b++){var R=E[b],d=R[0],x=R[1];e.queries.query[d]=x}}function ys(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ne(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,a=Math.round(e.verno*10),c=!1;function f(){if(t.openCanceller!==n)throw new V.DatabaseClosed("db.open() was cancelled")}var p=t.dbReadyResolve,d=null,g=!1,x=function(){return new U(function(y,N){if(f(),!r)throw new V.MissingAPI;var O=e.name,b=t.autoSchema||!a?r.open(O):r.open(O,a);if(!b)throw new V.MissingAPI;b.onerror=Re(N),b.onblocked=ee(e._fireOnBlocked),b.onupgradeneeded=ee(function(E){if(d=b.transaction,t.autoSchema&&!e._options.allowEmptyDB){b.onerror=St,d.abort(),b.result.close();var R=r.deleteDatabase(O);R.onsuccess=R.onerror=ee(function(){N(new V.NoSuchDatabase("Database ".concat(O," doesnt exist")))})}else{d.onerror=Re(N);var C=E.oldVersion>Math.pow(2,62)?0:E.oldVersion;g=C<1,e.idbdb=b.result,c&&is(e,d),os(e,C/10,d,N)}},N),b.onsuccess=ee(function(){d=null;var E=e.idbdb=b.result,R=rr(E.objectStoreNames);if(R.length>0)try{var C=E.transaction(Xa(R),"readonly");if(t.autoSchema)cs(e,E,C);else if(Er(e,e._dbSchema,C),!ls(e,C)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),E.close(),a=E.version+1,c=!0,y(x());wr(e,C)}catch{}dt.push(e),E.onversionchange=ee(function(S){t.vcFired=!0,e.on("versionchange").fire(S)}),E.onclose=ee(function(){e.close({disableAutoOpen:!1})}),g&&ds(e._deps,O),y()},N)}).catch(function(y){switch(y?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(a>0)return a=0,x();break}return U.reject(y)})};return U.race([n,(typeof navigator>"u"?U.resolve():gs()).then(x)]).then(function(){return f(),t.onReadyBeingFired=[],U.resolve(Tn(function(){return e.on.ready.fire(e.vip)})).then(function y(){if(t.onReadyBeingFired.length>0){var N=t.onReadyBeingFired.reduce(nn,J);return t.onReadyBeingFired=[],U.resolve(Tn(function(){return N(e.vip)})).then(y)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(y){t.dbOpenError=y;try{d&&d.abort()}catch{}return n===t.openCanceller&&e._close(),ne(y)}).finally(function(){t.openComplete=!0,p()}).then(function(){if(g){var y={};e.tables.forEach(function(N){N.schema.indexes.forEach(function(O){O.name&&(y["idb://".concat(e.name,"/").concat(N.name,"/").concat(O.name)]=new ue(-1/0,[[[]]]))}),y["idb://".concat(e.name,"/").concat(N.name,"/")]=y["idb://".concat(e.name,"/").concat(N.name,"/:dels")]=new ue(-1/0,[[[]]])}),Be(Tt).fire(y),Kn(y,!0)}return e})}function Un(e){var t=function(f){return e.next(f)},r=function(f){return e.throw(f)},n=c(t),a=c(r);function c(f){return function(p){var d=f(p),g=d.value;return d.done?g:!g||typeof g.then!="function"?m(g)?Promise.all(g).then(n,a):n(g):g.then(n,a)}}return c(t)()}function vs(e,t,r){var n=arguments.length;if(n<2)throw new V.InvalidArgument("Too few arguments");for(var a=new Array(n-1);--n;)a[n-1]=arguments[n];r=a.pop();var c=bo(a);return[e,c,r]}function ri(e,t,r,n,a){return U.resolve().then(function(){var c=$.transless||$,f=e._createTransaction(t,r,e._dbSchema,n);f.explicit=!0;var p={trans:f,transless:c};if(n)f.idbtrans=n.idbtrans;else try{f.create(),f.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(y){return y.name===rn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return ri(e,t,r,null,a)})):ne(y)}var d=en(a);d&&pt();var g,x=U.follow(function(){if(g=a.call(f,f),g)if(d){var y=$e.bind(null,null);g.then(y,y)}else typeof g.next=="function"&&typeof g.throw=="function"&&(g=Un(g))},p);return(g&&typeof g.then=="function"?U.resolve(g).then(function(y){return f.active?y:ne(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return g})).then(function(y){return n&&f._resolve(),f._completion.then(function(){return y})}).catch(function(y){return f._reject(y),ne(y)})})}function kr(e,t,r){for(var n=m(e)?e.slice():[e],a=0;a<r;++a)n.push(t);return n}function ws(e){return s(s({},e),{table:function(t){var r=e.table(t),n=r.schema,a={},c=[];function f(E,R,C){var S=At(E),T=a[S]=a[S]||[],D=E==null?0:typeof E=="string"?1:E.length,k=R>0,P=s(s({},C),{name:k?"".concat(S,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:k,keyTail:R,keyLength:D,extractKey:En(E),unique:!k&&C.unique});if(T.push(P),P.isPrimaryKey||c.push(P),D>1){var M=D===2?E[0]:E.slice(0,D-1);f(M,R+1,C)}return T.sort(function(K,B){return K.keyTail-B.keyTail}),P}var p=f(n.primaryKey.keyPath,0,n.primaryKey);a[":id"]=[p];for(var d=0,g=n.indexes;d<g.length;d++){var x=g[d];f(x.keyPath,0,x)}function y(E){var R=a[At(E)];return R&&R[0]}function N(E,R){return{type:E.type===1?2:E.type,lower:kr(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,R),lowerOpen:!0,upper:kr(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,R),upperOpen:!0}}function O(E){var R=E.query.index;return R.isVirtual?s(s({},E),{query:{index:R.lowLevelIndex,range:N(E.query.range,R.keyTail)}}):E}var b=s(s({},r),{schema:s(s({},n),{primaryKey:p,indexes:c,getIndexByKeyPath:y}),count:function(E){return r.count(O(E))},query:function(E){return r.query(O(E))},openCursor:function(E){var R=E.query.index,C=R.keyTail,S=R.isVirtual,T=R.keyLength;if(!S)return r.openCursor(E);function D(k){function P(K){K!=null?k.continue(kr(K,E.reverse?e.MAX_KEY:e.MIN_KEY,C)):E.unique?k.continue(k.key.slice(0,T).concat(E.reverse?e.MIN_KEY:e.MAX_KEY,C)):k.continue()}var M=Object.create(k,{continue:{value:P},continuePrimaryKey:{value:function(K,B){k.continuePrimaryKey(kr(K,e.MAX_KEY,C),B)}},primaryKey:{get:function(){return k.primaryKey}},key:{get:function(){var K=k.key;return T===1?K[0]:K.slice(0,T)}},value:{get:function(){return k.value}}});return M}return r.openCursor(O(E)).then(function(k){return k&&D(k)})}});return b}})}var bs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ws};function Mn(e,t,r,n){return r=r||{},n=n||"",h(e).forEach(function(a){if(!Q(t,a))r[n+a]=void 0;else{var c=e[a],f=t[a];if(typeof c=="object"&&typeof f=="object"&&c&&f){var p=Jr(c),d=Jr(f);p!==d?r[n+a]=t[a]:p==="Object"?Mn(c,f,r,n+a+"."):c!==f&&(r[n+a]=t[a])}else c!==f&&(r[n+a]=t[a])}}),h(t).forEach(function(a){Q(e,a)||(r[n+a]=t[a])}),r}function Ln(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var _s={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var r=e.table(t),n=r.schema.primaryKey,a=s(s({},r),{mutate:function(c){var f=$.trans,p=f.table(t).hook,d=p.deleting,g=p.creating,x=p.updating;switch(c.type){case"add":if(g.fire===J)break;return f._promise("readwrite",function(){return y(c)},!0);case"put":if(g.fire===J&&x.fire===J)break;return f._promise("readwrite",function(){return y(c)},!0);case"delete":if(d.fire===J)break;return f._promise("readwrite",function(){return y(c)},!0);case"deleteRange":if(d.fire===J)break;return f._promise("readwrite",function(){return N(c)},!0)}return r.mutate(c);function y(b){var E=$.trans,R=b.keys||Ln(n,b);if(!R)throw new Error("Keys missing");return b=b.type==="add"||b.type==="put"?s(s({},b),{keys:R}):s({},b),b.type!=="delete"&&(b.values=u([],b.values,!0)),b.keys&&(b.keys=u([],b.keys,!0)),xs(r,b,R).then(function(C){var S=R.map(function(T,D){var k=C[D],P={onerror:null,onsuccess:null};if(b.type==="delete")d.fire.call(P,T,k,E);else if(b.type==="add"||k===void 0){var M=g.fire.call(P,T,b.values[D],E);T==null&&M!=null&&(T=M,b.keys[D]=T,n.outbound||me(b.values[D],n.keyPath,T))}else{var K=Mn(k,b.values[D]),B=x.fire.call(P,K,T,k,E);if(B){var H=b.values[D];Object.keys(B).forEach(function(L){Q(H,L)?H[L]=B[L]:me(H,L,B[L])})}}return P});return r.mutate(b).then(function(T){for(var D=T.failures,k=T.results,P=T.numFailures,M=T.lastResult,K=0;K<R.length;++K){var B=k?k[K]:R[K],H=S[K];B==null?H.onerror&&H.onerror(D[K]):H.onsuccess&&H.onsuccess(b.type==="put"&&C[K]?b.values[K]:B)}return{failures:D,results:k,numFailures:P,lastResult:M}}).catch(function(T){return S.forEach(function(D){return D.onerror&&D.onerror(T)}),Promise.reject(T)})})}function N(b){return O(b.trans,b.range,1e4)}function O(b,E,R){return r.query({trans:b,values:!1,query:{index:n,range:E},limit:R}).then(function(C){var S=C.result;return y({type:"delete",keys:S,trans:b}).then(function(T){return T.numFailures>0?Promise.reject(T.failures[0]):S.length<R?{failures:[],numFailures:0,lastResult:void 0}:O(b,s(s({},E),{lower:S[S.length-1],lowerOpen:!0}),R)})})}}});return a}})}};function xs(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function ni(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],a=0,c=0;a<t.keys.length&&c<e.length;++a)Y(t.keys[a],e[c])===0&&(n.push(r?Qe(t.values[a]):t.values[a]),++c);return n.length===e.length?n:null}catch{return null}}var Es={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return s(s({},r),{getMany:function(n){if(!n.cache)return r.getMany(n);var a=ni(n.keys,n.trans._cache,n.cache==="clone");return a?U.resolve(a):r.getMany(n).then(function(c){return n.trans._cache={keys:n.keys,values:n.cache==="clone"?Qe(c):c},c})},mutate:function(n){return n.type!=="add"&&(n.trans._cache=null),r.mutate(n)}})}}}};function oi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function ii(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Rs={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new ue(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(n,a,c){if($.subscr&&a!=="readonly")throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return e.transaction(n,a,c)},table:function(n){var a=e.table(n),c=a.schema,f=c.primaryKey,p=c.indexes,d=f.extractKey,g=f.outbound,x=f.autoIncrement&&p.filter(function(b){return b.compound&&b.keyPath.includes(f.keyPath)}),y=s(s({},a),{mutate:function(b){var E,R,C=b.trans,S=b.mutatedParts||(b.mutatedParts={}),T=function(q){var z="idb://".concat(t,"/").concat(n,"/").concat(q);return S[z]||(S[z]=new ue)},D=T(""),k=T(":dels"),P=b.type,M=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[Ln(f,b).filter(function(q){return q}),b.values]:[],K=M[0],B=M[1],H=b.trans._cache;if(m(K)){D.addKeys(K);var L=P==="delete"||K.length===B.length?ni(K,H):null;L||k.addKeys(K),(L||B)&&Ns(T,c,L,B)}else if(K){var W={from:(E=K.lower)!==null&&E!==void 0?E:e.MIN_KEY,to:(R=K.upper)!==null&&R!==void 0?R:e.MAX_KEY};k.add(W),D.add(W)}else D.add(r),k.add(r),c.indexes.forEach(function(q){return T(q.name).add(r)});return a.mutate(b).then(function(q){return K&&(b.type==="add"||b.type==="put")&&(D.addKeys(q.results),x&&x.forEach(function(z){for(var F=b.values.map(function(ge){return z.extractKey(ge)}),te=z.keyPath.findIndex(function(ge){return ge===f.keyPath}),ce=0,Ne=q.results.length;ce<Ne;++ce)F[ce][te]=q.results[ce];T(z.name).addKeys(F)})),C.mutatedParts=Nr(C.mutatedParts||{},S),q})}}),N=function(b){var E,R,C=b.query,S=C.index,T=C.range;return[S,new ue((E=T.lower)!==null&&E!==void 0?E:e.MIN_KEY,(R=T.upper)!==null&&R!==void 0?R:e.MAX_KEY)]},O={get:function(b){return[f,new ue(b.key)]},getMany:function(b){return[f,new ue().addKeys(b.keys)]},count:N,query:N,openCursor:N};return h(O).forEach(function(b){y[b]=function(E){var R=$.subscr,C=!!R,S=oi($,a)&&ii(b,E),T=S?E.obsSet={}:R;if(C){var D=function(L){var W="idb://".concat(t,"/").concat(n,"/").concat(L);return T[W]||(T[W]=new ue)},k=D(""),P=D(":dels"),M=O[b](E),K=M[0],B=M[1];if(b==="query"&&K.isPrimaryKey&&!E.values?P.add(B):D(K.name||"").add(B),!K.isPrimaryKey)if(b==="count")P.add(r);else{var H=b==="query"&&g&&E.values&&a.query(s(s({},E),{values:!1}));return a[b].apply(this,arguments).then(function(L){if(b==="query"){if(g&&E.values)return H.then(function(F){var te=F.result;return k.addKeys(te),L});var W=E.values?L.result.map(d):L.result;E.values?k.addKeys(W):P.addKeys(W)}else if(b==="openCursor"){var q=L,z=E.values;return q&&Object.create(q,{key:{get:function(){return P.addKey(q.primaryKey),q.key}},primaryKey:{get:function(){var F=q.primaryKey;return P.addKey(F),F}},value:{get:function(){return z&&k.addKey(q.primaryKey),q.value}}})}return L})}}return a[b].apply(this,arguments)}}),y}})}};function Ns(e,t,r,n){function a(c){var f=e(c.name||"");function p(g){return g!=null?c.extractKey(g):null}var d=function(g){return c.multiEntry&&m(g)?g.forEach(function(x){return f.addKey(x)}):f.addKey(g)};(r||n).forEach(function(g,x){var y=r&&p(r[x]),N=n&&p(n[x]);Y(y,N)!==0&&(y!=null&&d(y),N!=null&&d(N))})}t.indexes.forEach(a)}function ai(e,t,r){if(r.numFailures===0)return t;if(t.type==="deleteRange")return null;var n=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===n)return null;var a=s({},t);return m(a.keys)&&(a.keys=a.keys.filter(function(c,f){return!(f in r.failures)})),"values"in a&&m(a.values)&&(a.values=a.values.filter(function(c,f){return!(f in r.failures)})),a}function Cs(e,t){return t.lower===void 0?!0:t.lowerOpen?Y(e,t.lower)>0:Y(e,t.lower)>=0}function ks(e,t){return t.upper===void 0?!0:t.upperOpen?Y(e,t.upper)<0:Y(e,t.upper)<=0}function $n(e,t){return Cs(e,t)&&ks(e,t)}function si(e,t,r,n,a,c){if(!r||r.length===0)return e;var f=t.query.index,p=f.multiEntry,d=t.query.range,g=n.schema.primaryKey,x=g.extractKey,y=f.extractKey,N=(f.lowLevelIndex||f).extractKey,O=r.reduce(function(b,E){var R=b,C=[];if(E.type==="add"||E.type==="put")for(var S=new ue,T=E.values.length-1;T>=0;--T){var D=E.values[T],k=x(D);if(!S.hasKey(k)){var P=y(D);(p&&m(P)?P.some(function(L){return $n(L,d)}):$n(P,d))&&(S.addKey(k),C.push(D))}}switch(E.type){case"add":{var M=new ue().addKeys(t.values?b.map(function(L){return x(L)}):b);R=b.concat(t.values?C.filter(function(L){var W=x(L);return M.hasKey(W)?!1:(M.addKey(W),!0)}):C.map(function(L){return x(L)}).filter(function(L){return M.hasKey(L)?!1:(M.addKey(L),!0)}));break}case"put":{var K=new ue().addKeys(E.values.map(function(L){return x(L)}));R=b.filter(function(L){return!K.hasKey(t.values?x(L):L)}).concat(t.values?C:C.map(function(L){return x(L)}));break}case"delete":var B=new ue().addKeys(E.keys);R=b.filter(function(L){return!B.hasKey(t.values?x(L):L)});break;case"deleteRange":var H=E.range;R=b.filter(function(L){return!$n(x(L),H)});break}return R},e);return O===e?e:(O.sort(function(b,E){return Y(N(b),N(E))||Y(x(b),x(E))}),t.limit&&t.limit<1/0&&(O.length>t.limit?O.length=t.limit:e.length===t.limit&&O.length<t.limit&&(a.dirty=!0)),c?Object.freeze(O):O)}function ui(e,t){return Y(e.lower,t.lower)===0&&Y(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ss(e,t,r,n){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var a=Y(e,t);if(a===0){if(r&&n)return 0;if(r)return 1;if(n)return-1}return a}function Ts(e,t,r,n){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var a=Y(e,t);if(a===0){if(r&&n)return 0;if(r)return-1;if(n)return 1}return a}function Ds(e,t){return Ss(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Ts(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function As(e,t,r,n){var a=it["idb://".concat(e,"/").concat(t)];if(!a)return[];var c=a.queries[r];if(!c)return[null,!1,a,null];var f=n.query?n.query.index.name:null,p=c[f||""];if(!p)return[null,!1,a,null];switch(r){case"query":var d=p.find(function(y){return y.req.limit===n.limit&&y.req.values===n.values&&ui(y.req.query.range,n.query.range)});if(d)return[d,!0,a,p];var g=p.find(function(y){var N="limit"in y.req?y.req.limit:1/0;return N>=n.limit&&(n.values?y.req.values:!0)&&Ds(y.req.query.range,n.query.range)});return[g,!1,a,p];case"count":var x=p.find(function(y){return ui(y.req.query.range,n.query.range)});return[x,!!x,a,p]}}function Os(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){e.subscribers.delete(r),e.subscribers.size===0&&Is(e,t)})}function Is(e,t){setTimeout(function(){e.subscribers.size===0&&Xe(t,e)},3e3)}var Ps={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=s(s({},e),{transaction:function(n,a,c){var f=e.transaction(n,a,c);if(a==="readwrite"){var p=new AbortController,d=p.signal,g=function(x){return function(){if(p.abort(),a==="readwrite"){for(var y=new Set,N=0,O=n;N<O.length;N++){var b=O[N],E=it["idb://".concat(t,"/").concat(b)];if(E){var R=e.table(b),C=E.optimisticOps.filter(function(z){return z.trans===f});if(f._explicit&&x&&f.mutatedParts)for(var S=0,T=Object.values(E.queries.query);S<T.length;S++)for(var D=T[S],k=0,P=D.slice();k<P.length;k++){var M=P[k];On(M.obsSet,f.mutatedParts)&&(Xe(D,M),M.subscribers.forEach(function(z){return y.add(z)}))}else if(C.length>0){E.optimisticOps=E.optimisticOps.filter(function(z){return z.trans!==f});for(var K=0,B=Object.values(E.queries.query);K<B.length;K++)for(var D=B[K],H=0,L=D.slice();H<L.length;H++){var M=L[H];if(M.res!=null&&f.mutatedParts)if(x&&!M.dirty){var W=Object.isFrozen(M.res),q=si(M.res,M.req,C,R,M,W);M.dirty?(Xe(D,M),M.subscribers.forEach(function(te){return y.add(te)})):q!==M.res&&(M.res=q,M.promise=U.resolve({result:q}))}else M.dirty&&Xe(D,M),M.subscribers.forEach(function(te){return y.add(te)})}}}}y.forEach(function(z){return z()})}}};f.addEventListener("abort",g(!1),{signal:d}),f.addEventListener("error",g(!1),{signal:d}),f.addEventListener("complete",g(!0),{signal:d})}return f},table:function(n){var a=e.table(n),c=a.schema.primaryKey,f=s(s({},a),{mutate:function(p){var d=$.trans;if(c.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return a.mutate(p);var g=it["idb://".concat(t,"/").concat(n)];if(!g)return a.mutate(p);var x=a.mutate(p);return(p.type==="add"||p.type==="put")&&(p.values.length>=50||Ln(c,p).some(function(y){return y==null}))?x.then(function(y){var N=s(s({},p),{values:p.values.map(function(b,E){var R;if(y.failures[E])return b;var C=!((R=c.keyPath)===null||R===void 0)&&R.includes(".")?Qe(b):s({},b);return me(C,c.keyPath,y.results[E]),C})}),O=ai(g,N,y);g.optimisticOps.push(O),queueMicrotask(function(){return p.mutatedParts&&Cr(p.mutatedParts)})}):(g.optimisticOps.push(p),p.mutatedParts&&Cr(p.mutatedParts),x.then(function(y){if(y.numFailures>0){Xe(g.optimisticOps,p);var N=ai(g,p,y);N&&g.optimisticOps.push(N),p.mutatedParts&&Cr(p.mutatedParts)}}),x.catch(function(){Xe(g.optimisticOps,p),p.mutatedParts&&Cr(p.mutatedParts)})),x},query:function(p){var d;if(!oi($,a)||!ii("query",p))return a.query(p);var g=((d=$.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable",x=$,y=x.requery,N=x.signal,O=As(t,n,"query",p),b=O[0],E=O[1],R=O[2],C=O[3];if(b&&E)b.obsSet=p.obsSet;else{var S=a.query(p).then(function(T){var D=T.result;if(b&&(b.res=D),g){for(var k=0,P=D.length;k<P;++k)Object.freeze(D[k]);Object.freeze(D)}else T.result=Qe(D);return T}).catch(function(T){return C&&b&&Xe(C,b),Promise.reject(T)});b={obsSet:p.obsSet,promise:S,subscribers:new Set,type:"query",req:p,dirty:!1},C?C.push(b):(C=[b],R||(R=it["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),R.queries.query[p.query.index.name||""]=C)}return Os(b,C,y,N),b.promise.then(function(T){return{result:si(T.result,p,R?.optimisticOps,a,b,g)}})}});return f}});return r}};function Sr(e,t){return new Proxy(e,{get:function(r,n,a){return n==="db"?t:Reflect.get(r,n,a)}})}var De=(function(){function e(t,r){var n=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=r=s({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var c=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J,dbReadyPromise:null,cancelOpen:J,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};f.dbReadyPromise=new U(function(d){f.dbReadyResolve=d}),f.openCanceller=new U(function(d,g){f.cancelOpen=g}),this._state=f,this.name=t,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[nn,J]}),this.once=function(d,g){var x=function(){for(var y=[],N=0;N<arguments.length;N++)y[N]=arguments[N];n.on(d).unsubscribe(x),g.apply(n,y)};return n.on(d,x)},this.on.ready.subscribe=yo(this.on.ready.subscribe,function(d){return function(g,x){e.vip(function(){var y=n._state;if(y.openComplete)y.dbOpenError||U.resolve().then(g),x&&d(g);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(g),x&&d(g);else{d(g);var N=n;x||d(function O(){N.on.ready.unsubscribe(g),N.on.ready.unsubscribe(O)})}})}}),this.Collection=Ba(this),this.Table=$a(this),this.Transaction=Qa(this),this.Version=hs(this),this.WhereClause=Ya(this),this.on("versionchange",function(d){d.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=Dt(r.IDBKeyRange),this._createTransaction=function(d,g,x,y){return new n.Transaction(d,g,x,n._options.chromeTransactionDurability,y)},this._fireOnBlocked=function(d){n.on("blocked").fire(d),dt.filter(function(g){return g.name===n.name&&g!==n&&!g._state.vcFired}).map(function(g){return g.on("versionchange").fire(d)})},this.use(Es),this.use(Ps),this.use(Rs),this.use(bs),this.use(_s);var p=new Proxy(this,{get:function(d,g,x){if(g==="_vip")return!0;if(g==="table")return function(N){return Sr(n.table(N),p)};var y=Reflect.get(d,g,x);return y instanceof Bo?Sr(y,p):g==="tables"?y.map(function(N){return Sr(N,p)}):g==="_createTransaction"?function(){var N=y.apply(this,arguments);return Sr(N,p)}:y}});this.vip=p,c.forEach(function(d){return d(n)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new V.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var r=this._versions,n=r.filter(function(a){return a._cfg.version===t})[0];return n||(n=new this.Version(t),r.push(n),r.sort(ns),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(t){var r=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?t():new U(function(n,a){if(r._state.openComplete)return a(new V.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen){a(new V.DatabaseClosed);return}r.open().catch(J)}r._state.dbReadyPromise.then(n,a)}).then(t)},e.prototype.use=function(t){var r=t.stack,n=t.create,a=t.level,c=t.name;c&&this.unuse({stack:r,name:c});var f=this._middlewares[r]||(this._middlewares[r]=[]);return f.push({stack:r,create:n,level:a??10,name:c}),f.sort(function(p,d){return p.level-d.level}),this},e.prototype.unuse=function(t){var r=t.stack,n=t.name,a=t.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return a?c.create!==a:n?c.name!==n:!1})),this},e.prototype.open=function(){var t=this;return rt(Me,function(){return ys(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,r=dt.indexOf(this);if(r>=0&&dt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new U(function(n){t.dbReadyResolve=n}),t.openCanceller=new U(function(n,a){t.cancelOpen=a}))},e.prototype.close=function(t){var r=t===void 0?{disableAutoOpen:!0}:t,n=r.disableAutoOpen,a=this._state;n?(a.isBeingOpened&&a.cancelOpen(new V.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new V.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},e.prototype.delete=function(t){var r=this;t===void 0&&(t={disableAutoOpen:!0});var n=arguments.length>0&&typeof arguments[0]!="object",a=this._state;return new U(function(c,f){var p=function(){r.close(t);var d=r._deps.indexedDB.deleteDatabase(r.name);d.onsuccess=ee(function(){ms(r._deps,r.name),c()}),d.onerror=Re(f),d.onblocked=r._fireOnBlocked};if(n)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(p):p()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return h(this._allTables).map(function(r){return t._allTables[r]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=vs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,r,n){var a=this,c=$.trans;(!c||c.db!==this||t.indexOf("!")!==-1)&&(c=null);var f=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var p,d;try{if(d=r.map(function(x){var y=x instanceof a.Table?x.name:x;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),t=="r"||t===gn)p=gn;else if(t=="rw"||t==yn)p=yn;else throw new V.InvalidArgument("Invalid transaction mode: "+t);if(c){if(c.mode===gn&&p===yn)if(f)c=null;else throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&d.forEach(function(x){if(c&&c.storeNames.indexOf(x)===-1)if(f)c=null;else throw new V.SubTransaction("Table "+x+" not included in parent transaction.")}),f&&c&&!c.active&&(c=null)}}catch(x){return c?c._promise(null,function(y,N){N(x)}):ne(x)}var g=ri.bind(null,this,p,d,c,n);return c?c._promise(p,g,"lock"):$.trans?rt($.transless,function(){return a._whenReady(g)}):this._whenReady(g)},e.prototype.table=function(t){if(!Q(this._allTables,t))throw new V.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),Ks=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Us=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,r,n){return this._subscribe(!t||typeof t=="function"?{next:t,error:r,complete:n}:t)},e.prototype[Ks]=function(){return this},e})(),Tr;try{Tr={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Tr={indexedDB:null,IDBKeyRange:null}}function ci(e){var t=!1,r,n=new Us(function(a){var c=en(e);function f(C){var S=ft();try{c&&pt();var T=Le(e,C);return c&&(T=T.finally($e)),T}finally{S&&ht()}}var p=!1,d,g={},x={},y={get closed(){return p},unsubscribe:function(){p||(p=!0,d&&d.abort(),N&&Be.storagemutated.unsubscribe(E))}};a.start&&a.start(y);var N=!1,O=function(){return pn(R)};function b(){return On(x,g)}var E=function(C){Nr(g,C),b()&&O()},R=function(){if(!(p||!Tr.indexedDB)){g={};var C={};d&&d.abort(),d=new AbortController;var S={subscr:C,signal:d.signal,requery:O,querier:e,trans:null},T=f(S);Promise.resolve(T).then(function(D){t=!0,r=D,!(p||S.signal.aborted)&&(g={},x=C,!pa(x)&&!N&&(Be(Tt,E),N=!0),pn(function(){return!p&&a.next&&a.next(D)}))},function(D){t=!1,["DatabaseClosedError","AbortError"].includes(D?.name)||p||pn(function(){p||a.error&&a.error(D)})})}};return setTimeout(O,0),y});return n.hasValue=function(){return t},n.getValue=function(){return r},n}var at=De;X(at,s(s({},or),{delete:function(e){var t=new at(e,{addons:[]});return t.delete()},exists:function(e){return new at(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return ps(at.dependencies).then(e)}catch{return ne(new V.MissingAPI)}},defineClass:function(){function e(t){w(this,t)}return e},ignoreTransaction:function(e){return $.trans?rt($.transless,e):e()},vip:Tn,async:function(e){return function(){try{var t=Un(e.apply(this,arguments));return!t||typeof t.then!="function"?U.resolve(t):t}catch(r){return ne(r)}}},spawn:function(e,t,r){try{var n=Un(e.apply(r,t||[]));return!n||typeof n.then!="function"?U.resolve(n):n}catch(a){return ne(a)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(e,t){var r=U.resolve(typeof e=="function"?at.ignoreTransaction(e):e).timeout(t||6e4);return $.trans?$.trans.waitFor(r):r},Promise:U,debug:{get:function(){return Ee},set:function(e){Co(e)}},derive:Z,extend:w,props:X,override:yo,Events:Ct,on:Be,liveQuery:ci,extendObservabilitySet:Nr,getByKeyPath:ke,setByKeyPath:me,delByKeyPath:la,shallowClone:wo,deepClone:Qe,getObjectDiff:Mn,cmp:Y,asap:vo,minKey:mn,addons:[],connections:dt,errnames:rn,dependencies:Tr,cache:it,semVer:Ko,version:Ko.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,r*2)})})),at.maxKey=Dt(at.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Be(Tt,function(e){if(!qe){var t;t=new CustomEvent(bn,{detail:e}),qe=!0,dispatchEvent(t),qe=!1}}),addEventListener(bn,function(e){var t=e.detail;qe||Fn(t)}));function Fn(e){var t=qe;try{qe=!0,Be.storagemutated.fire(e),Kn(e,!0)}finally{qe=t}}var qe=!1,je,Vn=function(){};typeof BroadcastChannel<"u"&&(Vn=function(){je=new BroadcastChannel(bn),je.onmessage=function(e){return e.data&&Fn(e.data)}},Vn(),typeof je.unref=="function"&&je.unref(),Be(Tt,function(e){qe||je.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!De.disableBfCache&&e.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),je?.close();for(var t=0,r=dt;t<r.length;t++){var n=r[t];n.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!De.disableBfCache&&e.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Vn(),Fn({all:new ue(-1/0,[[]])}))}));function Ms(e){return new Nt({add:e})}function Ls(e){return new Nt({remove:e})}function $s(e,t){return new Nt({replacePrefix:[e,t]})}U.rejectionMapper=wa,Co(Ee);var Fs=Object.freeze({__proto__:null,Dexie:De,liveQuery:ci,Entity:Lo,cmp:Y,PropModification:Nt,replacePrefix:$s,add:Ms,remove:Ls,default:De,RangeSet:ue,mergeRanges:It,rangesOverlap:Jo});return s(De,Fs,{default:De}),De}))});var Ii,Pi=re(()=>{v();Ii="ffffffff-ffff-ffff-ffff-ffffffffffff"});var Ki,Ui=re(()=>{v();Ki="00000000-0000-0000-0000-000000000000"});var Mi,Li=re(()=>{v();Mi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function hu(o){return typeof o=="string"&&Mi.test(o)}var Ye,zt=re(()=>{v();Li();Ye=hu});function pu(o){if(!Ye(o))throw TypeError("Invalid UUID");let i;return Uint8Array.of((i=parseInt(o.slice(0,8),16))>>>24,i>>>16&255,i>>>8&255,i&255,(i=parseInt(o.slice(9,13),16))>>>8,i&255,(i=parseInt(o.slice(14,18),16))>>>8,i&255,(i=parseInt(o.slice(19,23),16))>>>8,i&255,(i=parseInt(o.slice(24,36),16))/1099511627776&255,i/4294967296&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255)}var Pe,Qt=re(()=>{v();zt();Pe=pu});function de(o,i=0){return(ae[o[i+0]]+ae[o[i+1]]+ae[o[i+2]]+ae[o[i+3]]+"-"+ae[o[i+4]]+ae[o[i+5]]+"-"+ae[o[i+6]]+ae[o[i+7]]+"-"+ae[o[i+8]]+ae[o[i+9]]+"-"+ae[o[i+10]]+ae[o[i+11]]+ae[o[i+12]]+ae[o[i+13]]+ae[o[i+14]]+ae[o[i+15]]).toLowerCase()}function du(o,i=0){let s=de(o,i);if(!Ye(s))throw TypeError("Stringified UUID is invalid");return s}var ae,$i,Ke=re(()=>{v();zt();ae=[];for(let o=0;o<256;++o)ae.push((o+256).toString(16).slice(1));$i=du});function Ue(){if(!ro){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ro=crypto.getRandomValues.bind(crypto)}return ro(mu)}var ro,mu,Hr=re(()=>{v();mu=new Uint8Array(16)});function gu(o,i,s){let u,l=o?._v6??!1;if(o){let h=Object.keys(o);h.length===1&&h[0]==="_v6"&&(o=void 0)}if(o)u=Fi(o.random??o.rng?.()??Ue(),o.msecs,o.nsecs,o.clockseq,o.node,i,s);else{let h=Date.now(),m=Ue();yu(Xt,h,m),u=Fi(m,Xt.msecs,Xt.nsecs,l?void 0:Xt.clockseq,l?void 0:Xt.node,i,s)}return i??de(u)}function yu(o,i,s){return o.msecs??(o.msecs=-1/0),o.nsecs??(o.nsecs=0),i===o.msecs?(o.nsecs++,o.nsecs>=1e4&&(o.node=void 0,o.nsecs=0)):i>o.msecs?o.nsecs=0:i<o.msecs&&(o.node=void 0),o.node||(o.node=s.slice(10,16),o.node[0]|=1,o.clockseq=(s[8]<<8|s[9])&16383),o.msecs=i,o}function Fi(o,i,s,u,l,h,m=0){if(o.length<16)throw new Error("Random bytes length must be >= 16");if(!h)h=new Uint8Array(16),m=0;else if(m<0||m+16>h.length)throw new RangeError(`UUID byte range ${m}:${m+15} is out of buffer bounds`);i??(i=Date.now()),s??(s=0),u??(u=(o[8]<<8|o[9])&16383),l??(l=o.slice(10,16)),i+=122192928e5;let w=((i&268435455)*1e4+s)%4294967296;h[m++]=w>>>24&255,h[m++]=w>>>16&255,h[m++]=w>>>8&255,h[m++]=w&255;let I=i/4294967296*1e4&268435455;h[m++]=I>>>8&255,h[m++]=I&255,h[m++]=I>>>24&15|16,h[m++]=I>>>16&255,h[m++]=u>>>8|128,h[m++]=u&255;for(let j=0;j<6;++j)h[m++]=l[j];return h}var Xt,Gr,no=re(()=>{v();Hr();Ke();Xt={};Gr=gu});function Jt(o){let i=typeof o=="string"?Pe(o):o,s=vu(i);return typeof o=="string"?de(s):s}function vu(o){return Uint8Array.of((o[6]&15)<<4|o[7]>>4&15,(o[7]&15)<<4|(o[4]&240)>>4,(o[4]&15)<<4|(o[5]&240)>>4,(o[5]&15)<<4|(o[0]&240)>>4,(o[0]&15)<<4|(o[1]&240)>>4,(o[1]&15)<<4|(o[2]&240)>>4,96|o[2]&15,o[3],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15])}var oo=re(()=>{v();Qt();Ke()});function wu(o){let i=xu(o),s=_u(i,o.length*8);return bu(s)}function bu(o){let i=new Uint8Array(o.length*4);for(let s=0;s<o.length*4;s++)i[s]=o[s>>2]>>>s%4*8&255;return i}function Vi(o){return(o+64>>>9<<4)+14+1}function _u(o,i){let s=new Uint32Array(Vi(i)).fill(0);s.set(o),s[i>>5]|=128<<i%32,s[s.length-1]=i,o=s;let u=1732584193,l=-271733879,h=-1732584194,m=271733878;for(let w=0;w<o.length;w+=16){let I=u,j=l,Q=h,X=m;u=le(u,l,h,m,o[w],7,-680876936),m=le(m,u,l,h,o[w+1],12,-389564586),h=le(h,m,u,l,o[w+2],17,606105819),l=le(l,h,m,u,o[w+3],22,-1044525330),u=le(u,l,h,m,o[w+4],7,-176418897),m=le(m,u,l,h,o[w+5],12,1200080426),h=le(h,m,u,l,o[w+6],17,-1473231341),l=le(l,h,m,u,o[w+7],22,-45705983),u=le(u,l,h,m,o[w+8],7,1770035416),m=le(m,u,l,h,o[w+9],12,-1958414417),h=le(h,m,u,l,o[w+10],17,-42063),l=le(l,h,m,u,o[w+11],22,-1990404162),u=le(u,l,h,m,o[w+12],7,1804603682),m=le(m,u,l,h,o[w+13],12,-40341101),h=le(h,m,u,l,o[w+14],17,-1502002290),l=le(l,h,m,u,o[w+15],22,1236535329),u=fe(u,l,h,m,o[w+1],5,-165796510),m=fe(m,u,l,h,o[w+6],9,-1069501632),h=fe(h,m,u,l,o[w+11],14,643717713),l=fe(l,h,m,u,o[w],20,-373897302),u=fe(u,l,h,m,o[w+5],5,-701558691),m=fe(m,u,l,h,o[w+10],9,38016083),h=fe(h,m,u,l,o[w+15],14,-660478335),l=fe(l,h,m,u,o[w+4],20,-405537848),u=fe(u,l,h,m,o[w+9],5,568446438),m=fe(m,u,l,h,o[w+14],9,-1019803690),h=fe(h,m,u,l,o[w+3],14,-187363961),l=fe(l,h,m,u,o[w+8],20,1163531501),u=fe(u,l,h,m,o[w+13],5,-1444681467),m=fe(m,u,l,h,o[w+2],9,-51403784),h=fe(h,m,u,l,o[w+7],14,1735328473),l=fe(l,h,m,u,o[w+12],20,-1926607734),u=he(u,l,h,m,o[w+5],4,-378558),m=he(m,u,l,h,o[w+8],11,-2022574463),h=he(h,m,u,l,o[w+11],16,1839030562),l=he(l,h,m,u,o[w+14],23,-35309556),u=he(u,l,h,m,o[w+1],4,-1530992060),m=he(m,u,l,h,o[w+4],11,1272893353),h=he(h,m,u,l,o[w+7],16,-155497632),l=he(l,h,m,u,o[w+10],23,-1094730640),u=he(u,l,h,m,o[w+13],4,681279174),m=he(m,u,l,h,o[w],11,-358537222),h=he(h,m,u,l,o[w+3],16,-722521979),l=he(l,h,m,u,o[w+6],23,76029189),u=he(u,l,h,m,o[w+9],4,-640364487),m=he(m,u,l,h,o[w+12],11,-421815835),h=he(h,m,u,l,o[w+15],16,530742520),l=he(l,h,m,u,o[w+2],23,-995338651),u=pe(u,l,h,m,o[w],6,-198630844),m=pe(m,u,l,h,o[w+7],10,1126891415),h=pe(h,m,u,l,o[w+14],15,-1416354905),l=pe(l,h,m,u,o[w+5],21,-57434055),u=pe(u,l,h,m,o[w+12],6,1700485571),m=pe(m,u,l,h,o[w+3],10,-1894986606),h=pe(h,m,u,l,o[w+10],15,-1051523),l=pe(l,h,m,u,o[w+1],21,-2054922799),u=pe(u,l,h,m,o[w+8],6,1873313359),m=pe(m,u,l,h,o[w+15],10,-30611744),h=pe(h,m,u,l,o[w+6],15,-1560198380),l=pe(l,h,m,u,o[w+13],21,1309151649),u=pe(u,l,h,m,o[w+4],6,-145523070),m=pe(m,u,l,h,o[w+11],10,-1120210379),h=pe(h,m,u,l,o[w+2],15,718787259),l=pe(l,h,m,u,o[w+9],21,-343485551),u=ze(u,I),l=ze(l,j),h=ze(h,Q),m=ze(m,X)}return Uint32Array.of(u,l,h,m)}function xu(o){if(o.length===0)return new Uint32Array;let i=new Uint32Array(Vi(o.length*8)).fill(0);for(let s=0;s<o.length;s++)i[s>>2]|=(o[s]&255)<<s%4*8;return i}function ze(o,i){let s=(o&65535)+(i&65535);return(o>>16)+(i>>16)+(s>>16)<<16|s&65535}function Eu(o,i){return o<<i|o>>>32-i}function Yr(o,i,s,u,l,h){return ze(Eu(ze(ze(i,o),ze(u,h)),l),s)}function le(o,i,s,u,l,h,m){return Yr(i&s|~i&u,o,i,l,h,m)}function fe(o,i,s,u,l,h,m){return Yr(i&u|s&~u,o,i,l,h,m)}function he(o,i,s,u,l,h,m){return Yr(i^s^u,o,i,l,h,m)}function pe(o,i,s,u,l,h,m){return Yr(s^(i|~u),o,i,l,h,m)}var Bi,qi=re(()=>{v();Bi=wu});function Ru(o){o=unescape(encodeURIComponent(o));let i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i}function Zt(o,i,s,u,l,h){let m=typeof s=="string"?Ru(s):s,w=typeof u=="string"?Pe(u):u;if(typeof u=="string"&&(u=Pe(u)),u?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+m.length);if(I.set(w),I.set(m,w.length),I=i(I),I[6]=I[6]&15|o,I[8]=I[8]&63|128,l){h=h||0;for(let j=0;j<16;++j)l[h+j]=I[j];return l}return de(I)}var zr,Qr,io=re(()=>{v();Qt();Ke();zr="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Qr="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function ao(o,i,s,u){return Zt(48,Bi,o,i,s,u)}var ji,Wi=re(()=>{v();qi();io();ao.DNS=zr;ao.URL=Qr;ji=ao});var Nu,so,Hi=re(()=>{v();Nu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),so={randomUUID:Nu}});function Cu(o,i,s){o=o||{};let u=o.random??o.rng?.()??Ue();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,i){if(s=s||0,s<0||s+16>i.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let l=0;l<16;++l)i[s+l]=u[l];return i}return de(u)}function ku(o,i,s){return so.randomUUID&&!i&&!o?so.randomUUID():Cu(o,i,s)}var Gi,Yi=re(()=>{v();Hi();Hr();Ke();Gi=ku});function Su(o,i,s,u){switch(o){case 0:return i&s^~i&u;case 1:return i^s^u;case 2:return i&s^i&u^s&u;case 3:return i^s^u}}function uo(o,i){return o<<i|o>>>32-i}function Tu(o){let i=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520],u=new Uint8Array(o.length+1);u.set(o),u[o.length]=128,o=u;let l=o.length/4+2,h=Math.ceil(l/16),m=new Array(h);for(let w=0;w<h;++w){let I=new Uint32Array(16);for(let j=0;j<16;++j)I[j]=o[w*64+j*4]<<24|o[w*64+j*4+1]<<16|o[w*64+j*4+2]<<8|o[w*64+j*4+3];m[w]=I}m[h-1][14]=(o.length-1)*8/Math.pow(2,32),m[h-1][14]=Math.floor(m[h-1][14]),m[h-1][15]=(o.length-1)*8&4294967295;for(let w=0;w<h;++w){let I=new Uint32Array(80);for(let Z=0;Z<16;++Z)I[Z]=m[w][Z];for(let Z=16;Z<80;++Z)I[Z]=uo(I[Z-3]^I[Z-8]^I[Z-14]^I[Z-16],1);let j=s[0],Q=s[1],X=s[2],se=s[3],oe=s[4];for(let Z=0;Z<80;++Z){let er=Math.floor(Z/20),tr=uo(j,5)+Su(er,Q,X,se)+oe+i[er]+I[Z]>>>0;oe=se,se=X,X=uo(Q,30)>>>0,Q=j,j=tr}s[0]=s[0]+j>>>0,s[1]=s[1]+Q>>>0,s[2]=s[2]+X>>>0,s[3]=s[3]+se>>>0,s[4]=s[4]+oe>>>0}return Uint8Array.of(s[0]>>24,s[0]>>16,s[0]>>8,s[0],s[1]>>24,s[1]>>16,s[1]>>8,s[1],s[2]>>24,s[2]>>16,s[2]>>8,s[2],s[3]>>24,s[3]>>16,s[3]>>8,s[3],s[4]>>24,s[4]>>16,s[4]>>8,s[4])}var zi,Qi=re(()=>{v();zi=Tu});function co(o,i,s,u){return Zt(80,zi,o,i,s,u)}var Xi,Ji=re(()=>{v();Qi();io();co.DNS=zr;co.URL=Qr;Xi=co});function Du(o,i,s){o??(o={}),s??(s=0);let u=Gr({...o,_v6:!0},new Uint8Array(16));if(u=Jt(u),i){for(let l=0;l<16;l++)i[s+l]=u[l];return i}return de(u)}var Zi,ea=re(()=>{v();Ke();no();oo();Zi=Du});function lo(o){let i=typeof o=="string"?Pe(o):o,s=Au(i);return typeof o=="string"?de(s):s}function Au(o){return Uint8Array.of((o[3]&15)<<4|o[4]>>4&15,(o[4]&15)<<4|(o[5]&240)>>4,(o[5]&15)<<4|o[6]&15,o[7],(o[1]&15)<<4|(o[2]&240)>>4,(o[2]&15)<<4|(o[3]&240)>>4,16|(o[0]&240)>>4,(o[0]&15)<<4|(o[1]&240)>>4,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15])}var ta=re(()=>{v();Qt();Ke()});function Ou(o,i,s){let u;if(o)u=ra(o.random??o.rng?.()??Ue(),o.msecs,o.seq,i,s);else{let l=Date.now(),h=Ue();Iu(fo,l,h),u=ra(h,fo.msecs,fo.seq,i,s)}return i??de(u)}function Iu(o,i,s){return o.msecs??(o.msecs=-1/0),o.seq??(o.seq=0),i>o.msecs?(o.seq=s[6]<<23|s[7]<<16|s[8]<<8|s[9],o.msecs=i):(o.seq=o.seq+1|0,o.seq===0&&o.msecs++),o}function ra(o,i,s,u,l=0){if(o.length<16)throw new Error("Random bytes length must be >= 16");if(!u)u=new Uint8Array(16),l=0;else if(l<0||l+16>u.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return i??(i=Date.now()),s??(s=o[6]*127<<24|o[7]<<16|o[8]<<8|o[9]),u[l++]=i/1099511627776&255,u[l++]=i/4294967296&255,u[l++]=i/16777216&255,u[l++]=i/65536&255,u[l++]=i/256&255,u[l++]=i&255,u[l++]=112|s>>>28&15,u[l++]=s>>>20&255,u[l++]=128|s>>>14&63,u[l++]=s>>>6&255,u[l++]=s<<2&255|o[10]&3,u[l++]=o[11],u[l++]=o[12],u[l++]=o[13],u[l++]=o[14],u[l++]=o[15],u}var fo,na,oa=re(()=>{v();Hr();Ke();fo={};na=Ou});function Pu(o){if(!Ye(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var ia,aa=re(()=>{v();zt();ia=Pu});var ho={};zs(ho,{MAX:()=>Ii,NIL:()=>Ki,parse:()=>Pe,stringify:()=>$i,v1:()=>Gr,v1ToV6:()=>Jt,v3:()=>ji,v4:()=>Gi,v5:()=>Xi,v6:()=>Zi,v6ToV1:()=>lo,v7:()=>na,validate:()=>Ye,version:()=>ia});var po=re(()=>{v();Pi();Ui();Qt();Ke();no();oo();Wi();Yi();Ji();ea();ta();oa();zt();aa()});v();v();v();v();v();v();v();v();v();v();try{self["workbox:core:7.3.0"]&&_()}catch{}var Zs=(o,...i)=>{let s=o;return i.length>0&&(s+=` :: ${JSON.stringify(i)}`),s};var li=Zs;var G=class extends Error{constructor(i,s){let u=li(i,s);super(u),this.name=i,this.details=s}};v();var Ae={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},Bn=o=>[Ae.prefix,o,Ae.suffix].filter(i=>i&&i.length>0).join("-"),eu=o=>{for(let i of Object.keys(Ae))o(i)},Oe={updateDetails:o=>{eu(i=>{typeof o[i]=="string"&&(Ae[i]=o[i])})},getGoogleAnalyticsName:o=>o||Bn(Ae.googleAnalytics),getPrecacheName:o=>o||Bn(Ae.precache),getPrefix:()=>Ae.prefix,getRuntimeName:o=>o||Bn(Ae.runtime),getSuffix:()=>Ae.suffix};v();v();function qn(o,i){let s=i();return o.waitUntil(s),s}v();v();try{self["workbox:precaching:7.3.0"]&&_()}catch{}var tu="__WB_REVISION__";function fi(o){if(!o)throw new G("add-to-cache-list-unexpected-type",{entry:o});if(typeof o=="string"){let h=new URL(o,location.href);return{cacheKey:h.href,url:h.href}}let{revision:i,url:s}=o;if(!s)throw new G("add-to-cache-list-unexpected-type",{entry:o});if(!i){let h=new URL(s,location.href);return{cacheKey:h.href,url:h.href}}let u=new URL(s,location.href),l=new URL(s,location.href);return u.searchParams.set(tu,i),{cacheKey:u.href,url:l.href}}v();var Or=class{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:i,state:s})=>{s&&(s.originalRequest=i)},this.cachedResponseWillBeUsed=async({event:i,state:s,cachedResponse:u})=>{if(i.type==="install"&&s&&s.originalRequest&&s.originalRequest instanceof Request){let l=s.originalRequest.url;u?this.notUpdatedURLs.push(l):this.updatedURLs.push(l)}return u}}};v();var Ir=class{constructor({precacheController:i}){this.cacheKeyWillBeUsed=async({request:s,params:u})=>{let l=u?.cacheKey||this._precacheController.getCacheKeyForURL(s.url);return l?new Request(l,{headers:s.headers}):s},this._precacheController=i}};v();v();v();v();v();var Kt;function pi(){if(Kt===void 0){let o=new Response("");if("body"in o)try{new Response(o.body),Kt=!0}catch{Kt=!1}Kt=!1}return Kt}async function di(o,i){let s=null;if(o.url&&(s=new URL(o.url).origin),s!==self.location.origin)throw new G("cross-origin-copy-response",{origin:s});let u=o.clone(),l={headers:new Headers(u.headers),status:u.status,statusText:u.statusText},h=i?i(l):l,m=pi()?u.body:await u.blob();return new Response(m,h)}v();var jn=o=>new URL(String(o),location.href).href.replace(new RegExp(`^${location.origin}`),"");v();v();v();function mi(o,i){let s=new URL(o);for(let u of i)s.searchParams.delete(u);return s.href}async function gi(o,i,s,u){let l=mi(i.url,s);if(i.url===l)return o.match(i,u);let h=Object.assign(Object.assign({},u),{ignoreSearch:!0}),m=await o.keys(i,h);for(let w of m){let I=mi(w.url,s);if(l===I)return o.match(w,u)}}v();var Pr=class{constructor(){this.promise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}};v();v();var Kr=new Set;async function yi(){for(let o of Kr)await o()}v();function Ur(o){return new Promise(i=>setTimeout(i,o))}v();try{self["workbox:strategies:7.3.0"]&&_()}catch{}function Mr(o){return typeof o=="string"?new Request(o):o}var Ut=class{constructor(i,s){this._cacheKeys={},Object.assign(this,s),this.event=s.event,this._strategy=i,this._handlerDeferred=new Pr,this._extendLifetimePromises=[],this._plugins=[...i.plugins],this._pluginStateMap=new Map;for(let u of this._plugins)this._pluginStateMap.set(u,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(i){let{event:s}=this,u=Mr(i);if(u.mode==="navigate"&&s instanceof FetchEvent&&s.preloadResponse){let m=await s.preloadResponse;if(m)return m}let l=this.hasCallback("fetchDidFail")?u.clone():null;try{for(let m of this.iterateCallbacks("requestWillFetch"))u=await m({request:u.clone(),event:s})}catch(m){if(m instanceof Error)throw new G("plugin-error-request-will-fetch",{thrownErrorMessage:m.message})}let h=u.clone();try{let m;m=await fetch(u,u.mode==="navigate"?void 0:this._strategy.fetchOptions);for(let w of this.iterateCallbacks("fetchDidSucceed"))m=await w({event:s,request:h,response:m});return m}catch(m){throw l&&await this.runCallbacks("fetchDidFail",{error:m,event:s,originalRequest:l.clone(),request:h.clone()}),m}}async fetchAndCachePut(i){let s=await this.fetch(i),u=s.clone();return this.waitUntil(this.cachePut(i,u)),s}async cacheMatch(i){let s=Mr(i),u,{cacheName:l,matchOptions:h}=this._strategy,m=await this.getCacheKey(s,"read"),w=Object.assign(Object.assign({},h),{cacheName:l});u=await caches.match(m,w);for(let I of this.iterateCallbacks("cachedResponseWillBeUsed"))u=await I({cacheName:l,matchOptions:h,cachedResponse:u,request:m,event:this.event})||void 0;return u}async cachePut(i,s){let u=Mr(i);await Ur(0);let l=await this.getCacheKey(u,"write");if(!s)throw new G("cache-put-with-no-response",{url:jn(l.url)});let h=await this._ensureResponseSafeToCache(s);if(!h)return!1;let{cacheName:m,matchOptions:w}=this._strategy,I=await self.caches.open(m),j=this.hasCallback("cacheDidUpdate"),Q=j?await gi(I,l.clone(),["__WB_REVISION__"],w):null;try{await I.put(l,j?h.clone():h)}catch(X){if(X instanceof Error)throw X.name==="QuotaExceededError"&&await yi(),X}for(let X of this.iterateCallbacks("cacheDidUpdate"))await X({cacheName:m,oldResponse:Q,newResponse:h.clone(),request:l,event:this.event});return!0}async getCacheKey(i,s){let u=`${i.url} | ${s}`;if(!this._cacheKeys[u]){let l=i;for(let h of this.iterateCallbacks("cacheKeyWillBeUsed"))l=Mr(await h({mode:s,request:l,event:this.event,params:this.params}));this._cacheKeys[u]=l}return this._cacheKeys[u]}hasCallback(i){for(let s of this._strategy.plugins)if(i in s)return!0;return!1}async runCallbacks(i,s){for(let u of this.iterateCallbacks(i))await u(s)}*iterateCallbacks(i){for(let s of this._strategy.plugins)if(typeof s[i]=="function"){let u=this._pluginStateMap.get(s);yield h=>{let m=Object.assign(Object.assign({},h),{state:u});return s[i](m)}}}waitUntil(i){return this._extendLifetimePromises.push(i),i}async doneWaiting(){for(;this._extendLifetimePromises.length;){let i=this._extendLifetimePromises.splice(0),u=(await Promise.allSettled(i)).find(l=>l.status==="rejected");if(u)throw u.reason}}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(i){let s=i,u=!1;for(let l of this.iterateCallbacks("cacheWillUpdate"))if(s=await l({request:this.request,response:s,event:this.event})||void 0,u=!0,!s)break;return u||s&&s.status!==200&&(s=void 0),s}};var ye=class{constructor(i={}){this.cacheName=Oe.getRuntimeName(i.cacheName),this.plugins=i.plugins||[],this.fetchOptions=i.fetchOptions,this.matchOptions=i.matchOptions}handle(i){let[s]=this.handleAll(i);return s}handleAll(i){i instanceof FetchEvent&&(i={event:i,request:i.request});let s=i.event,u=typeof i.request=="string"?new Request(i.request):i.request,l="params"in i?i.params:void 0,h=new Ut(this,{event:s,request:u,params:l}),m=this._getResponse(h,u,s),w=this._awaitComplete(m,h,u,s);return[m,w]}async _getResponse(i,s,u){await i.runCallbacks("handlerWillStart",{event:u,request:s});let l;try{if(l=await this._handle(s,i),!l||l.type==="error")throw new G("no-response",{url:s.url})}catch(h){if(h instanceof Error){for(let m of i.iterateCallbacks("handlerDidError"))if(l=await m({error:h,event:u,request:s}),l)break}if(!l)throw h}for(let h of i.iterateCallbacks("handlerWillRespond"))l=await h({event:u,request:s,response:l});return l}async _awaitComplete(i,s,u,l){let h,m;try{h=await i}catch{}try{await s.runCallbacks("handlerDidRespond",{event:l,request:u,response:h}),await s.doneWaiting()}catch(w){w instanceof Error&&(m=w)}if(await s.runCallbacks("handlerDidComplete",{event:l,request:u,response:h,error:m}),s.destroy(),m)throw m}};var st=class o extends ye{constructor(i={}){i.cacheName=Oe.getPrecacheName(i.cacheName),super(i),this._fallbackToNetwork=i.fallbackToNetwork!==!1,this.plugins.push(o.copyRedirectedCacheableResponsesPlugin)}async _handle(i,s){let u=await s.cacheMatch(i);return u||(s.event&&s.event.type==="install"?await this._handleInstall(i,s):await this._handleFetch(i,s))}async _handleFetch(i,s){let u,l=s.params||{};if(this._fallbackToNetwork){let h=l.integrity,m=i.integrity,w=!m||m===h;if(u=await s.fetch(new Request(i,{integrity:i.mode!=="no-cors"?m||h:void 0})),h&&w&&i.mode!=="no-cors"){this._useDefaultCacheabilityPluginIfNeeded();let I=await s.cachePut(i,u.clone())}}else throw new G("missing-precache-entry",{cacheName:this.cacheName,url:i.url});return u}async _handleInstall(i,s){this._useDefaultCacheabilityPluginIfNeeded();let u=await s.fetch(i);if(!await s.cachePut(i,u.clone()))throw new G("bad-precaching-response",{url:i.url,status:u.status});return u}_useDefaultCacheabilityPluginIfNeeded(){let i=null,s=0;for(let[u,l]of this.plugins.entries())l!==o.copyRedirectedCacheableResponsesPlugin&&(l===o.defaultPrecacheCacheabilityPlugin&&(i=u),l.cacheWillUpdate&&s++);s===0?this.plugins.push(o.defaultPrecacheCacheabilityPlugin):s>1&&i!==null&&this.plugins.splice(i,1)}};st.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:o}){return!o||o.status>=400?null:o}};st.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:o}){return o.redirected?await di(o):o}};var Mt=class{constructor({cacheName:i,plugins:s=[],fallbackToNetwork:u=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new st({cacheName:Oe.getPrecacheName(i),plugins:[...s,new Ir({precacheController:this})],fallbackToNetwork:u}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(i){this.addToCacheList(i),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(i){let s=[];for(let u of i){typeof u=="string"?s.push(u):u&&u.revision===void 0&&s.push(u.url);let{cacheKey:l,url:h}=fi(u),m=typeof u!="string"&&u.revision?"reload":"default";if(this._urlsToCacheKeys.has(h)&&this._urlsToCacheKeys.get(h)!==l)throw new G("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(h),secondEntry:l});if(typeof u!="string"&&u.integrity){if(this._cacheKeysToIntegrities.has(l)&&this._cacheKeysToIntegrities.get(l)!==u.integrity)throw new G("add-to-cache-list-conflicting-integrities",{url:h});this._cacheKeysToIntegrities.set(l,u.integrity)}if(this._urlsToCacheKeys.set(h,l),this._urlsToCacheModes.set(h,m),s.length>0){let w=`Workbox is precaching URLs without revision info: ${s.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(w)}}}install(i){return qn(i,async()=>{let s=new Or;this.strategy.plugins.push(s);for(let[h,m]of this._urlsToCacheKeys){let w=this._cacheKeysToIntegrities.get(m),I=this._urlsToCacheModes.get(h),j=new Request(h,{integrity:w,cache:I,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:m},request:j,event:i}))}let{updatedURLs:u,notUpdatedURLs:l}=s;return{updatedURLs:u,notUpdatedURLs:l}})}activate(i){return qn(i,async()=>{let s=await self.caches.open(this.strategy.cacheName),u=await s.keys(),l=new Set(this._urlsToCacheKeys.values()),h=[];for(let m of u)l.has(m.url)||(await s.delete(m),h.push(m.url));return{deletedURLs:h}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(i){let s=new URL(i,location.href);return this._urlsToCacheKeys.get(s.href)}getIntegrityForCacheKey(i){return this._cacheKeysToIntegrities.get(i)}async matchPrecache(i){let s=i instanceof Request?i.url:i,u=this.getCacheKeyForURL(s);if(u)return(await self.caches.open(this.strategy.cacheName)).match(u)}createHandlerBoundToURL(i){let s=this.getCacheKeyForURL(i);if(!s)throw new G("non-precached-url",{url:i});return u=>(u.request=new Request(i),u.params=Object.assign({cacheKey:s},u.params),this.strategy.handle(u))}};var Wn,Ie=()=>(Wn||(Wn=new Mt),Wn);v();v();v();v();v();try{self["workbox:routing:7.3.0"]&&_()}catch{}var Lr="GET";v();var yt=o=>o&&typeof o=="object"?o:{handle:o};var be=class{constructor(i,s,u=Lr){this.handler=yt(s),this.match=i,this.method=u}setCatchHandler(i){this.catchHandler=yt(i)}};v();var Lt=class extends be{constructor(i,s,u){let l=({url:h})=>{let m=i.exec(h.href);if(m&&!(h.origin!==location.origin&&m.index!==0))return m.slice(1)};super(l,s,u)}};v();v();var $t=class{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",(i=>{let{request:s}=i,u=this.handleRequest({request:s,event:i});u&&i.respondWith(u)}))}addCacheListener(){self.addEventListener("message",(i=>{if(i.data&&i.data.type==="CACHE_URLS"){let{payload:s}=i.data,u=Promise.all(s.urlsToCache.map(l=>{typeof l=="string"&&(l=[l]);let h=new Request(...l);return this.handleRequest({request:h,event:i})}));i.waitUntil(u),i.ports&&i.ports[0]&&u.then(()=>i.ports[0].postMessage(!0))}}))}handleRequest({request:i,event:s}){let u=new URL(i.url,location.href);if(!u.protocol.startsWith("http"))return;let l=u.origin===location.origin,{params:h,route:m}=this.findMatchingRoute({event:s,request:i,sameOrigin:l,url:u}),w=m&&m.handler,I=[],j=i.method;if(!w&&this._defaultHandlerMap.has(j)&&(w=this._defaultHandlerMap.get(j)),!w)return;let Q;try{Q=w.handle({url:u,request:i,event:s,params:h})}catch(se){Q=Promise.reject(se)}let X=m&&m.catchHandler;return Q instanceof Promise&&(this._catchHandler||X)&&(Q=Q.catch(async se=>{if(X)try{return await X.handle({url:u,request:i,event:s,params:h})}catch(oe){oe instanceof Error&&(se=oe)}if(this._catchHandler)return this._catchHandler.handle({url:u,request:i,event:s});throw se})),Q}findMatchingRoute({url:i,sameOrigin:s,request:u,event:l}){let h=this._routes.get(u.method)||[];for(let m of h){let w,I=m.match({url:i,sameOrigin:s,request:u,event:l});if(I)return w=I,(Array.isArray(w)&&w.length===0||I.constructor===Object&&Object.keys(I).length===0||typeof I=="boolean")&&(w=void 0),{route:m,params:w}}return{}}setDefaultHandler(i,s=Lr){this._defaultHandlerMap.set(s,yt(i))}setCatchHandler(i){this._catchHandler=yt(i)}registerRoute(i){this._routes.has(i.method)||this._routes.set(i.method,[]),this._routes.get(i.method).push(i)}unregisterRoute(i){if(!this._routes.has(i.method))throw new G("unregister-route-but-not-found-with-method",{method:i.method});let s=this._routes.get(i.method).indexOf(i);if(s>-1)this._routes.get(i.method).splice(s,1);else throw new G("unregister-route-route-not-registered")}};var Ft,$r=()=>(Ft||(Ft=new $t,Ft.addFetchListener(),Ft.addCacheListener()),Ft);function Ge(o,i,s){let u;if(typeof o=="string"){let h=new URL(o,location.href),m=({url:w})=>w.href===h.href;u=new be(m,i,s)}else if(o instanceof RegExp)u=new Lt(o,i,s);else if(typeof o=="function")u=new be(o,i,s);else if(o instanceof be)u=o;else throw new G("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return $r().registerRoute(u),u}v();v();v();function vi(o,i=[]){for(let s of[...o.searchParams.keys()])i.some(u=>u.test(s))&&o.searchParams.delete(s);return o}function*wi(o,{ignoreURLParametersMatching:i=[/^utm_/,/^fbclid$/],directoryIndex:s="index.html",cleanURLs:u=!0,urlManipulation:l}={}){let h=new URL(o,location.href);h.hash="",yield h.href;let m=vi(h,i);if(yield m.href,s&&m.pathname.endsWith("/")){let w=new URL(m.href);w.pathname+=s,yield w.href}if(u){let w=new URL(m.href);w.pathname+=".html",yield w.href}if(l){let w=l({url:h});for(let I of w)yield I.href}}var Vt=class extends be{constructor(i,s){let u=({request:l})=>{let h=i.getURLsToCacheKeys();for(let m of wi(l.url,s)){let w=h.get(m);if(w){let I=i.getIntegrityForCacheKey(w);return{cacheKey:w,integrity:I}}}};super(u,i.strategy)}};function Hn(o){let i=Ie(),s=new Vt(i,o);Ge(s)}v();v();v();v();v();v();function Gn(o){Ie().precache(o)}v();function Yn(o,i){Gn(o),Hn(i)}v();v();v();v();v();v();v();v();v();var Bt=class extends ye{async _handle(i,s){let u=[],l=await s.cacheMatch(i),h;if(!l)try{l=await s.fetchAndCachePut(i)}catch(m){m instanceof Error&&(h=m)}if(!l)throw new G("no-response",{url:i.url,error:h});return l}};v();v();v();var Fr={cacheWillUpdate:async({response:o})=>o.status===200||o.status===0?o:null};var qt=class extends ye{constructor(i={}){super(i),this.plugins.some(s=>"cacheWillUpdate"in s)||this.plugins.unshift(Fr),this._networkTimeoutSeconds=i.networkTimeoutSeconds||0}async _handle(i,s){let u=[],l=[],h;if(this._networkTimeoutSeconds){let{id:I,promise:j}=this._getTimeoutPromise({request:i,logs:u,handler:s});h=I,l.push(j)}let m=this._getNetworkPromise({timeoutId:h,request:i,logs:u,handler:s});l.push(m);let w=await s.waitUntil((async()=>await s.waitUntil(Promise.race(l))||await m)());if(!w)throw new G("no-response",{url:i.url});return w}_getTimeoutPromise({request:i,logs:s,handler:u}){let l;return{promise:new Promise(m=>{l=setTimeout(async()=>{m(await u.cacheMatch(i))},this._networkTimeoutSeconds*1e3)}),id:l}}async _getNetworkPromise({timeoutId:i,request:s,logs:u,handler:l}){let h,m;try{m=await l.fetchAndCachePut(s)}catch(w){w instanceof Error&&(h=w)}return i&&clearTimeout(i),(h||!m)&&(m=await l.cacheMatch(s)),m}};v();var jt=class extends ye{constructor(i={}){super(i),this._networkTimeoutSeconds=i.networkTimeoutSeconds||0}async _handle(i,s){let u,l;try{let h=[s.fetch(i)];if(this._networkTimeoutSeconds){let m=Ur(this._networkTimeoutSeconds*1e3);h.push(m)}if(l=await Promise.race(h),!l)throw new Error(`Timed out the network response after ${this._networkTimeoutSeconds} seconds.`)}catch(h){h instanceof Error&&(u=h)}if(!l)throw new G("no-response",{url:i.url,error:u});return l}};v();var Wt=class extends ye{constructor(i={}){super(i),this.plugins.some(s=>"cacheWillUpdate"in s)||this.plugins.unshift(Fr)}async _handle(i,s){let u=[],l=s.fetchAndCachePut(i).catch(()=>{});s.waitUntil(l);let h=await s.cacheMatch(i),m;if(!h)try{h=await l}catch(w){w instanceof Error&&(m=w)}if(!h)throw new G("no-response",{url:i.url,error:m});return h}};v();v();v();function Vr(o){o.then(()=>{})}v();v();v();var ru=(o,i)=>i.some(s=>o instanceof s),bi,_i;function nu(){return bi||(bi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ou(){return _i||(_i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xi=new WeakMap,Qn=new WeakMap,Ei=new WeakMap,zn=new WeakMap,Jn=new WeakMap;function iu(o){let i=new Promise((s,u)=>{let l=()=>{o.removeEventListener("success",h),o.removeEventListener("error",m)},h=()=>{s(xe(o.result)),l()},m=()=>{u(o.error),l()};o.addEventListener("success",h),o.addEventListener("error",m)});return i.then(s=>{s instanceof IDBCursor&&xi.set(s,o)}).catch(()=>{}),Jn.set(i,o),i}function au(o){if(Qn.has(o))return;let i=new Promise((s,u)=>{let l=()=>{o.removeEventListener("complete",h),o.removeEventListener("error",m),o.removeEventListener("abort",m)},h=()=>{s(),l()},m=()=>{u(o.error||new DOMException("AbortError","AbortError")),l()};o.addEventListener("complete",h),o.addEventListener("error",m),o.addEventListener("abort",m)});Qn.set(o,i)}var Xn={get(o,i,s){if(o instanceof IDBTransaction){if(i==="done")return Qn.get(o);if(i==="objectStoreNames")return o.objectStoreNames||Ei.get(o);if(i==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return xe(o[i])},set(o,i,s){return o[i]=s,!0},has(o,i){return o instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in o}};function Ri(o){Xn=o(Xn)}function su(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(i,...s){let u=o.call(Br(this),i,...s);return Ei.set(u,i.sort?i.sort():[i]),xe(u)}:ou().includes(o)?function(...i){return o.apply(Br(this),i),xe(xi.get(this))}:function(...i){return xe(o.apply(Br(this),i))}}function uu(o){return typeof o=="function"?su(o):(o instanceof IDBTransaction&&au(o),ru(o,nu())?new Proxy(o,Xn):o)}function xe(o){if(o instanceof IDBRequest)return iu(o);if(zn.has(o))return zn.get(o);let i=uu(o);return i!==o&&(zn.set(o,i),Jn.set(i,o)),i}var Br=o=>Jn.get(o);function Ci(o,i,{blocked:s,upgrade:u,blocking:l,terminated:h}={}){let m=indexedDB.open(o,i),w=xe(m);return u&&m.addEventListener("upgradeneeded",I=>{u(xe(m.result),I.oldVersion,I.newVersion,xe(m.transaction),I)}),s&&m.addEventListener("blocked",I=>s(I.oldVersion,I.newVersion,I)),w.then(I=>{h&&I.addEventListener("close",()=>h()),l&&I.addEventListener("versionchange",j=>l(j.oldVersion,j.newVersion,j))}).catch(()=>{}),w}function ki(o,{blocked:i}={}){let s=indexedDB.deleteDatabase(o);return i&&s.addEventListener("blocked",u=>i(u.oldVersion,u)),xe(s).then(()=>{})}var cu=["get","getKey","getAll","getAllKeys","count"],lu=["put","add","delete","clear"],Zn=new Map;function Ni(o,i){if(!(o instanceof IDBDatabase&&!(i in o)&&typeof i=="string"))return;if(Zn.get(i))return Zn.get(i);let s=i.replace(/FromIndex$/,""),u=i!==s,l=lu.includes(s);if(!(s in(u?IDBIndex:IDBObjectStore).prototype)||!(l||cu.includes(s)))return;let h=async function(m,...w){let I=this.transaction(m,l?"readwrite":"readonly"),j=I.store;return u&&(j=j.index(w.shift())),(await Promise.all([j[s](...w),l&&I.done]))[0]};return Zn.set(i,h),h}Ri(o=>({...o,get:(i,s,u)=>Ni(i,s)||o.get(i,s,u),has:(i,s)=>!!Ni(i,s)||o.has(i,s)}));v();try{self["workbox:expiration:7.3.0"]&&_()}catch{}var fu="workbox-expiration",Ht="cache-entries",Si=o=>{let i=new URL(o,location.href);return i.hash="",i.href},qr=class{constructor(i){this._db=null,this._cacheName=i}_upgradeDb(i){let s=i.createObjectStore(Ht,{keyPath:"id"});s.createIndex("cacheName","cacheName",{unique:!1}),s.createIndex("timestamp","timestamp",{unique:!1})}_upgradeDbAndDeleteOldDbs(i){this._upgradeDb(i),this._cacheName&&ki(this._cacheName)}async setTimestamp(i,s){i=Si(i);let u={url:i,timestamp:s,cacheName:this._cacheName,id:this._getId(i)},h=(await this.getDb()).transaction(Ht,"readwrite",{durability:"relaxed"});await h.store.put(u),await h.done}async getTimestamp(i){let u=await(await this.getDb()).get(Ht,this._getId(i));return u?.timestamp}async expireEntries(i,s){let u=await this.getDb(),l=await u.transaction(Ht).store.index("timestamp").openCursor(null,"prev"),h=[],m=0;for(;l;){let I=l.value;I.cacheName===this._cacheName&&(i&&I.timestamp<i||s&&m>=s?h.push(l.value):m++),l=await l.continue()}let w=[];for(let I of h)await u.delete(Ht,I.id),w.push(I.url);return w}_getId(i){return this._cacheName+"|"+Si(i)}async getDb(){return this._db||(this._db=await Ci(fu,1,{upgrade:this._upgradeDbAndDeleteOldDbs.bind(this)})),this._db}};var Gt=class{constructor(i,s={}){this._isRunning=!1,this._rerunRequested=!1,this._maxEntries=s.maxEntries,this._maxAgeSeconds=s.maxAgeSeconds,this._matchOptions=s.matchOptions,this._cacheName=i,this._timestampModel=new qr(i)}async expireEntries(){if(this._isRunning){this._rerunRequested=!0;return}this._isRunning=!0;let i=this._maxAgeSeconds?Date.now()-this._maxAgeSeconds*1e3:0,s=await this._timestampModel.expireEntries(i,this._maxEntries),u=await self.caches.open(this._cacheName);for(let l of s)await u.delete(l,this._matchOptions);this._isRunning=!1,this._rerunRequested&&(this._rerunRequested=!1,Vr(this.expireEntries()))}async updateTimestamp(i){await this._timestampModel.setTimestamp(i,Date.now())}async isURLExpired(i){if(this._maxAgeSeconds){let s=await this._timestampModel.getTimestamp(i),u=Date.now()-this._maxAgeSeconds*1e3;return s!==void 0?s<u:!0}else return!1}async delete(){this._rerunRequested=!1,await this._timestampModel.expireEntries(1/0)}};v();v();function Ti(o){Kr.add(o)}var Yt=class{constructor(i={}){this.cachedResponseWillBeUsed=async({event:s,request:u,cacheName:l,cachedResponse:h})=>{if(!h)return null;let m=this._isResponseDateFresh(h),w=this._getCacheExpiration(l);Vr(w.expireEntries());let I=w.updateTimestamp(u.url);if(s)try{s.waitUntil(I)}catch{}return m?h:null},this.cacheDidUpdate=async({cacheName:s,request:u})=>{let l=this._getCacheExpiration(s);await l.updateTimestamp(u.url),await l.expireEntries()},this._config=i,this._maxAgeSeconds=i.maxAgeSeconds,this._cacheExpirations=new Map,i.purgeOnQuotaError&&Ti(()=>this.deleteCacheAndMetadata())}_getCacheExpiration(i){if(i===Oe.getRuntimeName())throw new G("expire-custom-caches-only");let s=this._cacheExpirations.get(i);return s||(s=new Gt(i,this._config),this._cacheExpirations.set(i,s)),s}_isResponseDateFresh(i){if(!this._maxAgeSeconds)return!0;let s=this._getDateHeaderTimestamp(i);if(s===null)return!0;let u=Date.now();return s>=u-this._maxAgeSeconds*1e3}_getDateHeaderTimestamp(i){if(!i.headers.has("date"))return null;let s=i.headers.get("date"),l=new Date(s).getTime();return isNaN(l)?null:l}async deleteCacheAndMetadata(){for(let[i,s]of this._cacheExpirations)await self.caches.delete(i),await s.delete();this._cacheExpirations=new Map}};v();v();var jr=Xs(Di(),1),Ai=Symbol.for("Dexie"),Wr=globalThis[Ai]||(globalThis[Ai]=jr.default);if(jr.default.semVer!==Wr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${jr.default.semVer} and ${Wr.semVer}`);var{liveQuery:Kg,mergeRanges:Ug,rangesOverlap:Mg,RangeSet:Lg,cmp:$g,Entity:Fg,PropModification:Vg,replacePrefix:Bg,add:qg,remove:jg,DexieYProvider:Wg}=Wr;var Oi=Wr;var mo=class extends Oi{constructor(){super("VynkLocalDB");He(this,"messages");He(this,"stories");He(this,"conversations");He(this,"queue");He(this,"meta");He(this,"users");He(this,"participants");this.version(3).stores({messages:"++id, messageId, conversationId, timestamp",stories:"++id, storyId, expiresAt",conversations:"++id, conversationId, updatedAt, type",queue:"++id, action, timestamp",meta:"key",settings:"id",calls:"++id, status",users:"id, name, updatedAt",participants:"id, conversationId, userId"})}async cleanupOldStories(){let s=Date.now();await this.stories.where("expiresAt").below(s).delete()}async enqueue(s,u){await this.queue.add({action:s,payload:u,timestamp:Date.now()}),typeof navigator<"u"&&navigator.onLine&&this.sync().catch(console.error)}async sync(){if(!(typeof navigator>"u"||!navigator.onLine))try{await this.flushQueue(),await this.pullDelta()}catch(s){console.error("Sync failed",s)}}async flushQueue(){let s=await this.queue.orderBy("timestamp").toArray();if(s.length===0)return;let u=await fetch("/api/sync",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});if(!u.ok)throw new Error("Flush failed");if((await u.json()).success){let h=s.map(m=>m.id);await this.queue.bulkDelete(h)}}async pullDelta(){let u=(await this.meta.get("lastSyncedAt"))?.value||new Date(0).toISOString(),l=await fetch(`/api/sync?since=${u}`);if(!l.ok)throw new Error("Pull failed");let h=await l.json();h.conversations?.length&&await this.syncConversations(h.conversations),h.messages?.length&&await this.syncMessages(h.messages),h.stories?.length&&await this.syncStories(h.stories),h.users?.length&&await this.syncUsers(h.users),h.deletedMessageIds?.length&&await this.messages.where("messageId").anyOf(h.deletedMessageIds).delete(),h.deletedStoryIds?.length&&await this.stories.where("storyId").anyOf(h.deletedStoryIds).delete(),h.deletedConversationIds?.length&&await this.conversations.where("conversationId").anyOf(h.deletedConversationIds).delete(),await this.meta.put({key:"lastSyncedAt",value:h.timestamp})}async syncUsers(s){for(let u of s)await this.users.put(u)}async syncConversations(s){for(let u of s){let l=await this.conversations.where("conversationId").equals(u.conversationId).first();l?await this.conversations.update(l.id,{...u,isVirtual:!1}):await this.conversations.add({...u,isVirtual:!1})}}async syncMessages(s){for(let u of s){if(!u.messageId)continue;let l=await this.messages.where("messageId").equals(u.messageId).first();l?await this.messages.update(l.id,u):await this.messages.add(u)}}async syncStories(s){for(let u of s){if(!u.storyId)continue;let l=await this.stories.where("storyId").equals(u.storyId).first();l?await this.stories.update(l.id,u):await this.stories.add(u)}}async syncParticipants(s){for(let u of s)await this.participants.put(u)}async performInitialSync(){try{let s=await fetch("/api/initial-sync");if(!s.ok)throw new Error("Initial sync failed");let u=await s.json();if(console.log("Initial sync data",u),u.users?.length&&await this.users.bulkPut(u.users),u.conversations?.length)for(let l of u.conversations){let h={conversationId:l.conversationId,title:l.title,type:l.type,groupImg:l.groupImg,createdAt:l.createdAt,updatedAt:l.updatedAt,lastMessage:l.lastMessage,lastMessageAt:l.lastMessageAt,unreadCount:l.unreadCount,isVirtual:!1,displayName:l.title,displayAvatar:l.groupImg};if(await this.conversations.put(h),l.participants?.length)for(let m of l.participants)await this.participants.put({id:m.odId,conversationId:m.odConversationId,userId:m.odUserId,role:m.role,unreadCount:m.unreadCount})}if(u.messages?.length){let l=u.messages.map(h=>({messageId:h.messageId,conversationId:h.conversationId,senderId:h.senderId,content:h.content,mediaType:h.mediaType,mediaUrl:h.mediaUrl,replyTo:h.replyTo,status:h.status,timestamp:h.timestamp}));await this.messages.bulkPut(l)}return await this.meta.put({key:"lastSyncedAt",value:u.timestamp}),await this.meta.put({key:"initialSyncCompleted",value:!0}),{success:!0}}catch(s){return console.error("Initial sync error:",s),{success:!1,error:s}}}async isInitialSyncCompleted(){return(await this.meta.get("initialSyncCompleted"))?.value===!0}async getConversationDisplayInfo(s,u){let l=await this.conversations.where("conversationId").equals(s).first();if(!l)return{name:"Unknown",avatar:null};if(l.type==="group")return{name:l.title||"Group",avatar:l.groupImg||null};let h=await this.participants.where("conversationId").equals(s).toArray(),m=h.find(w=>w.userId!==u);if(m){let w=await this.users.get(m.userId);if(w)return{name:w.name,avatar:w.avatar}}return h.length===1&&h[0].userId===u?{name:"You",avatar:(await this.users.get(u))?.avatar??null}:{name:l.title||"Unknown",avatar:null}}async createLocalConversation(s,u){let l=await this.users.get(s);if(!l)return null;if(s===u){let j=await this.participants.where("userId").equals(u).toArray();for(let se of j){let oe=await this.participants.where("conversationId").equals(se.conversationId).toArray();if(oe.length===1&&oe[0].userId===u)return{conversationId:se.conversationId,isNew:!1}}let{v7:Q}=await Promise.resolve().then(()=>(po(),ho)),X=Q();return await this.conversations.add({conversationId:X,title:"You",type:"private",createdAt:Date.now(),updatedAt:Date.now(),unreadCount:0,isVirtual:!0,displayName:"You",displayAvatar:l.avatar}),await this.participants.add({id:`${X}_${u}`,conversationId:X,userId:u,role:"member",unreadCount:0}),{conversationId:X,isNew:!0}}let m=await this.participants.where("userId").equals(s).toArray();for(let j of m)if(await this.participants.where("conversationId").equals(j.conversationId).filter(X=>X.userId===u).first())return{conversationId:j.conversationId,isNew:!1};let{v7:w}=await Promise.resolve().then(()=>(po(),ho)),I=w();return await this.conversations.add({conversationId:I,title:l.name,type:"private",createdAt:Date.now(),updatedAt:Date.now(),unreadCount:0,isVirtual:!0,displayName:l.name,displayAvatar:l.avatar}),await this.participants.bulkAdd([{id:`${I}_${u}`,conversationId:I,userId:u,role:"member",unreadCount:0},{id:`${I}_${s}`,conversationId:I,userId:s,role:"member",unreadCount:0}]),{conversationId:I,isNew:!0}}async persistConversation(s){let u=await this.conversations.where("conversationId").equals(s).first();u&&await this.conversations.update(u.id,{isVirtual:!1})}async clearAllData(){await this.messages.clear(),await this.stories.clear(),await this.conversations.clear(),await this.users.clear(),await this.participants.clear(),await this.queue.clear(),await this.meta.clear()}},go=new mo;var sa="sync-queue",vt={IMAGES:"images-v1",STATIC:"static-v1",PAGES:"pages-v1",MAX_IMAGES:60,IMAGE_MAX_AGE:720*60*60,NAV_TIMEOUT:3};Yn(A||[]);self.addEventListener("install",()=>{self.skipWaiting()});self.addEventListener("activate",o=>{o.waitUntil(self.clients.claim())});Ge(({url:o,request:i})=>o.pathname.startsWith("/api/auth")||i.method==="POST",new jt);Ge(({request:o})=>o.destination==="image",new Bt({cacheName:vt.IMAGES,plugins:[new Yt({maxEntries:vt.MAX_IMAGES,maxAgeSeconds:vt.IMAGE_MAX_AGE,purgeOnQuotaError:!0})]}));Ge(({request:o})=>o.destination==="script"||o.destination==="style",new Wt({cacheName:vt.STATIC}));Ge(({request:o})=>o.mode==="navigate",new qt({cacheName:vt.PAGES,networkTimeoutSeconds:vt.NAV_TIMEOUT}));self.addEventListener("sync",o=>{let i=o;i.tag===sa&&i.waitUntil(Ku())});async function Ku(){let o=await go.queue.orderBy("timestamp").toArray();if(o.length!==0)try{let i=await fetch("/api/sync",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}});if(i.status>=500)throw new Error(`Server error: ${i.status}`);if(!i.ok){console.error("[SW] Batch sync rejected:",await i.text());return}let{results:s}=await i.json();await Uu(o,s)}catch(i){throw console.error("[SW] Sync failed:",i),i}}async function Uu(o,i){if(!Array.isArray(i))return;let s=[],u=[];for(let h of i)h.status==="success"&&h.id?s.push(h.id):h.status==="failed"&&h.id&&(console.warn(`[SW] Item ${h.id} failed: ${h.error}`),u.push(h.id));let l=[...s,...u];l.length>0&&await go.queue.bulkDelete(l),await Mu(o,s)}async function Mu(o,i){let s=await self.clients.matchAll({type:"window"});for(let u of o)if(u.id&&i.includes(u.id)){let l={type:"OpSynced",action:u.action,originalId:u.id};for(let h of s)h.postMessage(l)}}self.addEventListener("push",o=>{let i=o,s={title:"Vynk",body:"You have a new notification",icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png"},u=s;if(i.data)try{let l=i.data.json();u={title:l.title||s.title,body:l.body||s.body,icon:l.icon||s.icon,badge:l.badge||s.badge}}catch{}i.waitUntil(self.registration.showNotification(u.title,{body:u.body,icon:u.icon,badge:u.badge,tag:"vynk-notification"}))});self.addEventListener("notificationclick",o=>{o.notification.close(),o.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(i=>{for(let s of i)if("focus"in s)return s.focus();return self.clients.openWindow("/")}))});self.addEventListener("message",o=>{let{type:i}=o.data||{};switch(i){case"SKIP_WAITING":self.skipWaiting();break;case"TRIGGER_SYNC":self.registration.sync?.register(sa).catch(s=>console.warn("[SW] Sync registration failed:",s));break;case"GET_VERSION":o.ports[0]?.postMessage({version:"1.0.0"});break}});})();
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
